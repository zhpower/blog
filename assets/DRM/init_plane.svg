<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="732" height="1295"><desc>title%20init%20plane%0A%0ADriver-%3Edrm_drv%3A%3Ccolor%3A%23ff0066%3Edrmm_universal_plane_alloc%3C%2Fcolor%3E()%0Arbox%20over%20drm_drv%3A__drmm_universal_plane_alloc(%20)%20%20%20%5Cn%5Cn%20%20%201.%20drmm_kzalloc()%20%5C%2F%5C%2F%E6%A0%B9%E6%8D%AE%E7%94%A8%E6%88%B7%E7%BB%99%E7%9A%84size%E5%88%86%E9%85%8Dmemory%5Cn%5Cn%20%20%202.%20__drm_universal_plane_init()%5Cn%5Cn%20%20%20%20%20%20%20%20%20a.%20drm_mode_object_add(%20plane-%3Ebase)%5Cn%20%20%20%20%20%20%20%20%20b.%20list_add_tail(plane-%3Ehead%2C%20config-%3Eplane_list)%5C%2F%5C%2F%E6%B7%BB%E5%8A%A0%E5%88%B0config%E7%9A%84plane%E9%93%BE%E8%A1%A8%5Cn%20%20%20%20%20%20%20%20%20c.%20drm_object_attach_property(plane-%3Ebase%2C%20property)%5C%2F%5C%2F%E9%92%88%E5%AF%B9%E8%AF%A5drm_object%20%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7%5Cn%20%20%20%20%20%20%20%20%20d.%20if%20allow_fb_modifiers%2C%20%5C-%5C-%3E%20create_in_format_blob()%5Cn%5Cn%20%20%203.%20drmm_add_action_or_reset()%0Arbox%20over%20drm_drv%3Aset%20plane-%3Efuncs%5Cn%3Ccolor%3A%23red%3Edrm_plane_funcs%3C%2Fcolor%3E%7B%5Cn%20%20%20%20%20%20update_plane()%5Cn%20%20%20%20%20%20disable_plane()%5Cn%20%20%20%20%20%20destory()%5Cn%20%20%20%20%20%20reset()%5Cn%20%20%20%20%20%20set_property()%5Cn%5Cn%20%20%20%20%20%20atomic_duplicate_state()%5Cn%20%20%20%20%20%20atomic_destory_state()%5Cn%20%20%20%20%20%20atomic_set_property()%5Cn%20%20%20%20%20%20atomic_get_property()%5Cn%20%20%20%20%20%20atomic_print_state()%5Cn%5Cn%20%20%20%20%20%20late_register()%5Cn%20%20%20%20%20%20early_unregister()%5Cn%20%20%20%20%20%20format_mod_supported()%5Cn%7D%0ADriver-%3Edrm_drv%3A%3Ccolor%3A%23ff0066%3Edrm_plane_helper_add%3C%2Fcolor%3E(%20)%0Arbox%20over%20drm_drv%3Aset%20plane%5C-%3Ehelper_private%5Cn%5Cn%3Ccolor%3A%23red%3Edrm_plane_helper_funcs%3C%2Fcolor%3E%7B%5Cn%20%20%20%20%20%20%20prepare_fb()%20%20%3C%5C-%5C-%20drm_atomic_helper_prepare_planes()%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%5C-%5C-drm_atomic_helper_commit()%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%5C-%5C-drm_mode_config_funcs.%3Ccolor%3A%23red%3Eatomic_commit%3C%2Fcolor%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%2F%5C%2F%E4%B8%BB%E8%A6%81%E5%8C%85%E6%8B%AC%E8%AE%BE%E7%BD%AEfb%20fence%2C%20%20%E6%98%A0%E5%B0%84fb%E8%99%9A%E6%8B%9F%E5%9C%B0%E5%9D%80%E7%AD%89%5Cn%20%20%20%20%20%20%20cleanup_fb()%5Cn%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20atomic_check()%5Cn%20%20%20%20%20%20%20atomic_update()%5Cn%20%20%20%20%20%20%20atomic_disable()%5Cn%5Cn%20%20%20%20%20%20%20atomic_async_check()%5Cn%20%20%20%20%20%20%20atomic_async_update()%5Cn%7D%0Arbox%20over%20drm_drv%3Aplane-%3Ehelper_private%20%3D%20funcs</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="732" height="1295"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 48.97455687792578 103.10369087072726 L 48.97455687792578 1295.8248425907275" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 390.5878455228867 103.10369087072726 L 390.5878455228867 1295.8248425907275" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.795878699999996 55.60594589072727 L 89.15323505585155 55.60594589072727 L 89.15323505585155 103.10369087072726 L 8.795878699999996 103.10369087072726 L 8.795878699999996 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="27.882935478999997" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Driver</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 342.2201719836328 55.60594589072727 L 438.9555190621406 55.60594589072727 L 438.9555190621406 103.10369087072726 L 342.2201719836328 103.10369087072726 L 342.2201719836328 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="361.3072287626328" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_drv</text></g></g><g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16pt" font-style="normal" font-weight="normal" text-decoration="normal" x="318.45538330078125" y="26.547561167272725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">init plane</text></g><g><g><rect fill="white" stroke="none" x="114.33999313239842" y="138.28720567072727" width="210.88241613601562" height="22.86928462"/></g><text fill="#ff0066" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="116.97875674239842" y="154.1197873307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drmm_universal_plane_alloc</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="312.7912262248203" y="154.1197873307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 48.97455687792578 161.15649029072728 L 376.1039652635534 161.15649029072728" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(390.5878455228867,161.15649029072728) translate(-390.5878455228867,-161.15649029072728)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 375.92804768955335 153.8265913740606 L 390.5878455228867 161.15649029072728 L 375.92804768955335 168.48638920739396 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 57.77043557792575 203.37670805072727 L 57.77043557792575 203.37670805072727 A 15.832581659999999 15.832581659999999 0 0 1 73.60301723792576 187.54412639072729 L 707.5726738078477 187.54412639072729 L 707.5726738078477 187.54412639072729 A 15.832581659999999 15.832581659999999 0 0 1 723.4052554678476 203.37670805072727 L 723.4052554678476 405.6819181507273 L 723.4052554678476 405.6819181507273 A 15.832581659999999 15.832581659999999 0 0 1 707.5726738078477 421.51449981072733 L 73.60301723792576 421.51449981072733 L 73.60301723792576 421.51449981072733 A 15.832581659999999 15.832581659999999 0 0 1 57.77043557792575 405.6819181507273 L 57.77043557792575 203.37670805072727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="212.17258675072733" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">__drmm_universal_plane_alloc( )   </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="247.35610155072735" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   1. drmm_kzalloc() //根据用户给的size分配memory</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="282.53961635072733" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   2. __drm_universal_plane_init()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="317.72313115072734" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         a. drm_mode_object_add( plane-&gt;base)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="335.31488855072735" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         b. list_add_tail(plane-&gt;head, config-&gt;plane_list)//添加到config的plane链表</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="352.90664595072735" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         c. drm_object_attach_property(plane-&gt;base, property)//针对该drm_object 添加属性</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="370.49840335072736" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         d. if allow_fb_modifiers, --&gt; create_in_format_blob()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="405.68191815072737" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   3. drmm_add_action_or_reset()</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 265.14693093925393 463.7347175707273 L 265.14693093925393 463.7347175707273 A 15.832581659999999 15.832581659999999 0 0 1 280.97951259925395 447.9021359107273 L 500.19617844651947 447.9021359107273 L 500.19617844651947 447.9021359107273 A 15.832581659999999 15.832581659999999 0 0 1 516.0287601065195 463.7347175707273 L 516.0287601065195 771.5904720707274 L 516.0287601065195 771.5904720707274 A 15.832581659999999 15.832581659999999 0 0 1 500.19617844651947 787.4230537307274 L 280.97951259925395 787.4230537307274 L 280.97951259925395 787.4230537307274 A 15.832581659999999 15.832581659999999 0 0 1 265.14693093925393 771.5904720707274 L 265.14693093925393 463.7347175707273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="472.53059627072736" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">set plane-&gt;funcs</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="490.12235367072736" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_plane_funcs</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="407.606476504332" y="490.12235367072736" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">{</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="507.71411107072737" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      update_plane()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="525.3058684707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      disable_plane()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="542.8976258707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      destory()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="560.4893832707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      reset()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="578.0811406707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      set_property()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="613.2646554707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      atomic_duplicate_state()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="630.8564128707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      atomic_destory_state()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="648.4481702707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      atomic_set_property()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="666.0399276707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      atomic_get_property()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="683.6316850707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      atomic_print_state()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="718.8151998707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      late_register()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="736.4069572707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      early_unregister()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="753.9987146707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      format_mod_supported()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="289.7753912992539" y="771.5904720707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">}</text></g><g><g><rect fill="white" stroke="none" x="130.82889999274997" y="813.8106898307274" width="177.9046024153125" height="22.86928462"/></g><text fill="#ff0066" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="133.46766360274998" y="829.6432714907273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_plane_helper_add</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="291.9644592570469" y="829.6432714907273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 48.97455687792578 836.6799744507274 L 376.1039652635534 836.6799744507274" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(390.5878455228867,836.6799744507274) translate(-390.5878455228867,-836.6799744507274)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 375.92804768955335 829.3500755340607 L 390.5878455228867 836.6799744507274 L 375.92804768955335 844.0098733673941 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 132.99953866630466 878.9001922107275 L 132.99953866630466 878.9001922107275 A 15.832581659999999 15.832581659999999 0 0 1 148.83212032630465 863.0676105507275 L 632.3435707194687 863.0676105507275 L 632.3435707194687 863.0676105507275 A 15.832581659999999 15.832581659999999 0 0 1 648.1761523794687 878.9001922107275 L 648.1761523794687 1151.5724319107276 L 648.1761523794687 1151.5724319107276 A 15.832581659999999 15.832581659999999 0 0 1 632.3435707194687 1167.4050135707275 L 148.83212032630465 1167.4050135707275 L 148.83212032630465 1167.4050135707275 A 15.832581659999999 15.832581659999999 0 0 1 132.99953866630466 1151.5724319107276 L 132.99953866630466 878.9001922107275" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="887.6960709107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">set plane-&gt;helper_private</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="922.8795857107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_plane_helper_funcs</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="326.55428381634374" y="922.8795857107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">{</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="940.4713431107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">       prepare_fb()  &lt;-- drm_atomic_helper_prepare_planes() </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="958.0631005107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                                 &lt;--drm_atomic_helper_commit()  </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="975.6548579107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                                     &lt;--drm_mode_config_funcs.</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="515.7165915556016" y="975.6548579107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">atomic_commit</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="993.2466153107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                             //主要包括设置fb fence,  映射fb虚拟地址等</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="1010.8383727107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">       cleanup_fb()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="1028.4301301107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="1046.0218875107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">       atomic_check()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="1063.6136449107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">       atomic_update()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="1081.2054023107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">       atomic_disable()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="1116.3889171107276" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">       atomic_async_check()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="1133.9806745107276" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">       atomic_async_update()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.62799902630468" y="1151.5724319107276" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">}</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 260.01093698173435 1209.6252313307275 L 260.01093698173435 1209.6252313307275 A 15.832581659999999 15.832581659999999 0 0 1 275.84351864173436 1193.7926496707275 L 505.332172404039 1193.7926496707275 L 505.332172404039 1193.7926496707275 A 15.832581659999999 15.832581659999999 0 0 1 521.164754064039 1209.6252313307275 L 521.164754064039 1218.4211100307275 L 521.164754064039 1218.4211100307275 A 15.832581659999999 15.832581659999999 0 0 1 505.332172404039 1234.2536916907275 L 275.84351864173436 1234.2536916907275 L 275.84351864173436 1234.2536916907275 A 15.832581659999999 15.832581659999999 0 0 1 260.01093698173435 1218.4211100307275 L 260.01093698173435 1209.6252313307275" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="284.63939734173437" y="1218.4211100307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">plane-&gt;helper_private = funcs</text></g></g><g/><g/></g></svg>