<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1943" height="2675"><desc>title%20DRM%20GEM%20%0A%0Aparticipant%20App%0A%0Aparticipant%20libdrm%0A%0Aparticipant%20Drm%20core%0Aparticipant%20kernel%0A%0Aparticipant%20drm_dumb_buffers%0A%0Aparticipant%20DRM%20driver%0Aparticipant%20DRM%20GEM%0A%0A%3D%3Dcreate%20dumb%3D%3D%0AApp%20-%3E%20libdrm%3AdrmIoctl(fd%2C%20DRM_IOCTL_MODE_CREATE_DUMB%2C...)%0Alibdrm-%3EDrm%20core%3Aioctl(DRM_IOCTL_MODE_CREATE_DUMB)%0Arbox%20over%20Drm%20core%3Adrm_ioctl(%20)%0ADrm%20core%20-%3E%20drm_dumb_buffers%3Adrm_mode_create_dumb_ioctl()%0Arbox%20over%20drm_dumb_buffers%3Adrm_mode_create_dumb(%20)%5Cn%20%20%20%20%20%20%20%20%20%20%3Ccolor%3A%23ff00ff%3Edriver-%3Edumb_create(%20)%3C%2Fcolor%3E%0A%0Adrm_dumb_buffers%20-%3E%20DRM%20driver%3A%20driver-%3Edumb_create(%20)%0A%0Aactivate%20DRM%20driver%0Arbox%20right%20of%20DRM%20driver%3A1.kzalloc()%20%E7%A7%81%E6%9C%89%E7%BB%93%E6%9E%84%5Cn2.%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AAGEM%20obj%EF%BC%8C%E5%88%A9%E7%94%A8%E5%AE%83%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AAhandle%0ADRM%20driver%20-%3E%20DRM%20GEM%3A%3Ccolor%3A%23green%3Edrm_gem_object_init(%20%3Ccolor%3A%23FF0000%3Egem_obj_func%3C%2Fcolor%3E%20)%3C%2Fcolor%3E%0ADRM%20driver%20-%3E%20DRM%20GEM%3A%3Ccolor%3A%23green%3Edrm_gem_handle_create(%20)%3C%2Fcolor%3E%0AApp%3C%3C--DRM%20GEM%3Ahandle%0Adeactivate%20DRM%20driver%0A%0A%3D%3Dmap%20dumb%3D%3D%0A%0A%0Arbox%20over%20App%3A%E5%88%86%E4%B8%A4%E6%AD%A5%E5%AE%8C%E6%88%90%5Cn%3Ccolor%3A%23red%3E1.%3C%2Fcolor%3E%20drmIoctl()%20%5C-%5C-%3E%20get%20offset%5Cn%3Ccolor%3A%23red%3E2.%3C%2Fcolor%3E%20mmap(%20)%20%5C%2F%5C%2F%E6%98%A0%E5%B0%84%E5%88%B0%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4%0AApp%20-%3E%20libdrm%3AdrmIoctl(fd%2C%20DRM_IOCTL_MODE_MAP_DUMB%2C...)%0A%0Alibdrm-%3EDrm%20core%3Aioctl(DRM_IOCTL_MODE_MAP_DUMB)%0A%0Arbox%20over%20Drm%20core%3Adrm_ioctl(%20)%0A%0ADrm%20core-%3E%20drm_dumb_buffers%3Adrm_mode_mmap_dumb_ioctl(%20)%0A%0A%0Aspace%0Arbox%20over%20drm_dumb_buffers%3A%3Ccolor%3A%23ff00ff%3Edev-%3Edriver-%3Edumb_map_offset(%20)%3C%2Fcolor%3E%20%0Adrm_dumb_buffers-%3EDRM%20driver%3Adriver-%3Edumb_map_offset()%0ADRM%20driver-%3EDRM%20GEM%3A%3Ccolor%3A%23green%3Edrm_gem_dumb_map_offset(%20)%3C%2Fcolor%3E%0Aspace%0A%0A%0A%0AApp%3C%3C--DRM%20GEM%3Aoffset%0AApp%20-%3E%20kernel%3Ammap(...%20offset%2C..)%0A%0Arbox%20over%20kernel%3Ammap_region(%20)%5Cndo_mmap(%20)%5Cnvm_mmap_pgoff(%20)%5Cnksys_mmap_pgoff(%20)%5Cn__x64_sys_mmap(%20)%5Cndo_syscall_64(%20)%0A%0Akernel%20-%3E%20Drm%20core%3A%3Ccolor%3A%23ff00ff%3Efile_operations.mmap(%20)%3C%2Fcolor%3E%0Arbox%20over%20Drm%20core%3A%E5%9C%A8%3Ccolor%3A%23ff00ff%3Edrm_driver.fops.mmap%3C%2Fcolor%3E(%20)%E4%B8%AD%E8%AE%BE%E7%BD%AE%E5%AF%B9%E5%BA%94%E5%87%BD%E6%95%B0%E5%AE%9E%E7%8E%B0%0A%0ADrm%20core-%3EDRM%20driver%3Adriver-%3Efops.mmap()%0ADRM%20driver-%3EDRM%20GEM%3A%3Ccolor%3A%23green%3Edrm_gem_mmap()%20%3C%2Fcolor%3E%0Arbox%20left%20of%20DRM%20GEM%3A%E8%B0%83%E7%94%A8%E5%9C%A8init%E6%97%B6%E6%B3%A8%E5%86%8C%E7%9A%84%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0%0ADRM%20driver%3C-DRM%20GEM%3A%3Ccolor%3A%23FF0000%3Egem_obj_funcs%3C%2Fcolor%3E.mmap()%0Akernel%3C-DRM%20driver%3Aremap_pfn_range(%20)%0A%0A%0A%0A%3D%3Ddestroy%20dumb%3D%3D%0AApp-%3Elibdrm%3AdrmIoctl(fd%2CDRM_IOCTL_MODE_DESTROY_DUMB)%0Alibdrm-%3EDrm%20core%3Aioctl(DRM_IOCTL_MODE_DESTROY_DUMB)%0Arbox%20over%20Drm%20core%3Adrm_ioctl()%0ADrm%20core%20-%3Edrm_dumb_buffers%3Adrm_mode_destroy_dumb_ioctl(%20)%0Arbox%20over%20drm_dumb_buffers%3Adrm_mode_destroy_dumb(%20)%5Cn%5Cn%20%20%3Ccolor%3A%23ff00ff%3Edriver-%3Edumb_destory%3C%2Fcolor%3E%0A%0Adrm_dumb_buffers-%3EDRM%20driver%3Adriver-%3Edumb_destory(%20)%0ADRM%20driver-%3EDRM%20GEM%3A%3Ccolor%3A%23green%3Edrm_gem_object_lookup(%20)%3C%2Fcolor%3E%5Cnhandle%20--%3E%20gem_obj%0A%0Arbox%20over%20DRM%20driver%3A%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90%5Cnkfree(%20)</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1943" height="2675"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="914.1055843305286" y="26.3876361" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">DRM GEM </text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 130.9333035985742 103.26361593799999 L 130.9333035985742 2675.178547817998" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 530.7295443605534 103.26361593799999 L 530.7295443605534 2675.178547817998" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 877.9417091947982 103.26361593799999 L 877.9417091947982 2675.178547817998" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1090.429295171621 103.26361593799999 L 1090.429295171621 2675.178547817998" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1245.5071910553515 103.26361593799999 L 1245.5071910553515 2675.178547817998" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1493.2402101755338 103.26361593799999 L 1493.2402101755338 2675.178547817998" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1879.5719923373306 103.26361593799999 L 1879.5719923373306 2675.178547817998" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 97.32585344799219 55.765870957999994 L 164.54075374915624 55.765870957999994 L 164.54075374915624 103.26361593799999 L 97.32585344799219 103.26361593799999 L 97.32585344799219 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="116.41291022699218" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">App</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 488.71836191016666 55.765870957999994 L 572.7407268109401 55.765870957999994 L 572.7407268109401 103.26361593799999 L 488.71836191016666 103.26361593799999 L 488.71836191016666 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="507.8054186891667" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">libdrm</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 826.2597961535912 55.765870957999994 L 929.6236222360053 55.765870957999994 L 929.6236222360053 103.26361593799999 L 826.2597961535912 103.26361593799999 L 826.2597961535912 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="845.3468529325912" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Drm core</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1049.9392308852969 55.765870957999994 L 1130.9193594579453 55.765870957999994 L 1130.9193594579453 103.26361593799999 L 1049.9392308852969 103.26361593799999 L 1049.9392308852969 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1069.026287664297" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">kernel</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1160.0672213735195 55.765870957999994 L 1330.9471607371836 55.765870957999994 L 1330.9471607371836 103.26361593799999 L 1160.0672213735195 103.26361593799999 L 1160.0672213735195 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1179.1542781525195" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_dumb_buffers</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1434.2569436797369 55.765870957999994 L 1552.2234766713307 55.765870957999994 L 1552.2234766713307 103.26361593799999 L 1434.2569436797369 103.26361593799999 L 1434.2569436797369 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1453.344000458737" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">DRM driver</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1824.142757213604 55.765870957999994 L 1935.0012274610572 55.765870957999994 L 1935.0012274610572 103.26361593799999 L 1824.142757213604 103.26361593799999 L 1824.142757213604 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1843.229813992604" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">DRM GEM</text></g></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1484.4443314755338 527.2249692779999 L 1502.0360888755338 527.2249692779999 L 1502.0360888755338 759.436166958 L 1484.4443314755338 759.436166958 L 1484.4443314755338 527.2249692779999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 152.81373261466666 L 1934.2041213 152.81373261466666 M 8.7958787 158.677651748 L 1934.2041213 158.677651748 M 8.7958787 164.5415708813333 L 1934.2041213 164.5415708813333" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 902.5372500892188 138.447130738 L 1040.4627499107814 138.447130738 L 1040.4627499107814 178.90817275799998 L 902.5372500892188 178.90817275799998 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="927.1657104492188" y="163.07559109800002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">create dumb</text></g><g><g><rect fill="white" stroke="none" x="151.7502165219076" y="205.29580885799996" width="358.1624149153125" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="154.3889801319076" y="221.12839051799997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drmIoctl(fd, DRM_IOCTL_MODE_CREATE_DUMB,...)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 130.9333035985742 228.16509347799996 L 516.2456641012201 228.16509347799996" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(530.7295443605534,228.16509347799996) translate(-530.7295443605534,-228.16509347799996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 516.0697465272201 220.83519456133328 L 530.7295443605534 228.16509347799996 L 516.0697465272201 235.49499239466664 Z"/></g></g><g><g><rect fill="white" stroke="none" x="558.0210666588868" y="254.55272957799994" width="292.62912023757815" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="560.6598302688867" y="270.38531123799993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ioctl(DRM_IOCTL_MODE_CREATE_DUMB)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 530.7295443605534 277.42201419799994 L 863.4578289354649 277.42201419799994" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(877.9417091947982,277.42201419799994) translate(-877.9417091947982,-277.42201419799994)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 863.281911361465 270.0921152813333 L 877.9417091947982 277.42201419799994 L 863.281911361465 284.7519131146666 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 813.6532528020834 319.64223195799997 L 813.6532528020834 319.64223195799997 A 15.832581659999999 15.832581659999999 0 0 1 829.4858344620834 303.80965029799995 L 926.3975839275132 303.80965029799995 L 926.3975839275132 303.80965029799995 A 15.832581659999999 15.832581659999999 0 0 1 942.2301655875132 319.64223195799997 L 942.2301655875132 328.4381106579999 L 942.2301655875132 328.4381106579999 A 15.832581659999999 15.832581659999999 0 0 1 926.3975839275132 344.27069231799993 L 829.4858344620834 344.27069231799993 L 829.4858344620834 344.27069231799993 A 15.832581659999999 15.832581659999999 0 0 1 813.6532528020834 328.4381106579999 L 813.6532528020834 319.64223195799997" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="838.2817131620834" y="328.4381106579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_ioctl( )</text></g><g><g><rect fill="white" stroke="none" x="949.1966026527701" y="370.65832841799994" width="225.05569494460937" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="951.8353662627701" y="386.49091007799996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mode_create_dumb_ioctl()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 877.9417091947982 393.5276130379999 L 1231.0233107960182 393.5276130379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1245.5071910553515,393.5276130379999) translate(-1245.5071910553515,-393.5276130379999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1230.8473932220181 386.19771412133326 L 1245.5071910553515 393.5276130379999 L 1230.8473932220181 400.85751195466656 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1118.3662337471094 435.74783079799994 L 1118.3662337471094 435.74783079799994 A 15.832581659999999 15.832581659999999 0 0 1 1134.1988154071094 419.9152491379999 L 1356.8155667035937 419.9152491379999 L 1356.8155667035937 419.9152491379999 A 15.832581659999999 15.832581659999999 0 0 1 1372.6481483635937 435.74783079799994 L 1372.6481483635937 462.1354668979999 L 1372.6481483635937 462.1354668979999 A 15.832581659999999 15.832581659999999 0 0 1 1356.8155667035937 477.9680485579999 L 1134.1988154071094 477.9680485579999 L 1134.1988154071094 477.9680485579999 A 15.832581659999999 15.832581659999999 0 0 1 1118.3662337471094 462.1354668979999 L 1118.3662337471094 435.74783079799994" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1142.9946941071094" y="444.5437094979999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mode_create_dumb( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1142.9946941071094" y="462.1354668979999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">          </text><text fill="#ff00ff" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1186.373295181328" y="462.1354668979999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">driver-&gt;dumb_create( )</text></g><g><g><rect fill="white" stroke="none" x="1281.5138012443097" y="504.3556846579999" width="166.92392004226562" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1284.1525648543097" y="520.1882663179999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">driver-&gt;dumb_create( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1245.5071910553515 527.2249692779999 L 1469.9604512162005 527.2249692779999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1484.4443314755338,527.2249692779999) translate(-1484.4443314755338,-527.2249692779999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1469.7845336422004 519.8950703613332 L 1484.4443314755338 527.2249692779999 L 1469.7845336422004 534.5548681946666 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1502.0360888755338 582.6390050879999 L 1510.8319675755338 582.6390050879999 M 1510.8319675755338 569.4451870379997 L 1510.8319675755338 569.4451870379997 A 15.832581659999999 15.832581659999999 0 0 1 1526.6645492355337 553.6126053779998 L 1854.9435319773306 553.6126053779998 L 1854.9435319773306 553.6126053779998 A 15.832581659999999 15.832581659999999 0 0 1 1870.7761136373306 569.4451870379997 L 1870.7761136373306 595.8328231379999 L 1870.7761136373306 595.8328231379999 A 15.832581659999999 15.832581659999999 0 0 1 1854.9435319773306 611.6654047979998 L 1526.6645492355337 611.6654047979998 L 1526.6645492355337 611.6654047979998 A 15.832581659999999 15.832581659999999 0 0 1 1510.8319675755338 595.8328231379999 L 1510.8319675755338 569.4451870379997" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1535.4604279355337" y="578.2410657379999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1.kzalloc() 私有结构</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1535.4604279355337" y="595.8328231379999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2.初始化一个GEM obj，利用它返回一个handle</text></g><g><g><rect fill="white" stroke="none" x="1557.1666808050259" y="638.0530408979998" width="267.2747196028125" height="22.86928462"/></g><text fill="green" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1559.805444415026" y="653.8856225579998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_gem_object_init( </text><text fill="#FF0000" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1714.8949524716666" y="653.8856225579998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">gem_obj_func</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1812.5685669736197" y="653.8856225579998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1502.0360888755338 660.9223255179999 L 1865.0881120779973 660.9223255179999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1879.5719923373306,660.9223255179999) translate(-1879.5719923373306,-660.9223255179999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1864.9121945039972 653.5924266013332 L 1879.5719923373306 660.9223255179999 L 1864.9121945039972 668.2522244346666 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1595.896104327975" y="687.3099616179999" width="189.81587255691406" height="22.86928462"/></g><text fill="green" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1598.5348679379752" y="703.1425432779998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_gem_handle_create( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1502.0360888755338 710.1792462379999 L 1865.0881120779973 710.1792462379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1879.5719923373306,710.1792462379999) translate(-1879.5719923373306,-710.1792462379999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1864.9121945039972 702.8493473213332 L 1879.5719923373306 710.1792462379999 L 1864.9121945039972 717.5091451546666 Z"/></g></g><g><g><rect fill="white" stroke="none" x="978.734138874554" y="736.5668823379999" width="53.03701818679687" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="981.372902484554" y="752.3994639979999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">handle</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1879.5719923373306 759.436166958 L 133.1322732735742 759.436166958" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(130.9333035985742,759.436166958) translate(-130.9333035985742,-759.436166958)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 146.00510524186316 752.7125081273285 L 132.58131883839673 759.436166958 L 146.00510524186316 766.1598257886714" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 800.1904049346667 L 1934.2041213 800.1904049346667 M 8.7958787 806.054324068 L 1934.2041213 806.054324068 M 8.7958787 811.9182432013333 L 1934.2041213 811.9182432013333" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 908.3461261268164 785.823803058 L 1034.6538738731838 785.823803058 L 1034.6538738731838 826.284845078 L 908.3461261268164 826.284845078 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="932.9745864868164" y="810.452263418" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">map dumb</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 868.505062838 L 8.7958787 868.505062838 A 15.832581659999999 15.832581659999999 0 0 1 24.62846036 852.672481178 L 237.23814683714843 852.672481178 L 237.23814683714843 852.672481178 A 15.832581659999999 15.832581659999999 0 0 1 253.07072849714842 868.505062838 L 253.07072849714842 912.484456338 L 253.07072849714842 912.484456338 A 15.832581659999999 15.832581659999999 0 0 1 237.23814683714843 928.3170379979999 L 24.62846036 928.3170379979999 L 24.62846036 928.3170379979999 A 15.832581659999999 15.832581659999999 0 0 1 8.7958787 912.484456338 L 8.7958787 868.505062838" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="33.424339059999994" y="877.300941538" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">分两步完成</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="33.424339059999994" y="894.892698938" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1.</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="45.55033088128906" y="894.892698938" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> drmIoctl() --&gt; get offset</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="33.424339059999994" y="912.484456338" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2.</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="45.55033088128906" y="912.484456338" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> mmap( ) //映射到用户空间</text></g><g><g><rect fill="white" stroke="none" x="161.52472213714196" y="954.7046740979999" width="338.6134036848438" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="164.16348574714198" y="970.5372557579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drmIoctl(fd, DRM_IOCTL_MODE_MAP_DUMB,...)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 130.9333035985742 977.573958718 L 516.2456641012201 977.573958718" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(530.7295443605534,977.573958718) translate(-530.7295443605534,-977.573958718)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 516.0697465272201 970.2440598013333 L 530.7295443605534 977.573958718 L 516.0697465272201 984.9038576346667 Z"/></g></g><g><g><rect fill="white" stroke="none" x="567.7955722741211" y="1003.961594818" width="273.0801090071094" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="570.4343358841211" y="1019.7941764779999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ioctl(DRM_IOCTL_MODE_MAP_DUMB)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 530.7295443605534 1026.830879438 L 863.4578289354649 1026.830879438" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(877.9417091947982,1026.830879438) translate(-877.9417091947982,-1026.830879438)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 863.281911361465 1019.5009805213333 L 877.9417091947982 1026.830879438 L 863.281911361465 1034.1607783546667 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 813.6532528020834 1069.051097198 L 813.6532528020834 1069.051097198 A 15.832581659999999 15.832581659999999 0 0 1 829.4858344620834 1053.218515538 L 926.3975839275132 1053.218515538 L 926.3975839275132 1053.218515538 A 15.832581659999999 15.832581659999999 0 0 1 942.2301655875132 1069.051097198 L 942.2301655875132 1077.846975898 L 942.2301655875132 1077.846975898 A 15.832581659999999 15.832581659999999 0 0 1 926.3975839275132 1093.679557558 L 829.4858344620834 1093.679557558 L 829.4858344620834 1093.679557558 A 15.832581659999999 15.832581659999999 0 0 1 813.6532528020834 1077.846975898 L 813.6532528020834 1069.051097198" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="838.2817131620834" y="1077.8469758979998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_ioctl( )</text></g><g><g><rect fill="white" stroke="none" x="945.9682548744498" y="1120.067193658" width="231.51239050125" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="948.6070184844498" y="1135.899775318" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mode_mmap_dumb_ioctl( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 877.9417091947982 1142.9364782779999 L 1231.0233107960182 1142.9364782779999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1245.5071910553515,1142.9364782779999) translate(-1245.5071910553515,-1142.9364782779999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1230.8473932220181 1135.6065793613332 L 1245.5071910553515 1142.9364782779999 L 1230.8473932220181 1150.2663771946666 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1099.225173871621 1229.1360895379999 L 1099.225173871621 1229.1360895379999 A 15.832581659999999 15.832581659999999 0 0 1 1115.057755531621 1213.303507878 L 1375.956626579082 1213.303507878 L 1375.956626579082 1213.303507878 A 15.832581659999999 15.832581659999999 0 0 1 1391.789208239082 1229.1360895379999 L 1391.789208239082 1237.9319682379999 L 1391.789208239082 1237.9319682379999 A 15.832581659999999 15.832581659999999 0 0 1 1375.956626579082 1253.7645498979998 L 1115.057755531621 1253.7645498979998 L 1115.057755531621 1253.7645498979998 A 15.832581659999999 15.832581659999999 0 0 1 1099.225173871621 1237.9319682379999 L 1099.225173871621 1229.1360895379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="#ff00ff" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1123.853634231621" y="1237.9319682379996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">dev-&gt;driver-&gt;dumb_map_offset( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1362.8228877716601" y="1237.9319682379996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> </text></g><g><g><rect fill="white" stroke="none" x="1270.7220433286848" y="1280.1521859979998" width="197.30331457351562" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1273.3608069386848" y="1295.9847676579998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">driver-&gt;dumb_map_offset()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1245.5071910553515 1303.0214706179997 L 1478.7563299162005 1303.0214706179997" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1493.2402101755338,1303.0214706179997) translate(-1493.2402101755338,-1303.0214706179997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1478.5804123422004 1295.691571701333 L 1493.2402101755338 1303.0214706179997 L 1478.5804123422004 1310.3513695346664 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1577.2640875243617" y="1329.4091067179997" width="218.28402746414062" height="22.86928462"/></g><text fill="green" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1579.9028511343618" y="1345.2416883779997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_gem_dumb_map_offset( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1493.2402101755338 1352.2783913379997 L 1865.0881120779973 1352.2783913379997" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1879.5719923373306,1352.2783913379997) translate(-1879.5719923373306,-1352.2783913379997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1864.9121945039972 1344.948492421333 L 1879.5719923373306 1352.2783913379997 L 1864.9121945039972 1359.6082902546664 Z"/></g></g><g><g><rect fill="white" stroke="none" x="982.7319950146907" y="1422.6454209379997" width="45.041305906523434" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="985.3707586246907" y="1438.4780025979996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">offset</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1879.5719923373306 1445.5147055579996 L 133.1322732735742 1445.5147055579996" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(130.9333035985742,1445.5147055579996) translate(-130.9333035985742,-1445.5147055579996)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 146.00510524186316 1438.7910467273282 L 132.58131883839673 1445.5147055579996 L 146.00510524186316 1452.238364388671" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><g><rect fill="white" stroke="none" x="548.038949959668" y="1471.9023416579996" width="125.28469885085937" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="550.677713569668" y="1487.7349233179996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">mmap(... offset,..)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 130.9333035985742 1494.7716262779995 L 1075.9454149122878 1494.7716262779995" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1090.429295171621,1494.7716262779995) translate(-1090.429295171621,-1494.7716262779995)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1075.7694973382877 1487.4417273613328 L 1090.429295171621 1494.7716262779995 L 1075.7694973382877 1502.1015251946662 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 996.0692597994141 1536.9918440379995 L 996.0692597994141 1536.9918440379995 A 15.832581659999999 15.832581659999999 0 0 1 1011.9018414594141 1521.1592623779995 L 1168.9567488838281 1521.1592623779995 L 1168.9567488838281 1521.1592623779995 A 15.832581659999999 15.832581659999999 0 0 1 1184.789330543828 1536.9918440379995 L 1184.789330543828 1633.7465097379995 L 1184.789330543828 1633.7465097379995 A 15.832581659999999 15.832581659999999 0 0 1 1168.9567488838281 1649.5790913979995 L 1011.9018414594141 1649.5790913979995 L 1011.9018414594141 1649.5790913979995 A 15.832581659999999 15.832581659999999 0 0 1 996.0692597994141 1633.7465097379995 L 996.0692597994141 1536.9918440379995" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1020.6977201594141" y="1545.7877227379993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">mmap_region( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1020.6977201594141" y="1563.3794801379993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">do_mmap( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1020.6977201594141" y="1580.9712375379993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">vm_mmap_pgoff( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1020.6977201594141" y="1598.5629949379993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ksys_mmap_pgoff( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1020.6977201594141" y="1616.1547523379993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">__x64_sys_mmap( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1020.6977201594141" y="1633.7465097379993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">do_syscall_64( )</text></g><g><g><rect fill="white" stroke="none" x="898.7586221181316" y="1675.9667274979995" width="170.85376013015625" height="22.86928462"/></g><text fill="#ff00ff" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="901.3973857281316" y="1691.7993091579995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">file_operations.mmap( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1090.429295171621 1698.8360121179994 L 892.4255894541316 1698.8360121179994" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(877.9417091947982,1698.8360121179994) translate(-877.9417091947982,-1698.8360121179994)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 892.6015070281316 1691.5061132013327 L 877.9417091947982 1698.8360121179994 L 892.6015070281316 1706.1659110346661 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 694.5086452581381 1741.0562298779994 L 694.5086452581381 1741.0562298779994 A 15.832581659999999 15.832581659999999 0 0 1 710.3412269181381 1725.2236482179994 L 1045.5421914714584 1725.2236482179994 L 1045.5421914714584 1725.2236482179994 A 15.832581659999999 15.832581659999999 0 0 1 1061.3747731314584 1741.0562298779994 L 1061.3747731314584 1749.8521085779994 L 1061.3747731314584 1749.8521085779994 A 15.832581659999999 15.832581659999999 0 0 1 1045.5421914714584 1765.6846902379993 L 710.3412269181381 1765.6846902379993 L 710.3412269181381 1765.6846902379993 A 15.832581659999999 15.832581659999999 0 0 1 694.5086452581381 1749.8521085779994 L 694.5086452581381 1741.0562298779994" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="719.1371056181381" y="1749.8521085779992" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">在</text><text fill="#ff00ff" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="733.7970940214584" y="1749.8521085779992" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_driver.fops.mmap</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="890.67613760056" y="1749.8521085779992" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )中设置对应函数实现</text></g><g><g><rect fill="white" stroke="none" x="1110.2392367856153" y="1792.0723263379994" width="150.70344579910156" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1112.8780003956153" y="1807.9049079979993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">driver-&gt;fops.mmap()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 877.9417091947982 1814.9416109579993 L 1478.7563299162005 1814.9416109579993" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1493.2402101755338,1814.9416109579993) translate(-1493.2402101755338,-1814.9416109579993)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1478.5804123422004 1807.6117120413326 L 1493.2402101755338 1814.9416109579993 L 1478.5804123422004 1822.271509874666 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1617.604106750436" y="1841.3292470579993" width="137.60398901199218" height="22.86928462"/></g><text fill="green" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1620.242870360436" y="1857.1618287179992" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_gem_mmap() </text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1493.2402101755338 1864.1985316779992 L 1865.0881120779973 1864.1985316779992" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1879.5719923373306,1864.1985316779992) translate(-1879.5719923373306,-1864.1985316779992)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1864.9121945039972 1856.8686327613325 L 1879.5719923373306 1864.1985316779992 L 1864.9121945039972 1871.528430594666 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1879.5719923373306 1910.816688787999 L 1870.7761136373306 1910.816688787999 M 1637.9615452122525 1906.4187494379992 L 1637.9615452122525 1906.4187494379992 A 15.832581659999999 15.832581659999999 0 0 1 1653.7941268722525 1890.5861677779992 L 1854.9435319773306 1890.5861677779992 L 1854.9435319773306 1890.5861677779992 A 15.832581659999999 15.832581659999999 0 0 1 1870.7761136373306 1906.4187494379992 L 1870.7761136373306 1915.2146281379992 L 1870.7761136373306 1915.2146281379992 A 15.832581659999999 15.832581659999999 0 0 1 1854.9435319773306 1931.0472097979991 L 1653.7941268722525 1931.0472097979991 L 1653.7941268722525 1931.0472097979991 A 15.832581659999999 15.832581659999999 0 0 1 1637.9615452122525 1915.2146281379992 L 1637.9615452122525 1906.4187494379992" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1662.5900055722525" y="1915.214628137999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">调用在init时注册的相关函数</text></g><g><g><rect fill="white" stroke="none" x="1602.4072607421351" y="1957.4348458979991" width="167.99768102859375" height="22.86928462"/></g><text fill="#FF0000" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1605.0460243521352" y="1973.267427557999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">gem_obj_funcs</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1709.5056038199086" y="1973.267427557999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">.mmap()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1879.5719923373306 1980.304130517999 L 1507.724090434867 1980.304130517999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1493.2402101755338,1980.304130517999) translate(-1493.2402101755338,-1980.304130517999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1507.9000080088672 1972.9742316013323 L 1493.2402101755338 1980.304130517999 L 1507.9000080088672 1987.6340294346658 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1221.2933401377961" y="2006.691766617999" width="141.0828250715625" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1223.9321037477962" y="2022.524348277999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">remap_pfn_range( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1493.2402101755338 2029.561051237999 L 1104.9131754309544 2029.561051237999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1090.429295171621,2029.561051237999) translate(-1090.429295171621,-2029.561051237999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1105.0890930049545 2022.2311523213323 L 1090.429295171621 2029.561051237999 L 1105.0890930049545 2036.8909501546657 Z"/></g></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 2070.315289214666 L 1934.2041213 2070.315289214666 M 8.7958787 2076.179208347999 L 1934.2041213 2076.179208347999 M 8.7958787 2082.0431274813322 L 1934.2041213 2082.0431274813322" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 897.7412524695899 2055.9486873379988 L 1045.2587475304103 2055.9486873379988 L 1045.2587475304103 2096.409729357999 L 897.7412524695899 2096.409729357999 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="922.3697128295898" y="2080.577147697999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">destroy dumb</text></g><g><g><rect fill="white" stroke="none" x="154.50252059905603" y="2122.7973654579987" width="352.65780676101565" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.14128420905604" y="2138.6299471179987" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drmIoctl(fd,DRM_IOCTL_MODE_DESTROY_DUMB)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 130.9333035985742 2145.666650077999 L 516.2456641012201 2145.666650077999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(530.7295443605534,2145.666650077999) translate(-530.7295443605534,-2145.666650077999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 516.0697465272201 2138.3367511613324 L 530.7295443605534 2145.666650077999 L 516.0697465272201 2152.9965489946653 Z"/></g></g><g><g><rect fill="white" stroke="none" x="551.5464572838868" y="2172.0542861779986" width="305.57833898757815" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="554.1852208938867" y="2187.8868678379986" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ioctl(DRM_IOCTL_MODE_DESTROY_DUMB)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 530.7295443605534 2194.9235707979988 L 863.4578289354649 2194.9235707979988" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(877.9417091947982,2194.9235707979988) translate(-877.9417091947982,-2194.9235707979988)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 863.281911361465 2187.5936718813323 L 877.9417091947982 2194.9235707979988 L 863.281911361465 2202.2534697146652 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 815.8221828557944 2237.1437885579985 L 815.8221828557944 2237.1437885579985 A 15.832581659999999 15.832581659999999 0 0 1 831.6547645157943 2221.3112068979985 L 924.2286538738023 2221.3112068979985 L 924.2286538738023 2221.3112068979985 A 15.832581659999999 15.832581659999999 0 0 1 940.0612355338022 2237.1437885579985 L 940.0612355338022 2245.9396672579987 L 940.0612355338022 2245.9396672579987 A 15.832581659999999 15.832581659999999 0 0 1 924.2286538738023 2261.7722489179987 L 831.6547645157943 2261.7722489179987 L 831.6547645157943 2261.7722489179987 A 15.832581659999999 15.832581659999999 0 0 1 815.8221828557944 2245.9396672579987 L 815.8221828557944 2237.1437885579985" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="840.4506432157943" y="2245.9396672579987" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_ioctl()</text></g><g><g><rect fill="white" stroke="none" x="942.2316749794303" y="2288.1598850179985" width="238.98555029128906" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="944.8704385894303" y="2303.9924666779984" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mode_destroy_dumb_ioctl( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 877.9417091947982 2311.0291696379986 L 1231.0233107960182 2311.0291696379986" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1245.5071910553515,2311.0291696379986) translate(-1245.5071910553515,-2311.0291696379986)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1230.8473932220181 2303.699270721332 L 1245.5071910553515 2311.0291696379986 L 1230.8473932220181 2318.359068554665 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1122.278121869668 2353.2493873979984 L 1122.278121869668 2353.2493873979984 A 15.832581659999999 15.832581659999999 0 0 1 1138.110703529668 2337.4168057379984 L 1352.9036785810351 2337.4168057379984 L 1352.9036785810351 2337.4168057379984 A 15.832581659999999 15.832581659999999 0 0 1 1368.736260241035 2353.2493873979984 L 1368.736260241035 2397.2287808979986 L 1368.736260241035 2397.2287808979986 A 15.832581659999999 15.832581659999999 0 0 1 1352.9036785810351 2413.0613625579986 L 1138.110703529668 2413.0613625579986 L 1138.110703529668 2413.0613625579986 A 15.832581659999999 15.832581659999999 0 0 1 1122.278121869668 2397.2287808979986 L 1122.278121869668 2353.2493873979984" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1146.906582229668" y="2362.0452660979986" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mode_destroy_dumb( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1146.906582229668" y="2379.6370234979986" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1146.906582229668" y="2397.2287808979986" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  </text><text fill="#ff00ff" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1155.5823024445117" y="2397.2287808979986" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">driver-&gt;dumb_destory</text></g><g><g><rect fill="white" stroke="none" x="1280.7542546323957" y="2439.4489986579983" width="177.23889196609375" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1283.3930182423958" y="2455.2815803179983" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">driver-&gt;dumb_destory( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1245.5071910553515 2462.3182832779985 L 1478.7563299162005 2462.3182832779985" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1493.2402101755338,2462.3182832779985) translate(-1493.2402101755338,-2462.3182832779985)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1478.5804123422004 2454.988384361332 L 1493.2402101755338 2462.3182832779985 L 1478.5804123422004 2469.648182194665 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1590.4638098144007" y="2488.7059193779983" width="191.8845828840625" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="1590.4638098144007" y="2506.2976767779983" width="118.03515661453125" height="22.86928462"/></g><text fill="green" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1593.1025734244008" y="2504.5385010379982" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_gem_object_lookup( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1593.1025734244008" y="2522.1302584379982" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">handle </text><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1645.1999244986196" y="2522.1302584379982" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">&gt; gem_obj</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1493.2402101755338 2529.1669613979984 L 1865.0881120779973 2529.1669613979984" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1879.5719923373306,2529.1669613979984) translate(-1879.5719923373306,-2529.1669613979984)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1864.9121945039972 2521.837062481332 L 1879.5719923373306 2529.1669613979984 L 1864.9121945039972 2536.496860314665 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1439.2917730088932 2571.387179157998 L 1439.2917730088932 2571.387179157998 A 15.832581659999999 15.832581659999999 0 0 1 1455.1243546688931 2555.554597497998 L 1531.3560656821744 2555.554597497998 L 1531.3560656821744 2555.554597497998 A 15.832581659999999 15.832581659999999 0 0 1 1547.1886473421744 2571.387179157998 L 1547.1886473421744 2597.7748152579984 L 1547.1886473421744 2597.7748152579984 A 15.832581659999999 15.832581659999999 0 0 1 1531.3560656821744 2613.6073969179984 L 1455.1243546688931 2613.6073969179984 L 1455.1243546688931 2613.6073969179984 A 15.832581659999999 15.832581659999999 0 0 1 1439.2917730088932 2597.7748152579984 L 1439.2917730088932 2571.387179157998" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1463.9202333688932" y="2580.1830578579984" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">释放资源</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1463.9202333688932" y="2597.7748152579984" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">kfree( )</text></g></g><g/><g/><g/><g/><g/><g/><g/></g></svg>