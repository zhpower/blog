<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1352" height="1781"><desc>title%20DRM%20DUMB%20BUFFER%0A%0Aparticipant%20user%0A%0Aparticipant%20libdrm%0Aparticipant%20kernel%0A%0Aparticipant%20Drm%20core%20Driver%0Aparticipant%20drm_dumb_buffers%0A%0A%3D%3Dcreate%20dumb%3D%3D%0Auser%20-%3E%20libdrm%3AdrmIoctl(fd%2C%20DRM_IOCTL_MODE_CREATE_DUMB%2C...)%0Alibdrm-%3EDrm%20core%20Driver%3Aioctl(DRM_IOCTL_MODE_CREATE_DUMB)%0Arbox%20over%20Drm%20core%20Driver%3Adrm_ioctl(%20)%0ADrm%20core%20Driver%20-%3E%20drm_dumb_buffers%3Adrm_mode_create_dumb_ioctl()%0Arbox%20over%20drm_dumb_buffers%3Adrm_mode_create_dumb(%20)%5Cn%20%20%20%20%20%20%20%20%20%20%3Ccolor%3A%23ff00ff%3Edriver-%3Edumb_create(%20)%3C%2Fcolor%3E%0A%0A%0A%0A%3D%3Dmap%20dumb%3D%3D%0A%0A%0Arbox%20over%20user%3A%E5%88%86%E4%B8%A4%E6%AD%A5%E5%AE%8C%E6%88%90%5Cn%3Ccolor%3A%23red%3E1.%3C%2Fcolor%3E%20drmIoctl()%20%5C-%5C-%3E%20get%20offset%5Cn%3Ccolor%3A%23red%3E2.%3C%2Fcolor%3E%20mmap(%20)%20%5C%2F%5C%2F%E6%98%A0%E5%B0%84%E5%88%B0%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4%0Auser%20-%3E%20libdrm%3AdrmIoctl(fd%2C%20DRM_IOCTL_MODE_MAP_DUMB%2C...)%0Alibdrm-%3EDrm%20core%20Driver%3Aioctl(DRM_IOCTL_MODE_MAP_DUMB)%0Arbox%20over%20Drm%20core%20Driver%3Adrm_ioctl(%20)%0A%0ADrm%20core%20Driver-%3E%20drm_dumb_buffers%3Adrm_mode_mmap_dumb_ioctl(%20)%0A%0A%0Aspace%0Arbox%20over%20drm_dumb_buffers%3A%3Ccolor%3A%23ff00ff%3Edev-%3Edriver-%3Edumb_map_offset(%20)%3C%2Fcolor%3E%20%0Aspace%0A%0A%0A%0Auser%20-%3E%20kernel%3Ammap(%20)%0A%0Arbox%20over%20kernel%3Ammap_region(%20)%5Cndo_mmap(%20)%5Cnvm_mmap_pgoff(%20)%5Cnksys_mmap_pgoff(%20)%5Cn__x64_sys_mmap(%20)%5Cndo_syscall_64(%20)%0A%0Akernel%20-%3E%20Drm%20core%20Driver%3A%3Ccolor%3A%23ff00ff%3Efile_operations.mmap(%20)%3C%2Fcolor%3E%0Arbox%20over%20Drm%20core%20Driver%3A%E5%9C%A8%3Ccolor%3A%23ff00ff%3Edrm_driver.fops.mmap%3C%2Fcolor%3E(%20)%E4%B8%AD%E8%AE%BE%E7%BD%AE%E5%AF%B9%E5%BA%94%E5%87%BD%E6%95%B0%E5%AE%9E%E7%8E%B0%0A%0A%0A%3D%3Ddestroy%20dumb%3D%3D%0Auser-%3Elibdrm%3AdrmIoctl(fd%2CDRM_IOCTL_MODE_DESTROY_DUMB)%0Alibdrm-%3EDrm%20core%20Driver%3Aioctl(DRM_IOCTL_MODE_DESTROY_DUMB)%0Arbox%20over%20Drm%20core%20Driver%3Adrm_ioctl()%0ADrm%20core%20Driver-%3Edrm_dumb_buffers%3Adrm_mode_destroy_dumb_ioctl(%20)%0Arbox%20over%20drm_dumb_buffers%3Adrm_mode_destroy_dumb(%20)%5Cn%5Cn%20%20%3Ccolor%3A%23ff00ff%3Edriver-%3Edumb_destory%3C%2Fcolor%3E%0A%0A%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1352" height="1781"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="569.1713752005924" y="26.3876361" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">DRM DUMB BUFFER</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 130.9333035985742 103.26361593799999 L 130.9333035985742 1781.5172718979993" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 530.7295443605534 103.26361593799999 L 530.7295443605534 1781.5172718979993" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 704.3356267776758 103.26361593799999 L 704.3356267776758 1781.5172718979993" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 916.8232127544986 103.26361593799999 L 916.8232127544986 1781.5172718979993" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1197.4425888924543 103.26361593799999 L 1197.4425888924543 1781.5172718979993" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 96.97867784984766 55.765870957999994 L 164.88792934730077 55.765870957999994 L 164.88792934730077 103.26361593799999 L 96.97867784984766 103.26361593799999 L 96.97867784984766 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="116.06573462884765" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">user</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 488.71836191016666 55.765870957999994 L 572.7407268109401 55.765870957999994 L 572.7407268109401 103.26361593799999 L 488.71836191016666 103.26361593799999 L 488.71836191016666 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="507.8054186891667" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">libdrm</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 663.8455624913515 55.765870957999994 L 744.825691064 55.765870957999994 L 744.825691064 103.26361593799999 L 663.8455624913515 103.26361593799999 L 663.8455624913515 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="682.9326192703516" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">kernel</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 841.8807482606549 55.765870957999994 L 991.7656772483424 55.765870957999994 L 991.7656772483424 103.26361593799999 L 841.8807482606549 103.26361593799999 L 841.8807482606549 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="860.9678050396549" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Drm core Driver</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1112.0026192106222 55.765870957999994 L 1282.8825585742863 55.765870957999994 L 1282.8825585742863 103.26361593799999 L 1112.0026192106222 103.26361593799999 L 1112.0026192106222 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1131.0896759896223" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_dumb_buffers</text></g></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 152.81373261466666 L 1343.2041213 152.81373261466666 M 8.7958787 158.677651748 L 1343.2041213 158.677651748 M 8.7958787 164.5415708813333 L 1343.2041213 164.5415708813333" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 607.0372500892188 138.447130738 L 744.9627499107813 138.447130738 L 744.9627499107813 178.90817275799998 L 607.0372500892188 178.90817275799998 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="631.6657104492188" y="163.07559109800002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">create dumb</text></g><g><g><rect fill="white" stroke="none" x="151.7502165219076" y="205.29580885799996" width="358.1624149153125" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="154.3889801319076" y="221.12839051799997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drmIoctl(fd, DRM_IOCTL_MODE_CREATE_DUMB,...)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 130.9333035985742 228.16509347799996 L 516.2456641012201 228.16509347799996" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(530.7295443605534,228.16509347799996) translate(-530.7295443605534,-228.16509347799996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 516.0697465272201 220.83519456133328 L 530.7295443605534 228.16509347799996 L 516.0697465272201 235.49499239466664 Z"/></g></g><g><g><rect fill="white" stroke="none" x="577.4618184387369" y="254.55272957799994" width="292.62912023757815" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="580.1005820487369" y="270.38531123799993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ioctl(DRM_IOCTL_MODE_CREATE_DUMB)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 530.7295443605534 277.42201419799994 L 902.3393324951653 277.42201419799994" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(916.8232127544986,277.42201419799994) translate(-916.8232127544986,-277.42201419799994)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 902.1634149211653 270.0921152813333 L 916.8232127544986 277.42201419799994 L 902.1634149211653 284.7519131146666 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 852.5347563617838 319.64223195799997 L 852.5347563617838 319.64223195799997 A 15.832581659999999 15.832581659999999 0 0 1 868.3673380217838 303.80965029799995 L 965.2790874872136 303.80965029799995 L 965.2790874872136 303.80965029799995 A 15.832581659999999 15.832581659999999 0 0 1 981.1116691472135 319.64223195799997 L 981.1116691472135 328.4381106579999 L 981.1116691472135 328.4381106579999 A 15.832581659999999 15.832581659999999 0 0 1 965.2790874872136 344.27069231799993 L 868.3673380217838 344.27069231799993 L 868.3673380217838 344.27069231799993 A 15.832581659999999 15.832581659999999 0 0 1 852.5347563617838 328.4381106579999 L 852.5347563617838 319.64223195799997" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="877.1632167217838" y="328.4381106579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_ioctl( )</text></g><g><g><rect fill="white" stroke="none" x="944.6050533511719" y="370.65832841799994" width="225.05569494460937" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="947.2438169611719" y="386.49091007799996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mode_create_dumb_ioctl()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 916.8232127544986 393.5276130379999 L 1182.958708633121 393.5276130379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1197.4425888924543,393.5276130379999) translate(-1197.4425888924543,-393.5276130379999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1182.7827910591209 386.19771412133326 L 1197.4425888924543 393.5276130379999 L 1182.7827910591209 400.85751195466656 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1070.3016315842121 435.74783079799994 L 1070.3016315842121 435.74783079799994 A 15.832581659999999 15.832581659999999 0 0 1 1086.134213244212 419.9152491379999 L 1308.7509645406965 419.9152491379999 L 1308.7509645406965 419.9152491379999 A 15.832581659999999 15.832581659999999 0 0 1 1324.5835462006964 435.74783079799994 L 1324.5835462006964 462.1354668979999 L 1324.5835462006964 462.1354668979999 A 15.832581659999999 15.832581659999999 0 0 1 1308.7509645406965 477.9680485579999 L 1086.134213244212 477.9680485579999 L 1086.134213244212 477.9680485579999 A 15.832581659999999 15.832581659999999 0 0 1 1070.3016315842121 462.1354668979999 L 1070.3016315842121 435.74783079799994" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1094.930091944212" y="444.5437094979999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mode_create_dumb( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1094.930091944212" y="462.1354668979999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">          </text><text fill="#ff00ff" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1138.3086930184309" y="462.1354668979999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">driver-&gt;dumb_create( )</text></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 518.7222865346666 L 1343.2041213 518.7222865346666 M 8.7958787 524.5862056679999 L 1343.2041213 524.5862056679999 M 8.7958787 530.4501248013332 L 1343.2041213 530.4501248013332" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 612.8461261268164 504.3556846579999 L 739.1538738731837 504.3556846579999 L 739.1538738731837 544.8167266779999 L 612.8461261268164 544.8167266779999 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="637.4745864868164" y="528.9841450179999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">map dumb</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 587.0369444379999 L 8.7958787 587.0369444379999 A 15.832581659999999 15.832581659999999 0 0 1 24.62846036 571.2043627779999 L 237.23814683714843 571.2043627779999 L 237.23814683714843 571.2043627779999 A 15.832581659999999 15.832581659999999 0 0 1 253.07072849714842 587.0369444379999 L 253.07072849714842 631.0163379379999 L 253.07072849714842 631.0163379379999 A 15.832581659999999 15.832581659999999 0 0 1 237.23814683714843 646.8489195979998 L 24.62846036 646.8489195979998 L 24.62846036 646.8489195979998 A 15.832581659999999 15.832581659999999 0 0 1 8.7958787 631.0163379379999 L 8.7958787 587.0369444379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="33.424339059999994" y="595.8328231379999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">分两步完成</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="33.424339059999994" y="613.4245805379999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1.</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="45.55033088128906" y="613.4245805379999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> drmIoctl() --&gt; get offset</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="33.424339059999994" y="631.0163379379999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2.</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="45.55033088128906" y="631.0163379379999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> mmap( ) //映射到用户空间</text></g><g><g><rect fill="white" stroke="none" x="161.52472213714196" y="673.2365556979998" width="338.6134036848438" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="164.16348574714198" y="689.0691373579998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drmIoctl(fd, DRM_IOCTL_MODE_MAP_DUMB,...)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 130.9333035985742 696.1058403179999 L 516.2456641012201 696.1058403179999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(530.7295443605534,696.1058403179999) translate(-530.7295443605534,-696.1058403179999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 516.0697465272201 688.7759414013332 L 530.7295443605534 696.1058403179999 L 516.0697465272201 703.4357392346666 Z"/></g></g><g><g><rect fill="white" stroke="none" x="587.2363240539713" y="722.4934764179999" width="273.0801090071094" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="589.8750876639713" y="738.3260580779998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ioctl(DRM_IOCTL_MODE_MAP_DUMB)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 530.7295443605534 745.3627610379999 L 902.3393324951653 745.3627610379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(916.8232127544986,745.3627610379999) translate(-916.8232127544986,-745.3627610379999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 902.1634149211653 738.0328621213332 L 916.8232127544986 745.3627610379999 L 902.1634149211653 752.6926599546666 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 852.5347563617838 787.5829787979998 L 852.5347563617838 787.5829787979998 A 15.832581659999999 15.832581659999999 0 0 1 868.3673380217838 771.7503971379998 L 965.2790874872136 771.7503971379998 L 965.2790874872136 771.7503971379998 A 15.832581659999999 15.832581659999999 0 0 1 981.1116691472135 787.5829787979998 L 981.1116691472135 796.3788574979999 L 981.1116691472135 796.3788574979999 A 15.832581659999999 15.832581659999999 0 0 1 965.2790874872136 812.2114391579998 L 868.3673380217838 812.2114391579998 L 868.3673380217838 812.2114391579998 A 15.832581659999999 15.832581659999999 0 0 1 852.5347563617838 796.3788574979999 L 852.5347563617838 787.5829787979998" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="877.1632167217838" y="796.3788574979999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_ioctl( )</text></g><g><g><rect fill="white" stroke="none" x="941.3767055728516" y="838.5990752579999" width="231.51239050125" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="944.0154691828516" y="854.4316569179998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mode_mmap_dumb_ioctl( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 916.8232127544986 861.4683598779999 L 1182.958708633121 861.4683598779999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1197.4425888924543,861.4683598779999) translate(-1197.4425888924543,-861.4683598779999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1182.7827910591209 854.1384609613332 L 1197.4425888924543 861.4683598779999 L 1182.7827910591209 868.7982587946666 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1051.1605717087239 947.6679711379999 L 1051.1605717087239 947.6679711379999 A 15.832581659999999 15.832581659999999 0 0 1 1066.9931533687238 931.8353894779999 L 1327.8920244161848 931.8353894779999 L 1327.8920244161848 931.8353894779999 A 15.832581659999999 15.832581659999999 0 0 1 1343.7246060761847 947.6679711379999 L 1343.7246060761847 956.463849838 L 1343.7246060761847 956.463849838 A 15.832581659999999 15.832581659999999 0 0 1 1327.8920244161848 972.296431498 L 1066.9931533687238 972.296431498 L 1066.9931533687238 972.296431498 A 15.832581659999999 15.832581659999999 0 0 1 1051.1605717087239 956.463849838 L 1051.1605717087239 947.6679711379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="#ff00ff" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1075.7890320687238" y="956.463849838" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">dev-&gt;driver-&gt;dumb_map_offset( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1314.758285608763" y="956.463849838" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> </text></g><g><g><rect fill="white" stroke="none" x="385.46098020361325" y="1042.663461098" width="64.34696996902343" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="388.09974381361326" y="1058.496042758" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">mmap( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 130.9333035985742 1065.532745718 L 689.8517465183425 1065.532745718" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(704.3356267776758,1065.532745718) translate(-704.3356267776758,-1065.532745718)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 689.6758289443425 1058.2028468013332 L 704.3356267776758 1065.532745718 L 689.6758289443425 1072.8626446346666 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 609.9755914054688 1107.7529634779999 L 609.9755914054688 1107.7529634779999 A 15.832581659999999 15.832581659999999 0 0 1 625.8081730654687 1091.920381818 L 782.8630804898829 1091.920381818 L 782.8630804898829 1091.920381818 A 15.832581659999999 15.832581659999999 0 0 1 798.6956621498829 1107.7529634779999 L 798.6956621498829 1204.507629178 L 798.6956621498829 1204.507629178 A 15.832581659999999 15.832581659999999 0 0 1 782.8630804898829 1220.3402108379998 L 625.8081730654687 1220.3402108379998 L 625.8081730654687 1220.3402108379998 A 15.832581659999999 15.832581659999999 0 0 1 609.9755914054688 1204.507629178 L 609.9755914054688 1107.7529634779999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="634.6040517654687" y="1116.5488421779996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">mmap_region( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="634.6040517654687" y="1134.1405995779996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">do_mmap( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="634.6040517654687" y="1151.7323569779996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">vm_mmap_pgoff( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="634.6040517654687" y="1169.3241143779996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ksys_mmap_pgoff( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="634.6040517654687" y="1186.9158717779997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">__x64_sys_mmap( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="634.6040517654687" y="1204.5076291779997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">do_syscall_64( )</text></g><g><g><rect fill="white" stroke="none" x="725.1525397010091" y="1246.7278469379999" width="170.85376013015625" height="22.86928462"/></g><text fill="#ff00ff" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="727.7913033110091" y="1262.5604285979998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">file_operations.mmap( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 704.3356267776758 1269.5971315579998 L 902.3393324951653 1269.5971315579998" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(916.8232127544986,1269.5971315579998) translate(-916.8232127544986,-1269.5971315579998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 902.1634149211653 1262.267232641333 L 916.8232127544986 1269.5971315579998 L 902.1634149211653 1276.9270304746665 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 733.3901488178385 1311.8173493179997 L 733.3901488178385 1311.8173493179997 A 15.832581659999999 15.832581659999999 0 0 1 749.2227304778385 1295.9847676579998 L 1084.4236950311588 1295.9847676579998 L 1084.4236950311588 1295.9847676579998 A 15.832581659999999 15.832581659999999 0 0 1 1100.2562766911587 1311.8173493179997 L 1100.2562766911587 1320.6132280179997 L 1100.2562766911587 1320.6132280179997 A 15.832581659999999 15.832581659999999 0 0 1 1084.4236950311588 1336.4458096779997 L 749.2227304778385 1336.4458096779997 L 749.2227304778385 1336.4458096779997 A 15.832581659999999 15.832581659999999 0 0 1 733.3901488178385 1320.6132280179997 L 733.3901488178385 1311.8173493179997" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="758.0186091778385" y="1320.6132280179995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">在</text><text fill="#ff00ff" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="772.6785975811588" y="1320.6132280179995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_driver.fops.mmap</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="929.5576411602603" y="1320.6132280179995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )中设置对应函数实现</text></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 1377.2000476546662 L 1343.2041213 1377.2000476546662 M 8.7958787 1383.0639667879996 L 1343.2041213 1383.0639667879996 M 8.7958787 1388.927885921333 L 1343.2041213 1388.927885921333" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 602.2412524695899 1362.8334457779997 L 749.7587475304102 1362.8334457779997 L 749.7587475304102 1403.2944877979996 L 602.2412524695899 1403.2944877979996 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="626.8697128295898" y="1387.4619061379994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">destroy dumb</text></g><g><g><rect fill="white" stroke="none" x="154.50252059905603" y="1429.6821238979996" width="352.65780676101565" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.14128420905604" y="1445.5147055579996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drmIoctl(fd,DRM_IOCTL_MODE_DESTROY_DUMB)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 130.9333035985742 1452.5514085179996 L 516.2456641012201 1452.5514085179996" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(530.7295443605534,1452.5514085179996) translate(-530.7295443605534,-1452.5514085179996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 516.0697465272201 1445.2215096013329 L 530.7295443605534 1452.5514085179996 L 516.0697465272201 1459.8813074346663 Z"/></g></g><g><g><rect fill="white" stroke="none" x="570.9872090637369" y="1478.9390446179996" width="305.57833898757815" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="573.6259726737369" y="1494.7716262779995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ioctl(DRM_IOCTL_MODE_DESTROY_DUMB)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 530.7295443605534 1501.8083292379995 L 902.3393324951653 1501.8083292379995" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(916.8232127544986,1501.8083292379995) translate(-916.8232127544986,-1501.8083292379995)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 902.1634149211653 1494.4784303213328 L 916.8232127544986 1501.8083292379995 L 902.1634149211653 1509.1382281546662 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 854.7036864154948 1544.0285469979995 L 854.7036864154948 1544.0285469979995 A 15.832581659999999 15.832581659999999 0 0 1 870.5362680754947 1528.1959653379995 L 963.1101574335026 1528.1959653379995 L 963.1101574335026 1528.1959653379995 A 15.832581659999999 15.832581659999999 0 0 1 978.9427390935026 1544.0285469979995 L 978.9427390935026 1552.8244256979995 L 978.9427390935026 1552.8244256979995 A 15.832581659999999 15.832581659999999 0 0 1 963.1101574335026 1568.6570073579994 L 870.5362680754947 1568.6570073579994 L 870.5362680754947 1568.6570073579994 A 15.832581659999999 15.832581659999999 0 0 1 854.7036864154948 1552.8244256979995 L 854.7036864154948 1544.0285469979995" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="879.3321467754947" y="1552.8244256979992" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_ioctl()</text></g><g><g><rect fill="white" stroke="none" x="937.6401256778321" y="1595.0446434579994" width="238.98555029128906" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="940.278889287832" y="1610.8772251179994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mode_destroy_dumb_ioctl( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 916.8232127544986 1617.9139280779993 L 1182.958708633121 1617.9139280779993" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1197.4425888924543,1617.9139280779993) translate(-1197.4425888924543,-1617.9139280779993)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1182.7827910591209 1610.5840291613326 L 1197.4425888924543 1617.9139280779993 L 1182.7827910591209 1625.243826994666 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1074.2135197067707 1660.1341458379993 L 1074.2135197067707 1660.1341458379993 A 15.832581659999999 15.832581659999999 0 0 1 1090.0461013667707 1644.3015641779994 L 1304.839076418138 1644.3015641779994 L 1304.839076418138 1644.3015641779994 A 15.832581659999999 15.832581659999999 0 0 1 1320.6716580781379 1660.1341458379993 L 1320.6716580781379 1704.1135393379993 L 1320.6716580781379 1704.1135393379993 A 15.832581659999999 15.832581659999999 0 0 1 1304.839076418138 1719.9461209979993 L 1090.0461013667707 1719.9461209979993 L 1090.0461013667707 1719.9461209979993 A 15.832581659999999 15.832581659999999 0 0 1 1074.2135197067707 1704.1135393379993 L 1074.2135197067707 1660.1341458379993" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1098.8419800667707" y="1668.930024537999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mode_destroy_dumb( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1098.8419800667707" y="1686.521781937999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1098.8419800667707" y="1704.113539337999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  </text><text fill="#ff00ff" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1107.5177002816145" y="1704.113539337999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">driver-&gt;dumb_destory</text></g></g><g/><g/><g/><g/><g/></g></svg>