<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="743" height="2101"><desc>title%20init_connector%0A%0ADriver%20-%3E%20drm_drv%3A%20%3Ccolor%3A%23ff0066%3Edrm_connector_init%3C%2Fcolor%3E(%20)%0Arbox%20over%20drm_drv%3A1.%20__drm_mode_object_add()%5Cn2.%20%E5%88%9D%E5%A7%8B%E5%8C%96%E9%94%81%E3%80%81%E9%93%BE%E8%A1%A8%20probed_modes%2C%20modes%2C%20%5Cn%5Cn3.%20drm_connector_get_cmdline_mode()%20%20%5Cn%20%20%20%20%20%20%20%20%20%3C%5C-%5C-%20fbmem.c%E4%B8%AD%E5%88%86%E6%9E%90bootloader%20%E4%BC%A0%E9%80%92%E7%9A%84cmdline%EF%BC%8C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E5%B9%B6%E5%AF%B9%E5%A4%96%E6%8F%90%E4%BE%9Bfb_get_options()%E4%BE%9B%E5%A4%96%E7%95%8C%E8%B0%83%E7%94%A8%E3%80%82%5Cn%5Cn4.%20add%20connector%20to%20config-%3Econnector_list%5Cn5.%20drm_object_attach_property()%20%20%5C%2F%5C%2Fattach%E5%90%84%E7%A7%8D%E5%B1%9E%E6%80%A7%0Arbox%20over%20drm_drv%3Aset%20connector-%3Efuncs%5Cn%5Cn%3Ccolor%3A%23ff0066%3Edrm_connector_funcs%3C%2Fcolor%3E%7B%5Cn%20%20%20%20%20%20%20%20%20dpms()%5Cn%20%20%20%20%20%20%20%20%20reset()%5Cn%20%20%20%20%20%20%20%20%20detect()%5Cn%20%20%20%20%20%20%20%20%20force()%5Cn%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20fill_modes()%20%5C%2F%5C%2F%20%3C%5C-%5C-%3Ccolor%3A%23green%3Edrm_mode_getconnector()%3C%2Fcolor%3E%20%3C%5C-%5C-%20%3Ccolor%3A%23green%3Eioctl()%3C%2Fcolor%3E%20%3C%5C-%5C-%3Ccolor%3A%23green%3EdrmModeGetConnector()%3C%2Fcolor%3E%5Cn%20%20%20%20%20%20%20%20%20%5C%2F%5C%2F%20%E5%A6%82%E6%9E%9C%E4%BD%BF%E7%94%A8%3Ccolor%3A%23blue%3Edrm_helper_probe_single_connector_modes%3C%2Fcolor%3E%EF%BC%8C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%E5%88%99%E9%9C%80%E5%AE%9E%E7%8E%B0helper%E9%87%8C%E7%9A%84%3Ccolor%3A%23ff00ff%3Eget_modes%3C%2Fcolor%3E()%2C%E6%B7%BB%E5%8A%A0%E6%89%80%E6%9C%89drm_display_mode%5Cn%5Cn%20%20%20%20%20%20%20%20%20set_property()%5Cn%20%20%20%20%20%20%20%20%20late_register()%5Cn%20%20%20%20%20%20%20%20%20early_register()%5Cn%20%20%20%20%20%20%20%20%20destory()%5Cn%20%20%20%20%20%20%20%20%20atomic_duplicate_state()%5Cn%20%20%20%20%20%20%20%20%20atomic_destroy_state()%5Cn%20%20%20%20%20%20%20%20%20atomic_set_property()%5Cn%20%20%20%20%20%20%20%20%20atomic_get_property()%5Cn%20%20%20%20%20%20%20%20%20atomic_print_state()%5Cn%7D%0ADriver%20-%3Edrm_drv%3A%3Ccolor%3A%23ff0066%3Edrm_connector_helper_add%3C%2Fcolor%3E(%20)%0Arbox%20over%20drm_drv%3Aconnector-%3Ehelper_private%20%3D%20funcs%0Arbox%20over%20drm_drv%3A%3Ccolor%3A%23ff0066%3Edrm_connector_helper_funcs%3C%2Fcolor%3E%7B%5Cn%20%20%20%20%20%20get_modes()%20%20%20%5C%2F%5C%2F%20if%20fill_modes()%E4%BD%BF%E7%94%A8%E4%BA%86drm_helper_probe_single_connector_modes%2C%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%2F%5C%2F%20%E5%88%99%E9%9C%80%E8%A6%81%E8%AE%BE%E5%AE%9A%20get_modes()%5Cn%20%20%20%20%20%20detect_ctx()%5Cn%20%20%20%20%20%20mode_valid()%5Cn%20%20%20%20%20%20mode_valid_ctx()%5Cn%20%20%20%20%20%20best_encoder()%5Cn%20%20%20%20%20%20atomic_best_encoder()%5Cn%20%20%20%20%20%20atomic_check()%5Cn%20%20%20%20%20%20atomic_commit()%5Cn%20%20%20%20%20%20prepare_writeback_job()%5Cn%20%20%20%20%20%20cleanup_writeback_job()%5Cn%7D%0ADriver-%3Edrm_drv%3A%3Ccolor%3A%23ff0066%3Edrm_simple_encoder_init%3C%2Fcolor%3E(%20)%0Arbox%20over%20drm_drv%3Adrm_encoder_init()%5Cn%20%20%20%20%5C-%5C-%3E__drm_encoder_init()%5Cn%20%20%20%20%20%20%20%20%20%20%201.%20drm_mode_object_add()%5Cn%20%20%20%20%20%20%20%20%20%20%202.%20%E5%88%9D%E5%A7%8B%E5%8C%96%E9%93%BE%E8%A1%A8encoder-%3Ebridge_chain%5Cn%20%20%20%20%20%20%20%20%20%20%203.%20%E6%8F%92%E5%85%A5encoder%20%E5%88%B0mode_config.encoder_list%0Arbox%20over%20drm_drv%3A%3Ccolor%3A%23ff0066%3Edrm_encoder_funcs%3C%2Fcolor%3E%7B%5Cn%20%20%20%20%20reset()%5Cn%20%20%20%20%20destory()%5Cn%20%20%20%20%20late_register()%5Cn%20%20%20%20%20early_unregister()%5Cn%7D%0Arbox%20over%20drm_drv%3A%3Ccolor%3A%23ff0066%3Edrm_encoder_helper_funcs%3C%2Fcolor%3E%7B%5Cn%20%20%20%20%20dpms()%5Cn%5Cn%20%20%20%20%20%5C%2F%5C%2F%E5%8F%82%E8%80%83drmModeSetCrtc%E7%9A%84%E6%B5%81%E7%A8%8B%EF%BC%8C%E5%8F%AF%E6%89%BE%E5%88%B0%E4%BB%A5%E4%B8%8Bcallback%E7%9A%84%E8%B0%83%E7%94%A8%5Cn%20%20%20%20%20mode_valid()%5Cn%20%20%20%20%20mode_fixup()%5Cn%20%20%20%20%20prepare()%5Cn%20%20%20%20%20mode_set()%5Cn%20%20%20%20%20commit()%5Cn%5Cn%20%20%20%20%20atomic_mode_set()%5Cn%20%20%20%20%20detect()%5Cn%20%20%20%20%20disable()%5Cn%20%20%20%20%20enable()%5Cn%20%20%20%20%20atomic_check()%5Cn%20%20%20%20%20atomic_disable()%5Cn%20%20%20%20%20atomic_enable()%5Cn%7D%0ADriver-%3Edrm_drv%3A%3Ccolor%3A%23ff0066%3Edrm_connector_attach_encoder%3C%2Fcolor%3E()%0Arbox%20over%20drm_drv%3Aconnector-%3Epossible_encoders%20!%3D%20drm_encoder_mask(encoder)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%5C-%5C-%20%22%3Ccolor%3A%23green%3E1%20%3C%3C%20drm_encoder_index(encoder)%3B%3C%2Fcolor%3E%22%0A%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="743" height="2101"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 48.97455687792578 103.10369087072726 L 48.97455687792578 2101.527331510727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 396.3717505521836 103.10369087072726 L 396.3717505521836 2101.527331510727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.795878699999996 55.60594589072727 L 89.15323505585155 55.60594589072727 L 89.15323505585155 103.10369087072726 L 8.795878699999996 103.10369087072726 L 8.795878699999996 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="27.882935478999997" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Driver</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 348.00407701292966 55.60594589072727 L 444.73942409143746 55.60594589072727 L 444.73942409143746 103.10369087072726 L 348.00407701292966 103.10369087072726 L 348.00407701292966 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="367.0911337919297" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_drv</text></g></g><g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16pt" font-style="normal" font-weight="normal" text-decoration="normal" x="299.08948516845703" y="26.547561167272725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">init_connector</text></g><g><g><rect fill="white" stroke="none" x="145.57481826667575" y="138.28720567072727" width="154.1966708967578" height="22.86928462"/></g><text fill="#ff0066" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="148.21358187667576" y="154.1197873307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_connector_init</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="283.002446012418" y="154.1197873307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 48.97455687792578 161.15649029072728 L 381.88787029285027 161.15649029072728" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(396.3717505521836,161.15649029072728) translate(-396.3717505521836,-161.15649029072728)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 381.7119527188502 153.8265913740606 L 396.3717505521836 161.15649029072728 L 381.7119527188502 168.48638920739396 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 187.4233210149375 203.37670805072727 L 187.4233210149375 203.37670805072727 A 15.832581659999999 15.832581659999999 0 0 1 203.2559026749375 187.54412639072729 L 589.4875984294297 187.54412639072729 L 589.4875984294297 187.54412639072729 A 15.832581659999999 15.832581659999999 0 0 1 605.3201800894296 203.37670805072727 L 605.3201800894296 352.9066459507273 L 605.3201800894296 352.9066459507273 A 15.832581659999999 15.832581659999999 0 0 1 589.4875984294297 368.7392276107273 L 203.2559026749375 368.7392276107273 L 203.2559026749375 368.7392276107273 A 15.832581659999999 15.832581659999999 0 0 1 187.4233210149375 352.9066459507273 L 187.4233210149375 203.37670805072727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="212.0517813749375" y="212.17258675072733" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. __drm_mode_object_add()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="212.0517813749375" y="229.76434415072734" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. 初始化锁、链表 probed_modes, modes, </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="212.0517813749375" y="264.9478589507273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. drm_connector_get_cmdline_mode()  </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="212.0517813749375" y="282.53961635072733" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         &lt;-- fbmem.c中分析bootloader 传递的cmdline，</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="212.0517813749375" y="300.13137375072733" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                并对外提供fb_get_options()供外界调用。</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="212.0517813749375" y="335.31488855072735" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">4. add connector to config-&gt;connector_list</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="212.0517813749375" y="352.90664595072735" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">5. drm_object_attach_property()  //attach各种属性</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 57.77043557792575 410.9594453707273 L 57.77043557792575 410.9594453707273 A 15.832581659999999 15.832581659999999 0 0 1 73.60301723792576 395.12686371072726 L 719.1404838664414 395.12686371072726 L 719.1404838664414 395.12686371072726 A 15.832581659999999 15.832581659999999 0 0 1 734.9730655264414 410.9594453707273 L 734.9730655264414 789.1822294707274 L 734.9730655264414 789.1822294707274 A 15.832581659999999 15.832581659999999 0 0 1 719.1404838664414 805.0148111307274 L 73.60301723792576 805.0148111307274 L 73.60301723792576 805.0148111307274 A 15.832581659999999 15.832581659999999 0 0 1 57.77043557792575 789.1822294707274 L 57.77043557792575 410.9594453707273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="419.75532407072734" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">set connector-&gt;funcs</text><text fill="#ff0066" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="454.93883887072735" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_connector_funcs</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="232.17703314495702" y="454.93883887072735" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">{</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="472.53059627072736" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         dpms()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="490.12235367072736" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         reset()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="507.71411107072737" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         detect()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="525.3058684707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         force()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="542.8976258707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="560.4893832707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         fill_modes() // &lt;--</text><text fill="green" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="246.88705511761327" y="560.4893832707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mode_getconnector()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="432.8713843412461" y="560.4893832707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> &lt;-- </text><text fill="green" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="465.1047370023789" y="560.4893832707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ioctl()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="504.8327338285508" y="560.4893832707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> &lt;--</text><text fill="green" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="532.7282263822617" y="560.4893832707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drmModeGetConnector()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="578.0811406707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         // 如果使用</text><text fill="blue" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="196.94430609417577" y="578.0811406707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_helper_probe_single_connector_modes</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="504.2814642973008" y="578.0811406707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">，</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="595.6728980707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">             则需实现helper里的</text><text fill="#ff00ff" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="271.2749793119492" y="595.6728980707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">get_modes</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="348.5405737943711" y="595.6728980707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(),添加所有drm_display_mode</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="630.8564128707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         set_property()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="648.4481702707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         late_register()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="666.0399276707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         early_register()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="683.6316850707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         destory()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="701.2234424707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         atomic_duplicate_state()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="718.8151998707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         atomic_destroy_state()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="736.4069572707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         atomic_set_property()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="753.9987146707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         atomic_get_property()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="771.5904720707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         atomic_print_state()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="82.39889593792577" y="789.1822294707274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">}</text></g><g><g><rect fill="white" stroke="none" x="117.74732650642186" y="831.4024472307274" width="209.85165441726562" height="22.86928462"/></g><text fill="#ff0066" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="120.38609011642185" y="847.2350288907273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_connector_helper_add</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="310.8299377726719" y="847.2350288907273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 48.97455687792578 854.2717318507274 L 381.88787029285027 854.2717318507274" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(396.3717505521836,854.2717318507274) translate(-396.3717505521836,-854.2717318507274)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 381.7119527188502 846.9418329340607 L 396.3717505521836 854.2717318507274 L 381.7119527188502 861.6016307673941 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 250.31881356864844 896.4919496107274 L 250.31881356864844 896.4919496107274 A 15.832581659999999 15.832581659999999 0 0 1 266.1513952286484 880.6593679507274 L 526.5921058757187 880.6593679507274 L 526.5921058757187 880.6593679507274 A 15.832581659999999 15.832581659999999 0 0 1 542.4246875357187 896.4919496107274 L 542.4246875357187 905.2878283107275 L 542.4246875357187 905.2878283107275 A 15.832581659999999 15.832581659999999 0 0 1 526.5921058757187 921.1204099707275 L 266.1513952286484 921.1204099707275 L 266.1513952286484 921.1204099707275 A 15.832581659999999 15.832581659999999 0 0 1 250.31881356864844 905.2878283107275 L 250.31881356864844 896.4919496107274" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="274.9472739286484" y="905.2878283107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">connector-&gt;helper_private = funcs</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 73.66526437431247 963.3406277307274 L 73.66526437431247 963.3406277307274 A 15.832581659999999 15.832581659999999 0 0 1 89.49784603431247 947.5080460707275 L 703.2456550700547 947.5080460707275 L 703.2456550700547 947.5080460707275 A 15.832581659999999 15.832581659999999 0 0 1 719.0782367300546 963.3406277307274 L 719.0782367300546 1183.2375952307275 L 719.0782367300546 1183.2375952307275 A 15.832581659999999 15.832581659999999 0 0 1 703.2456550700547 1199.0701768907275 L 89.49784603431247 1199.0701768907275 L 89.49784603431247 1199.0701768907275 A 15.832581659999999 15.832581659999999 0 0 1 73.66526437431247 1183.2375952307275 L 73.66526437431247 963.3406277307274" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="#ff0066" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="972.1365064307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_connector_helper_funcs</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="299.1670615263047" y="972.1365064307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">{</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="989.7282638307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      get_modes()   // if fill_modes()使用了drm_helper_probe_single_connector_modes, </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="1007.3200212307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                             // 则需要设定 get_modes()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="1024.9117786307272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      detect_ctx()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="1042.5035360307272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      mode_valid()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="1060.0952934307272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      mode_valid_ctx()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="1077.6870508307272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      best_encoder()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="1095.2788082307272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      atomic_best_encoder()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="1112.8705656307272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      atomic_check()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="1130.4623230307272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      atomic_commit()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="1148.0540804307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      prepare_writeback_job()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="1165.6458378307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      cleanup_writeback_job()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="98.29372473431249" y="1183.2375952307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">}</text></g><g><g><rect fill="white" stroke="none" x="125.96136154060154" y="1225.4578129907275" width="193.42358434890625" height="22.86928462"/></g><text fill="#ff0066" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="128.60012515060154" y="1241.2903946507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_simple_encoder_init</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="302.6159027384922" y="1241.2903946507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 48.97455687792578 1248.3270976107274 L 381.88787029285027 1248.3270976107274" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(396.3717505521836,1248.3270976107274) translate(-396.3717505521836,-1248.3270976107274)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 381.7119527188502 1240.9971986940607 L 396.3717505521836 1248.3270976107274 L 381.7119527188502 1255.656996527394 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 197.40900827079687 1290.5473153707273 L 197.40900827079687 1290.5473153707273 A 15.832581659999999 15.832581659999999 0 0 1 213.24158993079686 1274.7147337107274 L 579.5019111735703 1274.7147337107274 L 579.5019111735703 1274.7147337107274 A 15.832581659999999 15.832581659999999 0 0 1 595.3344928335703 1290.5473153707273 L 595.3344928335703 1369.7102236707274 L 595.3344928335703 1369.7102236707274 A 15.832581659999999 15.832581659999999 0 0 1 579.5019111735703 1385.5428053307273 L 213.24158993079686 1385.5428053307273 L 213.24158993079686 1385.5428053307273 A 15.832581659999999 15.832581659999999 0 0 1 197.40900827079687 1369.7102236707274 L 197.40900827079687 1290.5473153707273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="222.03746863079687" y="1299.3431940707271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_encoder_init()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="222.03746863079687" y="1316.9349514707271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    --&gt;__drm_encoder_init()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="222.03746863079687" y="1334.5267088707271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">           1. drm_mode_object_add()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="222.03746863079687" y="1352.1184662707271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">           2. 初始化链表encoder-&gt;bridge_chain</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="222.03746863079687" y="1369.7102236707271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">           3. 插入encoder 到mode_config.encoder_list</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 300.32956338554294 1427.7630230907273 L 300.32956338554294 1427.7630230907273 A 15.832581659999999 15.832581659999999 0 0 1 316.16214504554296 1411.9304414307273 L 476.58135605882416 1411.9304414307273 L 476.58135605882416 1411.9304414307273 A 15.832581659999999 15.832581659999999 0 0 1 492.4139377188242 1427.7630230907273 L 492.4139377188242 1524.5176887907273 L 492.4139377188242 1524.5176887907273 A 15.832581659999999 15.832581659999999 0 0 1 476.58135605882416 1540.3502704507273 L 316.16214504554296 1540.3502704507273 L 316.16214504554296 1540.3502704507273 A 15.832581659999999 15.832581659999999 0 0 1 300.32956338554294 1524.5176887907273 L 300.32956338554294 1427.7630230907273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="#ff0066" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="324.95802374554296" y="1436.558901790727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_encoder_funcs</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="461.38612433148046" y="1436.558901790727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">{</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="324.95802374554296" y="1454.150659190727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     reset()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="324.95802374554296" y="1471.742416590727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     destory()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="324.95802374554296" y="1489.334173990727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     late_register()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="324.95802374554296" y="1506.925931390727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     early_unregister()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="324.95802374554296" y="1524.517688790727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">}</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 163.72610879569922 1582.5704882107273 L 163.72610879569922 1582.5704882107273 A 15.832581659999999 15.832581659999999 0 0 1 179.5586904556992 1566.7379065507273 L 613.184810648668 1566.7379065507273 L 613.184810648668 1566.7379065507273 A 15.832581659999999 15.832581659999999 0 0 1 629.0173923086679 1582.5704882107273 L 629.0173923086679 1890.4262427107274 L 629.0173923086679 1890.4262427107274 A 15.832581659999999 15.832581659999999 0 0 1 613.184810648668 1906.2588243707273 L 179.5586904556992 1906.2588243707273 L 179.5586904556992 1906.2588243707273 A 15.832581659999999 15.832581659999999 0 0 1 163.72610879569922 1890.4262427107274 L 163.72610879569922 1582.5704882107273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="#ff0066" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1591.366366910727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_encoder_helper_funcs</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="375.87786932659765" y="1591.366366910727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">{</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1608.958124310727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     dpms()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1644.141639110727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     //参考drmModeSetCrtc的流程，可找到以下callback的调用</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1661.733396510727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     mode_valid()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1679.325153910727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     mode_fixup()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1696.916911310727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     prepare()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1714.508668710727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     mode_set()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1732.100426110727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     commit()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1767.283940910727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     atomic_mode_set()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1784.875698310727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     detect()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1802.467455710727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     disable()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1820.0592131107271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     enable()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1837.6509705107271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     atomic_check()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1855.2427279107271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     atomic_disable()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1872.8344853107271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     atomic_enable()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.3545691556992" y="1890.4262427107271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">}</text></g><g><g><rect fill="white" stroke="none" x="105.19542373542576" y="1932.6464604707273" width="234.9554599592578" height="22.86928462"/></g><text fill="#ff0066" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="107.83418734542576" y="1948.4790421307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_connector_attach_encoder</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="327.71970065108985" y="1948.4790421307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 48.97455687792578 1955.5157450907273 L 381.88787029285027 1955.5157450907273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(396.3717505521836,1955.5157450907273) translate(-396.3717505521836,-1955.5157450907273)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 381.7119527188502 1948.1858461740605 L 396.3717505521836 1955.5157450907273 L 381.7119527188502 1962.845644007394 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 100.01474404960544 1997.7359628507272 L 100.01474404960544 1997.7359628507272 A 15.832581659999999 15.832581659999999 0 0 1 115.84732570960544 1981.9033811907273 L 676.8961753947617 1981.9033811907273 L 676.8961753947617 1981.9033811907273 A 15.832581659999999 15.832581659999999 0 0 1 692.7287570547617 1997.7359628507272 L 692.7287570547617 2024.1235989507272 L 692.7287570547617 2024.1235989507272 A 15.832581659999999 15.832581659999999 0 0 1 676.8961753947617 2039.9561806107272 L 115.84732570960544 2039.9561806107272 L 115.84732570960544 2039.9561806107272 A 15.832581659999999 15.832581659999999 0 0 1 100.01474404960544 2024.1235989507272 L 100.01474404960544 1997.7359628507272" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="124.64320440960546" y="2006.531841550727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">connector-&gt;possible_encoders != drm_encoder_mask(encoder)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="124.64320440960546" y="2024.123598950727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                                                           &lt;-- "</text><text fill="green" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="414.85755987835546" y="2024.123598950727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1 &lt;&lt; drm_encoder_index(encoder);</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="661.7151801176133" y="2024.123598950727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">"</text></g></g><g/><g/></g></svg>