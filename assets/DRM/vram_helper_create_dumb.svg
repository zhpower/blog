<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1767" height="1746"><desc>title%20drm_gem_vram_helper%0A%0A%0Aparticipant%20driver%0A%0A%0Aparticipant%20vram_helper%0Aparticipant%20drm_gem%0Aparticipant%20vma_mamager%0Aparticipant%20drm_mm%0A%0A%0Anote%20over%20vram_helper%3A%23define%20DRM_GEM_VRAM_DRIVER%5Cn%09.debugfs_init%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20drm_vram_mm_debugfs_init%2C%20%5Cn%09.dumb_create%09%20%20%09%20%20%20%20%20%20%20%20%3D%20drm_gem_vram_driver_dumb_create%2C%20%5Cn%09.dumb_map_offset%09%20%20%20%3D%20drm_gem_ttm_dumb_map_offset%2C%5Cn%09.gem_prime_mmap%09%09%20%3D%20drm_gem_prime_mmap%0A%3D%3Dcreate%20dumb%3D%3D%0Adriver%20-%3E%20vram_helper%3Adrm_gem_vram_driver_dumb_create(%20)%5Cn%20%20%20%20%20%20%20%20%20%5C-%5C-%3Edrm_gem_vram_fill_create_dumb(%20)%0Arbox%20right%20of%20vram_helper%3A%3Cbackground%3A%23yellow%3E1.%20drm_gem_vram_create%3C%2Fbackground%3E(%20)%20%20%5C-%5C-%3E%20%3Ccolor%3A%23red%3Edrm_gem_vram_object%3C%2Fcolor%3E%5Cn%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a.%20%5C%2F%5C%2F%E5%88%86%E9%85%8Dgem_object%E5%86%85%E5%AD%98%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(%20driver-%3Egem_create_object%20%EF%BC%81%3D%20NULL)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vram_obj%20%3D%20driver-%3Egem_create_object(%20)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20or%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20vram_obj%20%3D%20kzalloc(%20)%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20b.%20%5C%2F%5C%2F%E8%AE%BE%E7%BD%AEfuncs%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20obj-%3Efuncs%20%3D%20%26%3Ccolor%3A%23blue%3Edrm_gem_vram_object_funcs%3C%2Fcolor%3E%0A%0Anote%20left%20of%20vram_helper%3A%3Ccolor%3A%23blue%3Edrm_gem_vram_object_funcs%3C%2Fcolor%3E%20%3D%20%7B%5Cn%09.free%09%20%20%20%20%20%20%20%20%20%20%3D%20drm_gem_vram_object_free%2C%5Cn%09.pin%09%20%20%20%20%20%20%20%20%20%20%20%3D%20drm_gem_vram_object_pin%2C%5Cn%09.unpin%20%20%20%20%20%20%20%20%3D%20drm_gem_vram_object_unpin%2C%5Cn%09.vmap%09%20%20%20%20%20%20%20%3D%20drm_gem_vram_object_vmap%2C%5Cn%09.vunmap%20%20%20%20%3D%20drm_gem_vram_object_vunmap%2C%5Cn%09.mmap%20%20%20%20%20%20%20%3D%20drm_gem_ttm_mmap%2C%5Cn%09.print_info%20%20%3D%20drm_gem_ttm_print_info%2C%5Cn%7D%3B%0Avram_helper%20-%3E%20drm_gem%3Ac.%20%5C%2F%5C%2F%E5%88%9D%E5%A7%8B%E5%8C%96%20gem_obj%5Cn%20%20%20drm_gem_object_init(%20)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0Arbox%20right%20of%20drm_gem%3A1.%20drm_gem_private_object_init(%20)%5Cn%5Cn%20%20%20%20%20%20a.kref_init()%5Cn%5Cn%20%20%20%20%20%20b.dma_rest_init()%5Cn%20%20%20%20%20%20%20%20%5C%2F%5C%2F%20%3Ccolor%3A%23red%3Estruct%20dma_resv%3C%2Fcolor%3E%2C%E7%94%A8%E5%AE%83%E6%9D%A5%E7%AE%A1%E7%90%86%E4%B8%80%E7%BB%84dma-fences%5Cn%5Cn%20%20%20%20%20%20c.%20drm_vma_node_reset()%5Cn%20%20%20%20%20%20%20%20%5C%2F%5C%2F%20%3Ccolor%3A%23red%3Estruct%20drm_vma_offset_node%2C%20%3C%2Fcolor%3E%5Cn%20%20%20%20%20%20%20%20%5C%2F%5C%2F%20Mapping%20info%20for%20this%20object%20to%20support%20mmap%5Cn%5Cn2.%20shmem_file_setup(%20)%5Cn%20%20%20%5C%2F%5C%2F%E7%94%A8%E4%BA%8E%E5%88%9B%E5%BB%BA%E5%8C%BF%E5%90%8D%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%5Cn%0Avram_helper-%3Edrm_gem%3Ad.%20ttm_bo_init(%20)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%0A%0Adrm_gem%20-%3E%20vma_mamager%3Adrm_vms_offset_add(%20)%0Avma_mamager-%3Edrm_mm%3Adrm_mm_insert_node_generic()%20%5Cndrm_mm_insert_node_in_range(%20)%0A%0A%0A%0A%0A%0A%0A%0Avram_helper-%3Edrm_gem%3A%3Cbackground%3A%23yellow%3E2.%20drm_gem_handle_create%3C%2Fbackground%3E(%20)%5Cn%20%20%20%20%20%20%20%5C-%5C-%3Edrm_gem_handle_create_tail(%20)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0Arbox%20right%20of%20drm_gem%3A1.%20idr_alloc()%20%5C%2F%5C%2F%E5%88%86%E9%85%8D%E4%B8%80%E4%B8%AA%E6%AD%A3%E5%BC%8FID%5Cn%5Cn2.%20drm_vma_node_allow(%20)%20%5Cn%20%20%20%20%5C%2F%5C%2F%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AAdrm_file%E5%88%B0%E8%AF%A5gem_obj%E7%9A%84%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%5Cn%20%20%20%20%5C%2F%5C%2Fdrm_file%E5%AF%B9%E5%BA%94%E5%88%B0%E4%B8%80%E4%B8%AAApp%20%E6%89%93%E5%BC%80%E7%9A%84drm%5Cn%5Cn3.%20if%20no%20NULL%5Cn%20%20%20%20%20%20gem_obj-%3Efuncs-%3E%3Ccolor%3A%23red%3Eopen%3C%2Fcolor%3E(%20)%0Avram_helper-%3Edrm_gem%3A%3Cbackground%3A%23yellow%3E3.%20drm_gem_object_put%3C%2Fbackground%3E(%20)%5Cn%20%20%20%20%20%5C-%5C-%3E%20__drm_gem_object_put()%5Cn%20%20%20%20%20%20%20%20%20%20%5C-%5C-%3Ekref_put(%26obj-%3Erefcount%2C%20drm_gem_object_free)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1767" height="1746"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 48.07978148730078 103.10369087072726 L 48.07978148730078 1746.173832030727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 438.0781025516367 103.10369087072726 L 438.0781025516367 1746.173832030727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 985.6333307403737 103.10369087072726 L 985.6333307403737 1746.173832030727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1429.1032399394753 103.10369087072726 L 1429.1032399394753 1746.173832030727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1708.1263178596575 103.10369087072726 L 1708.1263178596575 1746.173832030727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.795878699999996 55.60594589072727 L 87.36368427460155 55.60594589072727 L 87.36368427460155 103.10369087072726 L 8.795878699999996 103.10369087072726 L 8.795878699999996 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="27.882935478999997" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">driver</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 375.87723046501947 55.60594589072727 L 500.2789746382538 55.60594589072727 L 500.2789746382538 103.10369087072726 L 375.87723046501947 103.10369087072726 L 375.87723046501947 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="394.9642872440195" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">vram_helper</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 933.2033784535612 55.60594589072727 L 1038.0632830271861 55.60594589072727 L 1038.0632830271861 103.10369087072726 L 933.2033784535612 103.10369087072726 L 933.2033784535612 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="952.2904352325612" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_gem</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1358.477158807448 55.60594589072727 L 1499.7293210715027 55.60594589072727 L 1499.7293210715027 103.10369087072726 L 1358.477158807448 103.10369087072726 L 1358.477158807448 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1377.564215586448" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">vma_mamager</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1657.6756059903255 55.60594589072727 L 1758.5770297289896 55.60594589072727 L 1758.5770297289896 103.10369087072726 L 1657.6756059903255 103.10369087072726 L 1657.6756059903255 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1676.7626627693255" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mm</text></g></g><g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16pt" font-style="normal" font-weight="normal" text-decoration="normal" x="767.4765396118164" y="26.547561167272725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_gem_vram_helper</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 200.08530045579684 138.28720567072727 L 660.2383229874765 138.28720567072727 L 676.0709046474765 154.11978733072726 L 676.0709046474765 249.11527729072728 L 200.08530045579684 249.11527729072728 L 200.08530045579684 138.28720567072727 M 660.2383229874765 138.28720567072727 L 660.2383229874765 154.11978733072726 L 676.0709046474765 154.11978733072726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="224.71376081579683" y="162.9156660307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">#define DRM_GEM_VRAM_DRIVER</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="224.71376081579683" y="180.5074234307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> .debugfs_init             = drm_vram_mm_debugfs_init, </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="224.71376081579683" y="198.0991808307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> .dumb_create            = drm_gem_vram_driver_dumb_create, </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="224.71376081579683" y="215.6909382307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> .dumb_map_offset    = drm_gem_ttm_dumb_map_offset,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="224.71376081579683" y="233.28269563072732" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> .gem_prime_mmap   = drm_gem_prime_mmap</text></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 289.8695152673939 L 1758.2041213 289.8695152673939 M 8.7958787 295.7334344007273 L 1758.2041213 295.7334344007273 M 8.7958787 301.59735353406063 L 1758.2041213 301.59735353406063" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 814.5372500892188 275.5029133907273 L 952.4627499107813 275.5029133907273 L 952.4627499107813 315.9639554107273 L 814.5372500892188 315.9639554107273 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="839.1657104492188" y="300.1313737507273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">create dumb</text></g><g><g><rect fill="white" stroke="none" x="87.46595050419528" y="342.3515915107273" width="272.2353519270313" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="87.46595050419528" y="359.9433489107273" width="311.2259830305469" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="90.10471411419527" y="358.1841731707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_gem_vram_driver_dumb_create( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="90.10471411419527" y="375.7759305707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">         --&gt;drm_gem_vram_fill_create_dumb( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 48.07978148730078 382.8126335307273 L 423.59422229230336 382.8126335307273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(438.0781025516367,382.8126335307273) translate(-438.0781025516367,-382.8126335307273)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 423.4183047183033 375.48273461406063 L 438.0781025516367 382.8126335307273 L 423.4183047183033 390.14253244739393 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 438.0781025516367 508.59369894072734 L 446.8739812516367 508.59369894072734 M 446.8739812516367 425.0328512907273 L 446.8739812516367 425.0328512907273 A 15.832581659999999 15.832581659999999 0 0 1 462.7065629116367 409.2002696307273 L 913.7126422110507 409.2002696307273 L 913.7126422110507 409.2002696307273 A 15.832581659999999 15.832581659999999 0 0 1 929.5452238710507 425.0328512907273 L 929.5452238710507 592.1545465907274 L 929.5452238710507 592.1545465907274 A 15.832581659999999 15.832581659999999 0 0 1 913.7126422110507 607.9871282507273 L 462.7065629116367 607.9871282507273 L 462.7065629116367 607.9871282507273 A 15.832581659999999 15.832581659999999 0 0 1 446.8739812516367 592.1545465907274 L 446.8739812516367 425.0328512907273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><g><rect fill="yellow" stroke="none" x="471.50244161163664" y="420.81082951472735" width="174.24485778808594" height="17.767674974"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="471.50244161163664" y="433.82872999072737" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. drm_gem_vram_create</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="645.7472993997226" y="433.82872999072737" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )  --&gt; </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="696.4487917092929" y="433.82872999072737" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_gem_vram_object</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="471.50244161163664" y="451.4204873907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="471.50244161163664" y="469.0122447907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                 a. //分配gem_object内存</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="471.50244161163664" y="486.6040021907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                   if( driver-&gt;gem_create_object ！= NULL)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="471.50244161163664" y="504.1957595907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                      vram_obj = driver-&gt;gem_create_object( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="471.50244161163664" y="521.7875169907273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                   or </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="471.50244161163664" y="539.3792743907273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                      vram_obj = kzalloc( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="471.50244161163664" y="574.5627891907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                 b. //设置funcs</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="471.50244161163664" y="592.1545465907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                            obj-&gt;funcs = &amp;</text><text fill="blue" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="702.3683931497226" y="592.1545465907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_gem_vram_object_funcs</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 438.0781025516367 724.9723149607274 L 429.2822238516367 724.9723149607274 M 56.87566018730075 634.3747643507274 L 413.44964219163666 634.3747643507274 L 429.2822238516367 650.2073460107274 L 429.2822238516367 815.5698655707274 L 56.87566018730075 815.5698655707274 L 56.87566018730075 634.3747643507274 M 413.44964219163666 634.3747643507274 L 413.44964219163666 650.2073460107274 L 429.2822238516367 650.2073460107274" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="blue" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.50412054730074" y="659.0032247107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_gem_vram_object_funcs</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="284.0524909086289" y="659.0032247107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> = {</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.50412054730074" y="676.5949821107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> .free           = drm_gem_vram_object_free,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.50412054730074" y="694.1867395107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> .pin            = drm_gem_vram_object_pin,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.50412054730074" y="711.7784969107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> .unpin        = drm_gem_vram_object_unpin,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.50412054730074" y="729.3702543107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> .vmap        = drm_gem_vram_object_vmap,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.50412054730074" y="746.9620117107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> .vunmap    = drm_gem_vram_object_vunmap,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.50412054730074" y="764.5537691107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> .mmap       = drm_gem_ttm_mmap,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.50412054730074" y="782.1455265107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> .print_info  = drm_gem_ttm_print_info,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="81.50412054730074" y="799.7372839107275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">};</text></g><g><g><rect fill="white" stroke="none" x="553.3115422694037" y="841.9575016707273" width="141.941833860625" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="553.3115422694037" y="859.5492590707273" width="317.08834875320315" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="555.9503058794037" y="857.7900833307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">c. //初始化 gem_obj</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="555.9503058794037" y="875.3818407307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   drm_gem_object_init( )                                </text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 438.0781025516367 882.4185436907273 L 971.1494504810404 882.4185436907273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(985.6333307403737,882.4185436907273) translate(-985.6333307403737,-882.4185436907273)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 970.9735329070404 875.0886447740606 L 985.6333307403737 882.4185436907273 L 970.9735329070404 889.748442607394 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 985.6333307403737 1043.3831239007272 L 994.4292094403737 1043.3831239007272 M 994.4292094403737 924.6387614507273 L 994.4292094403737 924.6387614507273 A 15.832581659999999 15.832581659999999 0 0 1 1010.2617911003737 908.8061797907274 L 1404.4747795794754 908.8061797907274 L 1404.4747795794754 908.8061797907274 A 15.832581659999999 15.832581659999999 0 0 1 1420.3073612394753 924.6387614507273 L 1420.3073612394753 1162.1274863507274 L 1420.3073612394753 1162.1274863507274 A 15.832581659999999 15.832581659999999 0 0 1 1404.4747795794754 1177.9600680107274 L 1010.2617911003737 1177.9600680107274 L 1010.2617911003737 1177.9600680107274 A 15.832581659999999 15.832581659999999 0 0 1 994.4292094403737 1162.1274863507274 L 994.4292094403737 924.6387614507273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="933.4346401507272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. drm_gem_private_object_init( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="968.6181549507272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      a.kref_init()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1003.8016697507272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      b.dma_rest_init()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1021.3934271507272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">        // </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1070.6252662359207" y="1021.3934271507272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">struct dma_resv</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1180.632422607991" y="1021.3934271507272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">,用它来管理一组dma-fences</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1056.5769419507271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      c. drm_vma_node_reset()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1074.1686993507271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">        // </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1070.6252662359207" y="1074.1686993507271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">struct drm_vma_offset_node, </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1091.7604567507271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">        // Mapping info for this object to support mmap</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1126.9439715507272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. shmem_file_setup( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1144.5357289507272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   //用于创建匿名共享内存</text></g><g><g><rect fill="white" stroke="none" x="560.874217745478" y="1204.3477041107274" width="301.9629978010547" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="563.5129813554779" y="1220.1802857707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">d. ttm_bo_init( )                                           </text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 438.0781025516367 1227.2169887307273 L 971.1494504810404 1227.2169887307273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(985.6333307403737,1227.2169887307273) translate(-985.6333307403737,-1227.2169887307273)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 970.9735329070404 1219.8870898140606 L 985.6333307403737 1227.2169887307273 L 970.9735329070404 1234.546887647394 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1126.0466069960378" y="1253.6046248307273" width="162.64335668777343" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1128.6853706060378" y="1269.4372064907272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_vms_offset_add( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 985.6333307403737 1276.4739094507272 L 1414.619359680142 1276.4739094507272" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1429.1032399394753,1276.4739094507272) translate(-1429.1032399394753,-1276.4739094507272)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1414.443442106142 1269.1440105340605 L 1429.1032399394753 1276.4739094507272 L 1414.443442106142 1283.803808367394 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1449.9201528628084" y="1302.8615455507272" width="229.3506015608203" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="1449.9201528628084" y="1320.4533029507272" width="237.38925207351562" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1452.5589164728085" y="1318.6941272107272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mm_insert_node_generic() </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1452.5589164728085" y="1336.2858846107272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mm_insert_node_in_range( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1429.1032399394753 1343.3225875707271 L 1693.6424376003242 1343.3225875707271" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1708.1263178596575,1343.3225875707271) translate(-1708.1263178596575,-1343.3225875707271)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1693.4665200263241 1335.9926886540604 L 1708.1263178596575 1343.3225875707271 L 1693.4665200263241 1350.6524864873938 Z"/></g></g><g><g><rect fill="white" stroke="none" x="458.8950154749701" y="1369.7102236707271" width="206.279724485625" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="458.8950154749701" y="1387.3019810707272" width="505.92140234207034" height="22.86928462"/></g><g><rect fill="yellow" stroke="none" x="461.5337790849701" y="1372.524904854727" width="186.87191772460938" height="17.767674974"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="461.5337790849701" y="1385.542805330727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. drm_gem_handle_create</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="648.4056968095795" y="1385.542805330727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="461.5337790849701" y="1403.134562730727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">       --&gt;drm_gem_handle_create_tail( )                                                      </text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 438.0781025516367 1410.171265690727 L 971.1494504810404 1410.171265690727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(985.6333307403737,1410.171265690727) translate(-985.6333307403737,-1410.171265690727)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 970.9735329070404 1402.8413667740604 L 985.6333307403737 1410.171265690727 L 970.9735329070404 1417.5011646073938 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 985.6333307403737 1518.360573700727 L 994.4292094403737 1518.360573700727 M 994.4292094403737 1452.391483450727 L 994.4292094403737 1452.391483450727 A 15.832581659999999 15.832581659999999 0 0 1 1010.2617911003737 1436.558901790727 L 1336.0496849749832 1436.558901790727 L 1336.0496849749832 1436.558901790727 A 15.832581659999999 15.832581659999999 0 0 1 1351.8822666349831 1452.391483450727 L 1351.8822666349831 1584.329663950727 L 1351.8822666349831 1584.329663950727 A 15.832581659999999 15.832581659999999 0 0 1 1336.0496849749832 1600.162245610727 L 1010.2617911003737 1600.162245610727 L 1010.2617911003737 1600.162245610727 A 15.832581659999999 15.832581659999999 0 0 1 994.4292094403737 1584.329663950727 L 994.4292094403737 1452.391483450727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1461.1873621507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. idr_alloc() //分配一个正式ID</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1496.3708769507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. drm_vma_node_allow( ) </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1513.9626343507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    //添加一个drm_file到该gem_obj的用户列表</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1531.5543917507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    //drm_file对应到一个App 打开的drm</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1566.7379065507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. if no NULL</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1019.0576698003738" y="1584.3296639507269" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      gem_obj-&gt;funcs-&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1177.4041206060378" y="1584.3296639507269" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">open</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1213.4384833990066" y="1584.3296639507269" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )</text></g><g><g><rect fill="white" stroke="none" x="459.89347433727477" y="1626.549881710727" width="183.28758276199218" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="459.89347433727477" y="1644.141639110727" width="225.21311987136718" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="459.89347433727477" y="1661.733396510727" width="503.92448461746096" height="22.86928462"/></g><g><rect fill="yellow" stroke="none" x="462.5322379472748" y="1629.364562894727" width="163.87977600097656" height="17.767674974"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="462.5322379472748" y="1642.382463370727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. drm_gem_object_put</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="626.4120139482513" y="1642.382463370727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="462.5322379472748" y="1659.974220770727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     --&gt; __drm_gem_object_put()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="462.5322379472748" y="1677.565978170727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">          --&gt;kref_put(&amp;obj-&gt;refcount, drm_gem_object_free);                     </text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 438.0781025516367 1684.602681130727 L 971.1494504810404 1684.602681130727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(985.6333307403737,1684.602681130727) translate(-985.6333307403737,-1684.602681130727)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 970.9735329070404 1677.2727822140603 L 985.6333307403737 1684.602681130727 L 970.9735329070404 1691.9325800473937 Z"/></g></g></g><g/><g/><g/><g/><g/></g></g></g></g></svg>