<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1463" height="1014"><desc>title%20drmModeSetCrtc%0A%0Auser%20-%3E%20libdrm%3AdrmModeSetCrtc%5Cn(%20%20fd%2C%20crtcId%2C%20framebufferId%2C%20x%2C%20y%2C%5Cn%20%20%3Ccolor%3A%23ff0088%3E%20*connectors%2C%20count_connector%3C%2Fcolor%3E%2C%20mode%20)%0Alibdrm%20-%3E%20Driver%3A%20ioctl(DRM_IOCTL_MODE_SETCRTC)%0Arbox%20over%20Driver%3Adrm_ioctl(%20)%0ADriver%20-%3Edrm_crtc%3Adrm_mode_setcrtc(%20)%5Cn%20%20%5C%2F%5C%2Fbuild%20and%20set%20a%20new%20CRTC%20configuration%0Arbox%20over%20drm_crtc%3A%5Cn1.get%20framebuffer%2C%20crtc%2C%20connectors%20object%20by%20Id%5Cn%20%20%E6%9E%84%E5%BB%BAset_config%E9%9C%80%E8%A6%81%E7%9A%84%E5%8F%82%E6%95%B0%5Cn%5Cn2.crtc%5C-%3Efuncs%5C-%3E%3Ccolor%3A%23ff0066%3Eset_config(%20)%3C%2Fcolor%3E%5Cn%20%20%20%20a.%E5%A6%82%E6%9E%9C%E6%98%AFatomic%EF%BC%8C%20%E7%9B%B4%E6%8E%A5%E8%B0%83%E7%94%A8set_config()%5Cn%20%20%20%20b.%E5%A6%82%E6%9E%9C%E6%98%AF%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F%EF%BC%8C%E8%B0%83%E7%94%A8__drm_mode_set_config_internal()%2C%E5%9C%A8%E5%85%B6%E9%87%8C%E9%9D%A2%E5%9C%A8%E8%B0%83%E7%94%A8set_config()%5Cn%0Anote%20over%20drm_crtc%3Adrm_crtc_helper_set_config(%20)%20%20%20%5C%2F%5C%2F%20%3Ccolor%3A%23green%3E%E7%B3%BB%E7%BB%9F%E6%8F%90%E4%BE%9B%E7%9A%84set_config(%20)%E5%AE%9E%E7%8E%B0%3C%2Fcolor%3E%5Cn%5Cn%20%201.%20connector_helper_funcs.%3Ccolor%3A%23ff0066%3Ebest_encoder%3C%2Fcolor%3E(%20)%20%20%5C-%5C-%3E%20encoder%20%5C%2F%5C%2F%E6%8B%BF%E5%88%B0encoder%5Cn%5Cn%20%202.%20drm_crtc_helper_set_mode(%20)%5Cn%20%20%20%20%20a.%20encoder_helper_funcs-%3E%3Ccolor%3A%23red%3Emode_fixup%3C%2Fcolor%3E(%20)%20%5C%2F%5C%2F%E8%B0%83%E6%95%B4%E8%AF%B7%E6%B1%82%E7%9A%84mode%20%5C-%5C-%3Eadjusted%20mode%5Cn%20%20%20%20%20b.%20%20%20%20%20%20%20%20crtc_helper_funcs-%3E%3Ccolor%3A%23red%3Emode_fixup%3C%2Fcolor%3E(%20)%20%5C%2F%5C%2F%E5%A6%82%E6%9E%9CCRTC%E6%97%A0%E6%B3%95%E6%94%AF%E6%8C%81%E4%BB%8Emode%E5%88%B0adjusted_mode%E7%9A%84%E8%BD%AC%E6%8D%A2%EF%BC%8C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E5%88%99%E5%BA%94%E8%AF%A5%E6%8B%92%E7%BB%9D%E6%A8%A1%E5%BC%8F%E8%AE%BE%E7%BD%AE%5Cn%20%5Cn%20%20%20%20%20c.%20encoder_helper_funcs-%3E%3Ccolor%3A%23red%3Eprepare%3C%2Fcolor%3E(%20)%20%20%20%20%20%5C%2F%5C%2F%E4%B8%80%E8%88%AC%E4%B8%BAdisable%20encoder%5Cn%20%20%20%20%20d.%20%20%20%20%20%20%20%20crtc_helper_funcs-%3E%3Ccolor%3A%23red%3Eprepare%3C%2Fcolor%3E(%20)%20%20%20%20%20%5C%2F%5C%2F%E4%B8%80%E8%88%AC%E4%B8%BAdisable%20crtc%2C%E4%B8%BA%E5%90%8E%E7%BB%A7%E7%9A%84%E6%A8%A1%E5%BC%8F%E8%AE%BE%E7%BD%AE%E5%87%86%E5%A4%87CRTC%5Cn%5Cn%20%20%20%20%20e.%20%20%20%20%20%20%20%20crtc_helper_funcs-%3E%3Ccolor%3A%23red%3Emode_set%3C%2Fcolor%3E(%20)%20%5C%2F%5C%2F%E7%94%A8%E4%BA%8E%E8%AE%BE%E7%BD%AE%E6%96%B0%E7%9A%84%E6%A8%A1%E5%BC%8F%E3%80%81%E4%BD%8D%E7%BD%AE%E5%92%8C%E5%B8%A7%E7%BC%93%E5%86%B2%E5%8C%BA%EF%BC%8C%E7%94%B1%E4%BC%A0%E7%BB%9F%E7%9A%84CRTC%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8%5Cn%20%20%20%20%20f.%20encoder_helper_funcs-%3E%3Ccolor%3A%23red%3Emode_set%3C%2Fcolor%3E(%20)%20%20%5C%2F%5C%2F%E7%94%A8%E4%BA%8E%E6%9B%B4%E6%96%B0%E7%BC%96%E7%A0%81%E5%99%A8%E7%9A%84%E6%98%BE%E7%A4%BA%E6%A8%A1%E5%BC%8F%5Cn%5Cn%20%20%20%20%20g.%20%20%20%20%20%20%20%20crtc_helper_funcs-%3E%3Ccolor%3A%23red%3Ecommit%3C%2Fcolor%3E(%20)%20%20%5C%2F%5C%2F%E4%B8%80%E8%88%AC%E4%B8%BAenable%20crtc%5Cn%20%20%20%20%20h.%20encoder_helper_funcs-%3E%3Ccolor%3A%23red%3Ecommit%3C%2Fcolor%3E(%20)%20%20%5C%2F%5C%2F%E4%B8%80%E8%88%AC%E4%B8%BAenable%20encoder%5Cn%5Cn%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1463" height="1014"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 42.75050444872656 103.10369087072726 L 42.75050444872656 1014.3567241907274" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 369.275337129651 103.10369087072726 L 369.275337129651 1014.3567241907274" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 658.8925617783489 103.10369087072726 L 658.8925617783489 1014.3567241907274" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1061.1142717489934 103.10369087072726 L 1061.1142717489934 1014.3567241907274" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.795878699999996 55.60594589072727 L 76.70513019745312 55.60594589072727 L 76.70513019745312 103.10369087072726 L 8.795878699999996 103.10369087072726 L 8.795878699999996 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="27.882935478999997" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">user</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 327.26415467926427 55.60594589072727 L 411.2865195800377 55.60594589072727 L 411.2865195800377 103.10369087072726 L 327.26415467926427 103.10369087072726 L 327.26415467926427 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="346.3512114582643" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">libdrm</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 618.7138836004231 55.60594589072727 L 699.0712399562747 55.60594589072727 L 699.0712399562747 103.10369087072726 L 618.7138836004231 103.10369087072726 L 618.7138836004231 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="637.8009403794231" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Driver</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1011.3937005656965 55.60594589072727 L 1110.8348429322903 55.60594589072727 L 1110.8348429322903 103.10369087072726 L 1011.3937005656965 103.10369087072726 L 1011.3937005656965 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1030.4807573446965" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_crtc</text></g></g><g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16pt" font-style="normal" font-weight="normal" text-decoration="normal" x="643.6700286865234" y="26.547561167272725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drmModeSetCrtc</text></g><g><g><rect fill="white" stroke="none" x="63.567417372059865" y="138.28720567072725" width="126.00770605300781" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="63.567417372059865" y="155.87896307072725" width="219.40780676101562" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="63.567417372059865" y="173.47072047072726" width="284.89100683425784" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="66.20618098205986" y="154.11978733072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drmModeSetCrtc</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="66.20618098205986" y="171.71154473072727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(  fd, crtcId, framebufferId, x, y,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="66.20618098205986" y="189.30330213072727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  </text><text fill="#ff0088" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="74.88190119690361" y="189.30330213072727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> *connectors, count_connector</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="287.96710627502864" y="189.30330213072727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">, mode )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 42.75050444872656 196.34000509072726 L 354.7914568703177 196.34000509072726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(369.275337129651,196.34000509072726) translate(-369.275337129651,-196.34000509072726)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 354.61553929631765 189.01010617406058 L 369.275337129651 196.34000509072726 L 354.61553929631765 203.66990400739394 Z"/></g></g><g><g><rect fill="white" stroke="none" x="390.0922500529843" y="222.72764119072727" width="247.98339880203125" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="392.7310136629843" y="238.56022285072729" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ioctl(DRM_IOCTL_MODE_SETCRTC)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 369.275337129651 245.59692581072727 L 644.4086815190155 245.59692581072727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(658.8925617783489,245.59692581072727) translate(-658.8925617783489,-245.59692581072727)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 644.2327639450156 238.2670268940606 L 658.8925617783489 245.59692581072727 L 644.2327639450156 252.92682472739395 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 594.604105385634 287.8171435707273 L 594.604105385634 287.8171435707273 A 15.832581659999999 15.832581659999999 0 0 1 610.436687045634 271.9845619107273 L 707.3484365110638 271.9845619107273 L 707.3484365110638 271.9845619107273 A 15.832581659999999 15.832581659999999 0 0 1 723.1810181710638 287.8171435707273 L 723.1810181710638 296.61302227072724 L 723.1810181710638 296.61302227072724 A 15.832581659999999 15.832581659999999 0 0 1 707.3484365110638 312.44560393072726 L 610.436687045634 312.44560393072726 L 610.436687045634 312.44560393072726 A 15.832581659999999 15.832581659999999 0 0 1 594.604105385634 296.61302227072724 L 594.604105385634 287.8171435707273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="619.232565745634" y="296.61302227072724" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_ioctl( )</text></g><g><g><rect fill="white" stroke="none" x="708.4133439495696" y="338.83324003072727" width="148.3556064436328" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="708.4133439495696" y="356.4249974307273" width="303.18014562820315" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="711.0521075595695" y="354.6658216907273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_mode_setcrtc( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="711.0521075595695" y="372.2575790907273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  //build and set a new CRTC configuration</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 658.8925617783489 379.29428205072725 L 1046.63039148966 379.29428205072725" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1061.1142717489934,379.29428205072725) translate(-1061.1142717489934,-379.29428205072725)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1046.45447391566 371.9643831340606 L 1061.1142717489934 379.29428205072725 L 1046.45447391566 386.6241809673939 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 736.2495900755168 421.51449981072733 L 736.2495900755168 421.51449981072733 A 15.832581659999999 15.832581659999999 0 0 1 752.0821717355168 405.6819181507273 L 1370.1463717624702 405.6819181507273 L 1370.1463717624702 405.6819181507273 A 15.832581659999999 15.832581659999999 0 0 1 1385.97895342247 421.51449981072733 L 1385.97895342247 553.4526803107274 L 1385.97895342247 553.4526803107274 A 15.832581659999999 15.832581659999999 0 0 1 1370.1463717624702 569.2852619707273 L 752.0821717355168 569.2852619707273 L 752.0821717355168 569.2852619707273 A 15.832581659999999 15.832581659999999 0 0 1 736.2495900755168 553.4526803107274 L 736.2495900755168 421.51449981072733" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="760.8780504355168" y="447.9021359107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1.get framebuffer, crtc, connectors object by Id</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="760.8780504355168" y="465.4938933107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  构建set_config需要的参数</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="760.8780504355168" y="500.6774081107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2.crtc-&gt;funcs-&gt;</text><text fill="#ff0066" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="870.7349229941105" y="500.6774081107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">set_config( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="760.8780504355168" y="518.2691655107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    a.如果是atomic， 直接调用set_config()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="760.8780504355168" y="535.8609229107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    b.如果是传统方式，调用__drm_mode_set_config_internal(),在其里面在调用set_config()</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 667.6884404783489 595.6728980707273 L 1438.7075213596381 595.6728980707273 L 1454.540103019638 611.5054797307273 L 1454.540103019638 952.7855732907274 L 667.6884404783489 952.7855732907274 L 667.6884404783489 595.6728980707273 M 1438.7075213596381 595.6728980707273 L 1438.7075213596381 611.5054797307273 L 1454.540103019638 611.5054797307273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="620.3013584307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">drm_crtc_helper_set_config( )   // </text><text fill="green" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="926.4615236410832" y="620.3013584307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">系统提供的set_config( )实现</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="655.4848732307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  1. connector_helper_funcs.</text><text fill="#ff0066" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="886.6046663412785" y="655.4848732307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">best_encoder</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="980.4199892172551" y="655.4848732307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )  --&gt; encoder //拿到encoder</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="690.6683880307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  2. drm_crtc_helper_set_mode( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="708.2601454307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     a. encoder_helper_funcs-&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="899.4607607016301" y="708.2601454307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">mode_fixup</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="981.5939241537785" y="708.2601454307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( ) //调整请求的mode --&gt;adjusted mode</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="725.8519028307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     b.        crtc_helper_funcs-&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="899.7828279623723" y="725.8519028307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">mode_fixup</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="981.9159914145207" y="725.8519028307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( ) //如果CRTC无法支持从mode到adjusted_mode的转换，</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="743.4436602307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                                                                          则应该拒绝模式设置</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="761.0354176307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="778.6271750307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     c. encoder_helper_funcs-&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="898.7091585287785" y="778.6271750307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">prepare</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="952.746374715302" y="778.6271750307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )     //一般为disable encoder</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="796.2189324307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     d.        crtc_helper_funcs-&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="899.797155965302" y="796.2189324307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">prepare</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="953.8343721518254" y="796.2189324307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )     //一般为disable crtc,为后继的模式设置准备CRTC</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="831.4024472307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     e.        crtc_helper_funcs-&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="898.7377382406926" y="831.4024472307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">mode_set</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="966.6260896811223" y="831.4024472307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( ) //用于设置新的模式、位置和帧缓冲区，由传统的CRTC辅助函数使用</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="848.9942046307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     f. encoder_helper_funcs-&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="895.4450136313176" y="848.9942046307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">mode_set</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="963.3333650717473" y="848.9942046307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )  //用于更新编码器的显示模式</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="884.1777194307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     g.        crtc_helper_funcs-&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="899.797155965302" y="884.1777194307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">commit</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="953.3046938070988" y="884.1777194307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )  //一般为enable crtc</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="692.3169008383488" y="901.7694768307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">     h. encoder_helper_funcs-&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="900.3841768393254" y="901.7694768307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">commit</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="953.8917146811223" y="901.7694768307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )  //一般为enable encoder</text></g></g><g/><g/><g/><g/></g></svg>