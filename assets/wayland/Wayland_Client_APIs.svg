<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1669" height="3427"><desc>title%20Client%20APIs%0A%0Aparticipant%20%22Client%22%20as%20Client%0Aparticipant%20%22wayland-client.c%22%20as%20wc%0Aparticipant%20%22wayland-client-protocol.h%22%20as%20wch%0A%0Aparticipant%20%22Connection.c%22%20as%20cn%0A%0Aparticipant%20%22wayland-util.c%22%20as%20wu%0A%0AClient-%23blue%3Ewc%3Awl_display_connect(%20)%0Aalt%20env%20WAYLAND_SOCKET%0Arbox%20over%20wc%3AClient%20is%20created%20by%20fork%2C%5Cn%3Ccolor%3A%23red%3Efd%3C%2Fcolor%3E%20is%20inherited%20from%20parent.%20only%20set%20fd%0Aelse%20%0A%0Arbox%20over%20wc%3AConnect_to_socket(%20)%5Cn1.create%20local%20%3Ccolor%3A%23red%3Efd%3C%2Fcolor%3E%20with%20flag%20cloexec%5Cn2.call%20%3Ccolor%3A%23red%3Econnect(%20)%3C%2Fcolor%3E%20with%20env%20%22WAYLAND_DISPLAY%22%20or%20%22wayland-0%22%0Aend%0A%0Arbox%20over%20wc%3Awl_display_connect_to_fd(%3Ccolor%3A%23red%3Efd%3C%2Fcolor%3E)%5Cn%3Ccolor%3A%23red%3ECreate%20wl_dislay%20instance%3C%2Fcolor%3E%0Awc%20-%3Ewu%3Awl_map_init(%3Ccolor%3A%23steelblue%3Edisplay-%3Eobjects%3C%2Fcolor%3E)%0Awc--%3E%3EClient%3Adisplay%0A%3D%3Dinfo%3D%3D%0AClient-%23blue%3Ewch%3A%20wl_display_get_registry(%20display)%0A%0A%0Awch-%3Ewc%3Awl_proxy_marshal_flags(display%2C%3Ccolor%3A%23red%3Eopcode%3C%2Fcolor%3E%20)%0Agroup%20%23pink%20wl_proxy_marshal_flags(%20)%20%23blue%0A%0Awc-%3Ecn%3A%3Ccolor%3A%23blue%3E1%3C%2Fcolor%3E.%20wl_argument_from_va_list(object.interface-%3Emethods%5B%3Ccolor%3A%23red%3Eopcode%3C%2Fcolor%3E%5D.signature%2C%20ap%20)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ccolor%3A%23red%3E%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8%3C%2Fcolor%3E%0Acn--%3E%3Ewc%3A%20wl_argument%20*%3Ccolor%3A%23red%3Eargs%3C%2Fcolor%3E%0Awc-%3Ewc%3A%3Ccolor%3A%23blue%3E2%3C%2Fcolor%3E.%20wl_proxy_marshal_array_flags(%20%3Ccolor%3A%23red%3Eargs%3C%2Fcolor%3E)%0Aactivate%20wc%20%23pink%0Arbox%20right%20of%20wc%3A%3Ccolor%3A%23red%3Enew_proxy%3C%2Fcolor%3E%20%3C%3D%20create_outgoing_proxy(%20)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ccolor%3A%23red%3E%20proxy_create(%20)%3C%2Fcolor%3E%20%20%0Awc-%3Ewu%3Awl_map_insert_new(%3Ccolor%3A%23red%3Enew_proxy%3C%2Fcolor%3E%20)%5Cn%20%20%20%3Ccolor%3A%23red%3Einsert%20proxy%20to%20%3C%2Fcolor%3E%3Ccolor%3A%23steelblue%3Edispaly-%3Eobjects%3C%2Fcolor%3E%0Awc-%3Ecn%3Awl_closure_marshal(object%2C%3Ccolor%3A%23red%3Eopcode%2C%20args%3C%2Fcolor%3E%2C%20message%20)%0Arbox%20over%20cn%3A%20wl_closure_init(%20)%0Acn--%3Ewc%3Awl_lcosure%20%3Ccolor%3A%23red%3E*closure%3C%2Fcolor%3E%0Awc-%3Ecn%3Awl_closure_send(%3Ccolor%3A%23red%3E*closure%3C%2Fcolor%3E)%0Arbox%20over%20cn%3A1.%20copy_fds_to_connection(%20)%5Cn%20%20%20%20wl_connection_put_fd(%20)%20-%20-%3E%20%3Ccolor%3A%23red%3Econnection-%3Efds_out%3C%2Fcolor%3E%20%5C%2F%5C%2Fring_buffer%5Cn%5Cn2.%20serialize_closure(%20)%5Cn3.%20wl_connection_write(%20)%5Cn%20%20%20%20%20%20-%20-%3E%3Ccolor%3A%23red%3Econnection-%3Eout%3C%2Fcolor%3E%20%5C%2F%5C%2Fring_buffer%0Awc-%3Ecn%3A%20wl_closure_destroy(%20)%0A%0Awc--%3E%3Ewch%3Awl_proxy%20%3Ccolor%3A%23red%3E*new_proxy%3C%2Fcolor%3E%0Adeactivate%20wc%0A%0Aend%0Awch--%3E%3EClient%3Awl_proxy%20%20%3Ccolor%3A%23red%3E*new_proxy%3C%2Fcolor%3E%0A%0A%0A%3D%3D%3D%3D%0AClient-%23blue%3Ewch%3Awl_registry_add_listener(%3Ccolor%3A%23red%3Eimplementation%3C%2Fcolor%3E)%0Awch-%3Ewc%3Awl_proxy_add_listener(%3Ccolor%3A%23red%3Eimplementation%3C%2Fcolor%3E)%0Arbox%20over%20wc%3Asave%20%3Ccolor%3A%23red%3Eimplementation%3C%2Fcolor%3E%20and%20user_data%5Cnto%20%3Ccolor%3A%23blue%3E*wl_registry%3C%2Fcolor%3E%0A%3D%3D%3D%3D%0AClient-%23blue%3Ewc%3Awl_display_roundtrip(%20)%0Awc%20-%3E%20wc%3Awl_display_roundtrip_queue(%20)%0Aactivate%20wc%0Arbox%20right%20of%20wc%3Awl_display_sync(%20)%5Cn%20%20%20%3Ccolor%3A%23red%3Ecallback%20proxy%3C%2Fcolor%3E%20%3C%3D%20%3Cbackground%3A%23pink%3Ewl_proxy_marshal_flags%3C%2Fbackground%3E(%20%3Ccolor%3A%23red%3Esync%3C%2Fcolor%3E)%5Cn%20%20%20%20%E7%BB%84%E5%BB%BAsync%E5%8F%82%E6%95%B0%EF%BC%8C%E7%94%9F%E6%88%90closure%EF%BC%8C%E5%8F%91%E7%94%9F%E5%88%B0%E5%AF%B9%E7%AB%AF%5Cn%20%20%20%20%E7%B1%BB%E4%BC%BCwl_display_get_registry%EF%BC%88%EF%BC%89%E6%B5%81%E7%A8%8B%0A%0Arbox%20right%20of%20wc%3Awl_callback_add_listener(%20)%5Cn%20%20%20%20%20%20%20wl_proxy_add_listener(%20)%5Cn%20%20%20%20%20%20%20%5C%2F%5C%2F%20save%20%3Ccolor%3A%23red%3Esync_listener%3C%2Fcolor%3E%20to%20object-%3Eimplementation%2C%20user_data%20%3C%3D%3Ccolor%3A%23red%3Ecallback_done%3C%2Fcolor%3E%0Aloop%20ret%3E%3D0%20%26%20!callback_done%0Awc-%3Ewc%3Awl_display_dispatch_queue(%20)%0Aactivate%20wc%0Awc-%3Ecn%3Awl_display_flush(%20)%5C-%5C-%3E%20wl_connection_flush(%20)%0A%0Agroup%20wl_display_read_events(%20)%20--%3Eread_events(%20)%0Awc-%3Ecn%3Awl_connection_read(%20)%0Arbox%20right%20of%20wc%3Aqueue_event(%20)%5Cn%20%20%20save%20the%20new%20data%20from%20connection%2Cand%20decode%20it%20as%20closure.%5Cn%20%20%20%3Cbackground%3A%23pink%3Ewl_list_insert(queue-%3Eevent_list.prev%2C%20%26closure-%3Elink)%3Cbackground%3E%0A%0Aend%20%0Agroup%20%238899aa%20wl_display_dispatch_queue_pending(%20)%20--%3Edispatch_queue(%20)--%3Edispatch_event(%20)%20%0Awc-%3Ecn%3Awl_closure_invoke(%20)%0Acn-%3EClient%3A%3Cbackground%3A%23yellow%3EFFI%3C%2Fbackground%3E%20%3D%3D%3E%20object-%3E%3Ccolor%3A%23red%3Eimplementation(%20)%3C%2Fcolor%3E%0Aend%0Aend%0Adeactivateafter%20wc%0Adeactivateafter%20wc%0A%3D%3D%3D%3D%0AClient-%23blue%3Ewch%3Awl_registry_bind(%20)%0Awch-%3Ewc%3A%3Cbackground%3A%23pink%3Ewl_proxy_marshal_flags%3C%2Fbackground%3E(%3Ccolor%3A%23red%3Ebind%3C%2Fcolor%3E)%0Arbox%20over%20wc%3A1.%20wl_argument_from_va_list(%20)%5Cn2.%20wl_proxy_marshal_array_flags(%20)%5Cn.......%0A%0Awc--%3E%3Ewch%3A%20wl_proxy%20*new_proxy%0Awch--%3EClient%3A%20wl_proxy%20*new_proxy</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1669" height="3427"/></g><g><rect fill="rgb(255,242,245)" stroke="none" x="305.5876270070703" y="843.7166774107275" width="1346.7661313081576" height="854.9594096399994"/><rect fill="rgb(231,235,238)" stroke="none" x="35.18351480000001" y="2828.0669121307255" width="1353.5060820675326" height="146.01158641999973"/></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 96.7546657 103.10369087072726 L 96.7546657 3427.9458394707244" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 375.9546566070703 103.10369087072726 L 375.9546566070703 3427.9458394707244" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1026.236110803828 103.10369087072726 L 1026.236110803828 3427.9458394707244" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1327.1184459675326 103.10369087072726 L 1327.1184459675326 3427.9458394707244" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1590.7826074152279 103.10369087072726 L 1590.7826074152279 3427.9458394707244" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 57.456442539164065 55.781863464727266 L 136.05288886083594 55.781863464727266 L 136.05288886083594 103.10369087072726 L 57.456442539164065 103.10369087072726 L 57.456442539164065 55.781863464727266 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="76.54349931816407" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Client</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 300.34647403461327 55.781863464727266 L 451.5628391795274 55.781863464727266 L 451.5628391795274 103.10369087072726 L 300.34647403461327 103.10369087072726 L 300.34647403461327 55.781863464727266 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="319.4335308136133" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wayland-client.c</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 917.4031586390859 55.781863464727266 L 1135.0690629685703 55.781863464727266 L 1135.0690629685703 103.10369087072726 L 917.4031586390859 103.10369087072726 L 917.4031586390859 55.781863464727266 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="936.4902154180859" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wayland-client-protocol.h</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1262.3012408731029 55.781863464727266 L 1391.9356510619623 55.781863464727266 L 1391.9356510619623 103.10369087072726 L 1262.3012408731029 103.10369087072726 L 1262.3012408731029 55.781863464727266 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1281.388297652103" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Connection.c</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1523.009072975095 55.781863464727266 L 1658.5561418553607 55.781863464727266 L 1658.5561418553607 103.10369087072726 L 1523.009072975095 103.10369087072726 L 1523.009072975095 55.781863464727266 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1542.096129754095" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wayland-util.c</text></g></g><g><path fill="pink" stroke="black" paint-order="fill stroke markers" d=" M 367.1587779070703 1053.0585904707275 L 384.7505353070703 1053.0585904707275 L 384.7505353070703 1672.2884509507269 L 367.1587779070703 1672.2884509507269 L 367.1587779070703 1053.0585904707275" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 367.1587779070703 2185.9677670307265 L 384.7505353070703 2185.9677670307265 L 384.7505353070703 3012.780364830725 L 367.1587779070703 3012.780364830725 L 367.1587779070703 2185.9677670307265" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 375.9546566070703 2527.2478605907263 L 393.5464140070703 2527.2478605907263 L 393.5464140070703 3012.780364830725 L 375.9546566070703 3012.780364830725 L 375.9546566070703 2527.2478605907263" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16pt" font-style="normal" font-weight="normal" text-decoration="normal" x="779.8367080688477" y="26.547561167272725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Client APIs</text></g><g><g><rect fill="white" stroke="none" x="159.81108949910154" y="138.28720567072727" width="153.08714330886718" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="162.44985310910155" y="154.1197873307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_display_connect( )</text></g><g><path fill="none" stroke="blue" paint-order="fill stroke markers" d=" M 96.7546657 161.15649029072728 L 361.470776347737 161.15649029072728" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(375.9546566070703,161.15649029072728) translate(-375.9546566070703,-161.15649029072728)"><path fill="blue" stroke="none" paint-order="stroke fill markers" d=" M 361.29485877373696 153.8265913740606 L 375.9546566070703 161.15649029072728 L 361.29485877373696 168.48638920739396 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 218.38418727490236 250.87445303072727 L 218.38418727490236 250.87445303072727 A 15.832581659999999 15.832581659999999 0 0 1 234.21676893490235 235.04187137072728 L 517.6925442792383 235.04187137072728 L 517.6925442792383 235.04187137072728 A 15.832581659999999 15.832581659999999 0 0 1 533.5251259392383 250.87445303072727 L 533.5251259392383 277.26208913072725 L 533.5251259392383 277.26208913072725 A 15.832581659999999 15.832581659999999 0 0 1 517.6925442792383 293.09467079072726 L 234.21676893490235 293.09467079072726 L 234.21676893490235 293.09467079072726 A 15.832581659999999 15.832581659999999 0 0 1 218.38418727490236 277.26208913072725 L 218.38418727490236 250.87445303072727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="243.01264763490235" y="259.67033173072724" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Client is created by fork,</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="243.01264763490235" y="277.26208913072725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">fd</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="257.4722118438867" y="277.26208913072725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> is inherited from parent. only set fd</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 131.93818050000002 382.8126335307273 L 131.93818050000002 382.8126335307273 A 15.832581659999999 15.832581659999999 0 0 1 147.77076216 366.98005187072727 L 604.1385510541406 366.98005187072727 L 604.1385510541406 366.98005187072727 A 15.832581659999999 15.832581659999999 0 0 1 619.9711327141406 382.8126335307273 L 619.9711327141406 426.79202703072724 L 619.9711327141406 426.79202703072724 A 15.832581659999999 15.832581659999999 0 0 1 604.1385510541406 442.62460869072726 L 147.77076216 442.62460869072726 L 147.77076216 442.62460869072726 A 15.832581659999999 15.832581659999999 0 0 1 131.93818050000002 426.79202703072724 L 131.93818050000002 382.8126335307273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="156.56664086" y="391.60851223072723" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Connect_to_socket( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="156.56664086" y="409.20026963072723" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1.create local </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="252.76563072816407" y="409.20026963072723" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">fd</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="267.22519493714844" y="409.20026963072723" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> with flag cloexec</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="156.56664086" y="426.79202703072724" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2.call </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="196.2874660553125" y="426.79202703072724" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">connect( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="266.28748131410157" y="426.79202703072724" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> with env "WAYLAND_DISPLAY" or "wayland-0"</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 251.2295318183594 511.2324625507273 L 251.2295318183594 511.2324625507273 A 15.832581659999999 15.832581659999999 0 0 1 267.0621134783594 495.3998808907273 L 484.8471997357812 495.3998808907273 L 484.8471997357812 495.3998808907273 A 15.832581659999999 15.832581659999999 0 0 1 500.6797813957812 511.2324625507273 L 500.6797813957812 537.6200986507273 L 500.6797813957812 537.6200986507273 A 15.832581659999999 15.832581659999999 0 0 1 484.8471997357812 553.4526803107273 L 267.0621134783594 553.4526803107273 L 267.0621134783594 553.4526803107273 A 15.832581659999999 15.832581659999999 0 0 1 251.2295318183594 537.6200986507273 L 251.2295318183594 511.2324625507273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="275.8579921783594" y="520.0283412507273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_display_connect_to_fd(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="456.69554711" y="520.0283412507273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">fd</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="471.1551113189844" y="520.0283412507273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="275.8579921783594" y="537.6200986507273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Create wl_dislay instance</text></g><g><g><rect fill="white" stroke="none" x="876.3132576833757" y="579.8403164107273" width="214.11074865554687" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="878.9520212933757" y="595.6728980707272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_map_init(</text><text fill="steelblue" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="965.9670664593913" y="595.6728980707272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">display-&gt;objects</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1082.8890330121258" y="595.6728980707272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 375.9546566070703 602.7096010307273 L 1576.2987271558945 602.7096010307273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1590.7826074152279,602.7096010307273) translate(-1590.7826074152279,-602.7096010307273)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1576.1228095818944 595.3797021140606 L 1590.7826074152279 602.7096010307273 L 1576.1228095818944 610.039499947394 Z"/></g></g><g><g><rect fill="white" stroke="none" x="209.12033937703123" y="629.0972371307273" width="54.46864355300781" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="211.75910298703124" y="644.9298187907273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">display</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 375.9546566070703 651.9665217507273 L 98.953635375 651.9665217507273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(96.7546657,651.9665217507273) translate(-96.7546657,-651.9665217507273)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 111.82646734328897 645.2428629200559 L 98.40268093982252 651.9665217507273 L 111.82646734328897 658.6901805813987" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 692.7207597273941 L 1660.2041213 692.7207597273941 M 8.7958787 698.5846788607274 L 1660.2041213 698.5846788607274 M 8.7958787 704.4485979940607 L 1660.2041213 704.4485979940607" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 796.2029605384375 678.3541578507273 L 872.7970394615626 678.3541578507273 L 872.7970394615626 718.8151998707274 L 796.2029605384375 718.8151998707274 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="820.8314208984375" y="702.9826182107274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">info</text></g><g><g><rect fill="white" stroke="none" x="446.81295398761716" y="745.2028359707274" width="229.36486852859375" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="449.4517175976172" y="761.0354176307274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_display_get_registry( display)</text></g><g><path fill="none" stroke="blue" paint-order="fill stroke markers" d=" M 96.7546657 768.0721205907274 L 1011.7522305444948 768.0721205907274" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1026.236110803828,768.0721205907274) translate(-1026.236110803828,-768.0721205907274)"><path fill="blue" stroke="none" paint-order="stroke fill markers" d=" M 1011.5763129704948 760.7422216740607 L 1026.236110803828 768.0721205907274 L 1011.5763129704948 775.4020195073941 Z"/></g></g><g><g><rect fill="white" stroke="none" x="557.4651955349024" y="794.4597566907274" width="287.2603763410938" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="560.1039591449023" y="810.2923383507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_proxy_marshal_flags(display,</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="779.803330482793" y="810.2923383507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">opcode</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="832.8527384417773" y="810.2923383507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1026.236110803828 817.3290413107275 L 390.43853686640364 817.3290413107275" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(375.9546566070703,817.3290413107275) translate(-375.9546566070703,-817.3290413107275)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 390.6144544404037 809.9991423940608 L 375.9546566070703 817.3290413107275 L 390.6144544404037 824.6589402273942 Z"/></g></g><g><g><rect fill="rgb(255,242,245)" stroke="none" x="571.4711290469304" y="891.2144223907275" width="560.1308444807422" height="22.86928462"/></g><g><rect fill="rgb(255,242,245)" stroke="none" x="571.4711290469304" y="908.8061797907275" width="289.64389074539065" height="22.86928462"/></g><text fill="blue" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="574.1098926569304" y="907.0470040507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="582.7068927790007" y="907.0470040507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">. wl_argument_from_va_list(object.interface-&gt;methods[</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="967.5172565485319" y="907.0470040507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">opcode</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1020.5666645075163" y="907.0470040507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">].signature, ap )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="574.1098926569304" y="924.6387614507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                         </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="682.5563953424772" y="924.6387614507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">参数类型字符串，参数列表</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 375.9546566070703 931.6754644107275 L 1312.6345657081993 931.6754644107275" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1327.1184459675326,931.6754644107275) translate(-1327.1184459675326,-931.6754644107275)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1312.4586481341992 924.3455654940608 L 1327.1184459675326 931.6754644107275 L 1312.4586481341992 939.0053633273942 Z"/></g></g><g><g><rect fill="rgb(255,242,245)" stroke="none" x="783.3143907656804" y="958.0631005107275" width="136.44432104324218" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="785.9531543756804" y="973.8956821707275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_argument *</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="887.4635456110319" y="973.8956821707275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">args</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1327.1184459675326 980.9323851307275 L 378.1536262820703 980.9323851307275" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(375.9546566070703,980.9323851307275) translate(-375.9546566070703,-980.9323851307275)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 391.0264582503593 974.2087263000561 L 377.60267184689286 980.9323851307275 L 391.0264582503593 987.656043961399" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><g><rect fill="rgb(255,242,245)" stroke="none" x="405.56744823040367" y="1007.3200212307275" width="270.13078344558596" height="22.86928462"/></g><text fill="blue" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="408.2062118404037" y="1023.1526028907275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="416.803211962474" y="1023.1526028907275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">. wl_proxy_marshal_array_flags( </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="638.5068557613022" y="1023.1526028907275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">args</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="668.1632583491928" y="1023.1526028907275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 375.9546566070703 1030.1893058507276 L 455.11756490707035 1030.1893058507276 L 455.11756490707035 1053.0585904707275 L 399.23441556640364 1053.0585904707275" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(384.7505353070703,1053.0585904707275) translate(-384.7505353070703,-1053.0585904707275)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 399.4103331404037 1045.7286915540608 L 384.7505353070703 1053.0585904707275 L 399.4103331404037 1060.3884893873942 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 384.7505353070703 1108.4726262807274 L 393.5464140070703 1108.4726262807274 M 393.5464140070703 1095.2788082307275 L 393.5464140070703 1095.2788082307275 A 15.832581659999999 15.832581659999999 0 0 1 409.37899566707034 1079.4462265707275 L 711.7521556549609 1079.4462265707275 L 711.7521556549609 1079.4462265707275 A 15.832581659999999 15.832581659999999 0 0 1 727.5847373149609 1095.2788082307275 L 727.5847373149609 1121.6664443307275 L 727.5847373149609 1121.6664443307275 A 15.832581659999999 15.832581659999999 0 0 1 711.7521556549609 1137.4990259907274 L 409.37899566707034 1137.4990259907274 L 409.37899566707034 1137.4990259907274 A 15.832581659999999 15.832581659999999 0 0 1 393.5464140070703 1121.6664443307275 L 393.5464140070703 1095.2788082307275" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.1748743670703" y="1104.0746869307272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">new_proxy</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="492.74182993347654" y="1104.0746869307272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> &lt;= create_outgoing_proxy( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.1748743670703" y="1121.6664443307272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                                       </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="587.3514185565234" y="1121.6664443307272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> proxy_create( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="694.2805567401172" y="1121.6664443307272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  </text></g><g><g><rect fill="rgb(255,242,245)" stroke="none" x="867.1142274288835" y="1163.8866620907274" width="228.84951818679687" height="22.86928462"/></g><g><rect fill="rgb(255,242,245)" stroke="none" x="867.1142274288835" y="1181.4784194907274" width="241.30468786453125" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="869.7529910388835" y="1179.7192437507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_map_insert_new(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1009.5239566150553" y="1179.7192437507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">new_proxy</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1084.0909121814616" y="1179.7192437507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="869.7529910388835" y="1197.3110011507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="882.7665713611491" y="1197.3110011507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">insert proxy to </text><text fill="steelblue" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="989.0657656970866" y="1197.3110011507274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">dispaly-&gt;objects</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 384.7505353070703 1204.3477041107274 L 1576.2987271558945 1204.3477041107274" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1590.7826074152279,1204.3477041107274) translate(-1590.7826074152279,-1204.3477041107274)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1576.1228095818944 1197.0178051940607 L 1590.7826074152279 1204.3477041107274 L 1576.1228095818944 1211.677603027394 Z"/></g></g><g><g><rect fill="rgb(255,242,245)" stroke="none" x="675.6292917856023" y="1230.7353402107274" width="360.61039770339846" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="678.2680553956022" y="1246.5679218707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_closure_marshal(object,</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="864.502857641696" y="1246.5679218707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">opcode, args</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="955.0755199952116" y="1246.5679218707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">, message )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 384.7505353070703 1253.6046248307273 L 1312.6345657081993 1253.6046248307273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1327.1184459675326,1253.6046248307273) translate(-1327.1184459675326,-1253.6046248307273)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1312.4586481341992 1246.2747259140606 L 1327.1184459675326 1253.6046248307273 L 1312.4586481341992 1260.934523747394 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1244.916606090931 1295.8248425907273 L 1244.916606090931 1295.8248425907273 A 15.832581659999999 15.832581659999999 0 0 1 1260.749187750931 1279.9922609307273 L 1393.4877041841341 1279.9922609307273 L 1393.4877041841341 1279.9922609307273 A 15.832581659999999 15.832581659999999 0 0 1 1409.320285844134 1295.8248425907273 L 1409.320285844134 1304.6207212907273 L 1409.320285844134 1304.6207212907273 A 15.832581659999999 15.832581659999999 0 0 1 1393.4877041841341 1320.4533029507272 L 1260.749187750931 1320.4533029507272 L 1260.749187750931 1320.4533029507272 A 15.832581659999999 15.832581659999999 0 0 1 1244.916606090931 1304.6207212907273 L 1244.916606090931 1295.8248425907273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1269.545066450931" y="1304.620721290727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_closure_init( )</text></g><g><g><rect fill="rgb(255,242,245)" stroke="none" x="787.0609324106023" y="1346.8409390507272" width="137.74711645339843" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="789.6996960206022" y="1362.6735207107272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_lcosure </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="866.1850323243132" y="1362.6735207107272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">*closure</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1327.1184459675326 1369.7102236707271 L 399.23441556640364 1369.7102236707271" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(384.7505353070703,1369.7102236707271) translate(-384.7505353070703,-1369.7102236707271)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 399.4103331404037 1362.3803247540604 L 384.7505353070703 1369.7102236707271 L 399.4103331404037 1377.0401225873939 Z"/></g></g><g><g><rect fill="rgb(255,242,245)" stroke="none" x="764.2906992563054" y="1396.0978597707272" width="183.28758276199218" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="766.9294628663054" y="1411.9304414307271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_closure_send(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="884.0590557618132" y="1411.9304414307271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">*closure</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="940.0433086915007" y="1411.9304414307271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 384.7505353070703 1418.967144390727 L 1312.6345657081993 1418.967144390727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1327.1184459675326,1418.967144390727) translate(-1327.1184459675326,-1418.967144390727)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1312.4586481341992 1411.6372454740604 L 1327.1184459675326 1418.967144390727 L 1312.4586481341992 1426.2970433073938 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1072.2501632198373 1461.187362150727 L 1072.2501632198373 1461.187362150727 A 15.832581659999999 15.832581659999999 0 0 1 1088.0827448798373 1445.354780490727 L 1566.154147055228 1445.354780490727 L 1566.154147055228 1445.354780490727 A 15.832581659999999 15.832581659999999 0 0 1 1581.9867287152279 1461.187362150727 L 1581.9867287152279 1557.942027850727 L 1581.9867287152279 1557.942027850727 A 15.832581659999999 15.832581659999999 0 0 1 1566.154147055228 1573.774609510727 L 1088.0827448798373 1573.774609510727 L 1088.0827448798373 1573.774609510727 A 15.832581659999999 15.832581659999999 0 0 1 1072.2501632198373 1557.942027850727 L 1072.2501632198373 1461.187362150727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1096.8786235798373" y="1469.9832408507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. copy_fds_to_connection( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1096.8786235798373" y="1487.5749982507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    wl_connection_put_fd( ) - -&gt; </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1316.5636669147982" y="1487.5749982507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">connection-&gt;fds_out</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1463.535789107181" y="1487.5749982507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> //ring_buffer</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1096.8786235798373" y="1522.7585130507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. serialize_closure( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1096.8786235798373" y="1540.3502704507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. wl_connection_write( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1096.8786235798373" y="1557.9420278507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      - -&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1150.8012767780795" y="1557.9420278507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">connection-&gt;out</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1269.9566417683138" y="1557.9420278507268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> //ring_buffer</text></g><g><g><rect fill="rgb(255,242,245)" stroke="none" x="780.6650736459538" y="1600.162245610727" width="150.5388339826953" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="783.3038372559538" y="1615.994827270727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_closure_destroy( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 384.7505353070703 1623.031530230727 L 1312.6345657081993 1623.031530230727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1327.1184459675326,1623.031530230727) translate(-1327.1184459675326,-1623.031530230727)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1312.4586481341992 1615.7016313140603 L 1327.1184459675326 1623.031530230727 L 1312.4586481341992 1630.3614291473937 Z"/></g></g><g><g><rect fill="rgb(255,242,245)" stroke="none" x="629.5080857516016" y="1649.419166330727" width="151.9704746076953" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="632.1468493616015" y="1665.251747990727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_proxy </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="697.6014086877734" y="1665.251747990727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">*new_proxy</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 384.7505353070703 1672.2884509507269 L 1024.0371411288281 1672.2884509507269" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(1026.236110803828,1672.2884509507269) translate(-1026.236110803828,-1672.2884509507269)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1011.1643091605391 1665.5647921200555 L 1024.5880955640055 1672.2884509507269 L 1011.1643091605391 1679.0121097813983" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><g><rect fill="white" stroke="none" x="483.34122089435544" y="1725.063723150727" width="156.30833471511718" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="485.97998450435546" y="1740.8963048107269" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_proxy  </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="555.7724039379492" y="1740.8963048107269" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">*new_proxy</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1026.236110803828 1747.9330077707268 L 98.953635375 1747.9330077707268" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(96.7546657,1747.9330077707268) translate(-96.7546657,-1747.9330077707268)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 111.82646734328897 1741.2093489400554 L 98.40268093982252 1747.9330077707268 L 111.82646734328897 1754.6566666013982" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 1788.6872457473933 L 1660.2041213 1788.6872457473933 M 8.7958787 1794.5511648807267 L 1660.2041213 1794.5511648807267 M 8.7958787 1800.41508401406 L 1660.2041213 1800.41508401406" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><g><rect fill="white" stroke="none" x="414.930339851875" y="1841.1693219907268" width="293.13009680007815" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="417.569103461875" y="1857.0019036507267" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_registry_add_listener(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="588.9363367382422" y="1857.0019036507267" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">implementation</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="700.5254633251562" y="1857.0019036507267" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><path fill="none" stroke="blue" paint-order="fill stroke markers" d=" M 96.7546657 1864.0386066107267 L 1011.7522305444948 1864.0386066107267" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1026.236110803828,1864.0386066107267) translate(-1026.236110803828,-1864.0386066107267)"><path fill="blue" stroke="none" paint-order="stroke fill markers" d=" M 1011.5763129704948 1856.70870769406 L 1026.236110803828 1864.0386066107267 L 1011.5763129704948 1871.3685055273934 Z"/></g></g><g><g><rect fill="white" stroke="none" x="561.6097878200586" y="1890.4262427107267" width="278.9711917707813" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="564.2485514300586" y="1906.2588243707266" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_proxy_add_listener(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="721.4568796771289" y="1906.2588243707266" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">implementation</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="833.046006264043" y="1906.2588243707266" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1026.236110803828 1913.2955273307266 L 390.43853686640364 1913.2955273307266" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(375.9546566070703,1913.2955273307266) translate(-375.9546566070703,-1913.2955273307266)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 390.6144544404037 1905.96562841406 L 375.9546566070703 1913.2955273307266 L 390.6144544404037 1920.6254262473933 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 226.68769984814455 1955.5157450907266 L 226.68769984814455 1955.5157450907266 A 15.832581659999999 15.832581659999999 0 0 1 242.52028150814454 1939.6831634307266 L 509.38903170599605 1939.6831634307266 L 509.38903170599605 1939.6831634307266 A 15.832581659999999 15.832581659999999 0 0 1 525.2216133659961 1955.5157450907266 L 525.2216133659961 1981.9033811907266 L 525.2216133659961 1981.9033811907266 A 15.832581659999999 15.832581659999999 0 0 1 509.38903170599605 1997.7359628507265 L 242.52028150814454 1997.7359628507265 L 242.52028150814454 1997.7359628507265 A 15.832581659999999 15.832581659999999 0 0 1 226.68769984814455 1981.9033811907266 L 226.68769984814455 1955.5157450907266" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="251.31616020814454" y="1964.3116237907263" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">save </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="286.46288872376954" y="1964.3116237907263" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">implementation</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="398.0520153106836" y="1964.3116237907263" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> and user_data</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="251.31616020814454" y="1981.9033811907263" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">to </text><text fill="blue" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="270.3140087188867" y="1981.9033811907263" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">*wl_registry</text></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 2038.490200827393 L 1660.2041213 2038.490200827393 M 8.7958787 2044.3541199607264 L 1660.2041213 2044.3541199607264 M 8.7958787 2050.21803909406 L 1660.2041213 2050.21803909406" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><g><rect fill="white" stroke="none" x="154.50687502156248" y="2090.9722770707262" width="163.6955722639453" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="157.1456386315625" y="2106.804858730726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_display_roundtrip( )</text></g><g><path fill="none" stroke="blue" paint-order="fill stroke markers" d=" M 96.7546657 2113.8415616907264 L 361.470776347737 2113.8415616907264" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(375.9546566070703,2113.8415616907264) translate(-375.9546566070703,-2113.8415616907264)"><path fill="blue" stroke="none" paint-order="stroke fill markers" d=" M 361.29485877373696 2106.51166277406 L 375.9546566070703 2113.8415616907264 L 361.29485877373696 2121.171460607393 Z"/></g></g><g><g><rect fill="white" stroke="none" x="405.56744823040367" y="2140.2291977907266" width="214.3469852278125" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="408.2062118404037" y="2156.0617794507266" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_display_roundtrip_queue( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 375.9546566070703 2163.0984824107263 L 455.11756490707035 2163.0984824107263 L 455.11756490707035 2185.9677670307265 L 399.23441556640364 2185.9677670307265" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(384.7505353070703,2185.9677670307265) translate(-384.7505353070703,-2185.9677670307265)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 399.4103331404037 2178.63786811406 L 384.7505353070703 2185.9677670307265 L 399.4103331404037 2193.297665947393 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 384.7505353070703 2258.9735602407263 L 393.5464140070703 2258.9735602407263 M 393.5464140070703 2228.187984790726 L 393.5464140070703 2228.187984790726 A 15.832581659999999 15.832581659999999 0 0 1 409.37899566707034 2212.3554031307262 L 777.5935100250781 2212.3554031307262 L 777.5935100250781 2212.3554031307262 A 15.832581659999999 15.832581659999999 0 0 1 793.4260916850781 2228.187984790726 L 793.4260916850781 2289.7591356907265 L 793.4260916850781 2289.7591356907265 A 15.832581659999999 15.832581659999999 0 0 1 777.5935100250781 2305.5917173507264 L 409.37899566707034 2305.5917173507264 L 409.37899566707034 2305.5917173507264 A 15.832581659999999 15.832581659999999 0 0 1 393.5464140070703 2289.7591356907265 L 393.5464140070703 2228.187984790726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.1748743670703" y="2236.9838634907264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_display_sync( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.1748743670703" y="2254.5756208907264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="431.1884546893359" y="2254.5756208907264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">callback proxy</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="530.4439936297656" y="2254.5756208907264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> &lt;= </text><g><rect fill="pink" stroke="none" x="560.8663263934375" y="2241.5577204147266" width="162.87045288085938" height="17.767674974"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="560.8663263934375" y="2254.5756208907264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_proxy_marshal_flags</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="723.7367792742969" y="2254.5756208907264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="732.9708490985156" y="2254.5756208907264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sync</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="763.9014216082812" y="2254.5756208907264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.1748743670703" y="2272.1673782907264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    组建sync参数，生成closure，发生到对端</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.1748743670703" y="2289.7591356907265" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    类似wl_display_get_registry（）流程</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 384.7505353070703 2369.8016318607265 L 393.5464140070703 2369.8016318607265 M 393.5464140070703 2347.811935110726 L 393.5464140070703 2347.811935110726 A 15.832581659999999 15.832581659999999 0 0 1 409.37899566707034 2331.979353450726 L 992.8117717438282 2331.979353450726 L 992.8117717438282 2331.979353450726 A 15.832581659999999 15.832581659999999 0 0 1 1008.6443534038282 2347.811935110726 L 1008.6443534038282 2391.7913286107264 L 1008.6443534038282 2391.7913286107264 A 15.832581659999999 15.832581659999999 0 0 1 992.8117717438282 2407.6239102707264 L 409.37899566707034 2407.6239102707264 L 409.37899566707034 2407.6239102707264 A 15.832581659999999 15.832581659999999 0 0 1 393.5464140070703 2391.7913286107264 L 393.5464140070703 2347.811935110726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.1748743670703" y="2356.6078138107264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_callback_add_listener( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.1748743670703" y="2374.1995712107264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">       wl_proxy_add_listener( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="418.1748743670703" y="2391.7913286107264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">       // save </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="500.5513392108203" y="2391.7913286107264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sync_listener</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="589.248543800664" y="2391.7913286107264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> to object-&gt;implementation, user_data &lt;=</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="885.5477381366015" y="2391.7913286107264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">callback_done</text></g><g><g><rect fill="white" stroke="none" x="414.3633269304037" y="2481.5092913507265" width="206.82373083328125" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="417.0020905404037" y="2497.3418730107264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_display_dispatch_queue( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 384.7505353070703 2504.378575970726 L 463.91344360707035 2504.378575970726 L 463.91344360707035 2527.2478605907263 L 408.03029426640364 2527.2478605907263" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(393.5464140070703,2527.2478605907263) translate(-393.5464140070703,-2527.2478605907263)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 408.2062118404037 2519.91796167406 L 393.5464140070703 2527.2478605907263 L 408.2062118404037 2534.577759507393 Z"/></g></g><g><g><rect fill="white" stroke="none" x="703.5096758987859" y="2553.635496690726" width="313.6455081770313" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="706.1484395087858" y="2569.468078350726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_display_flush( )--&gt; wl_connection_flush( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 393.5464140070703 2576.5047813107262 L 1312.6345657081993 2576.5047813107262" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1327.1184459675326,2576.5047813107262) translate(-1327.1184459675326,-2576.5047813107262)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1312.4586481341992 2569.1748823940598 L 1327.1184459675326 2576.5047813107262 L 1312.4586481341992 2583.8346802273927 Z"/></g></g><g><g><rect fill="white" stroke="none" x="781.6628665115788" y="2650.390162390726" width="157.3391269514453" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="784.3016301215788" y="2666.222744050726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_connection_read( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 393.5464140070703 2673.259447010726 L 1312.6345657081993 2673.259447010726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1327.1184459675326,2673.259447010726) translate(-1327.1184459675326,-2673.259447010726)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1312.4586481341992 2665.9295480940596 L 1327.1184459675326 2673.259447010726 L 1312.4586481341992 2680.5893459273925 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 393.5464140070703 2737.469361520726 L 402.3422927070703 2737.469361520726 M 402.3422927070703 2715.479664770726 L 402.3422927070703 2715.479664770726 A 15.832581659999999 15.832581659999999 0 0 1 418.17487436707034 2699.647083110726 L 925.151061698711 2699.647083110726 L 925.151061698711 2699.647083110726 A 15.832581659999999 15.832581659999999 0 0 1 940.983643358711 2715.479664770726 L 940.983643358711 2759.459058270726 L 940.983643358711 2759.459058270726 A 15.832581659999999 15.832581659999999 0 0 1 925.151061698711 2775.291639930726 L 418.17487436707034 2775.291639930726 L 418.17487436707034 2775.291639930726 A 15.832581659999999 15.832581659999999 0 0 1 402.3422927070703 2759.459058270726 L 402.3422927070703 2715.479664770726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="426.9707530670703" y="2724.275543470726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">queue_event( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="426.9707530670703" y="2741.867300870726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   save the new data from connection,and decode it as closure.</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="426.9707530670703" y="2759.459058270726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   </text><g><rect fill="pink" stroke="none" x="439.9843333893359" y="2746.441157794726" width="476.370849609375" height="17.767674974"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="439.9843333893359" y="2759.459058270726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_list_insert(queue-&gt;event_list.prev, &amp;closure-&gt;link)&lt;background&gt;</text></g><g><g><rect fill="rgb(231,235,238)" stroke="none" x="788.3486270096257" y="2875.5646571107254" width="143.96760595535156" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="790.9873906196257" y="2891.3972387707254" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_closure_invoke( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 393.5464140070703 2898.4339417307256 L 1312.6345657081993 2898.4339417307256" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1327.1184459675326,2898.4339417307256) translate(-1327.1184459675326,-2898.4339417307256)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1312.4586481341992 2891.104042814059 L 1327.1184459675326 2898.4339417307256 L 1312.4586481341992 2905.763840647392 Z"/></g></g><g><g><rect fill="rgb(231,235,238)" stroke="none" x="585.811746386364" y="2924.8215778307253" width="252.24961889480468" height="22.86928462"/></g><g><rect fill="yellow" stroke="none" x="588.450509996364" y="2927.6362590147255" width="19.885467529296875" height="17.767674974"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="588.450509996364" y="2940.6541594907253" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">FFI</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="608.3359775256608" y="2940.6541594907253" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> ==&gt; object-&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="709.703195543239" y="2940.6541594907253" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">implementation( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1327.1184459675326 2947.6908624507255 L 111.23854595933334 2947.6908624507255" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(96.7546657,2947.6908624507255) translate(-96.7546657,-2947.6908624507255)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 111.41446353333333 2940.360963534059 L 96.7546657 2947.6908624507255 L 111.41446353333333 2955.020761367392 Z"/></g></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 3041.220372627392 L 1660.2041213 3041.220372627392 M 8.7958787 3047.084291760725 L 1660.2041213 3047.084291760725 M 8.7958787 3052.9482108940583 L 1660.2041213 3052.9482108940583" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><g><rect fill="white" stroke="none" x="495.0305595784375" y="3093.7024488707248" width="132.92965734695312" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="497.6693231884375" y="3109.5350305307247" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_registry_bind( )</text></g><g><path fill="none" stroke="blue" paint-order="fill stroke markers" d=" M 96.7546657 3116.571733490725 L 1011.7522305444948 3116.571733490725" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1026.236110803828,3116.571733490725) translate(-1026.236110803828,-3116.571733490725)"><path fill="blue" stroke="none" paint-order="stroke fill markers" d=" M 1011.5763129704948 3109.2418345740584 L 1026.236110803828 3116.571733490725 L 1011.5763129704948 3123.9016324073914 Z"/></g></g><g><g><rect fill="white" stroke="none" x="596.2876747829492" y="3142.9593695907247" width="209.615417845" height="22.86928462"/></g><g><rect fill="pink" stroke="none" x="598.9264383929492" y="3145.774050774725" width="162.87045288085938" height="17.767674974"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="598.9264383929492" y="3158.7919512507247" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_proxy_marshal_flags</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="761.7968912738086" y="3158.7919512507247" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="766.6931009906054" y="3158.7919512507247" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">bind</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="798.3681193011523" y="3158.7919512507247" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1026.236110803828 3165.828654210725 L 390.43853686640364 3165.828654210725" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(375.9546566070703,3165.828654210725) translate(-375.9546566070703,-3165.828654210725)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 390.6144544404037 3158.4987552940584 L 375.9546566070703 3165.828654210725 L 390.6144544404037 3173.1585531273913 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 233.72776942822267 3208.0488719707246 L 233.72776942822267 3208.0488719707246 A 15.832581659999999 15.832581659999999 0 0 1 249.56035108822266 3192.2162903107246 L 502.3489621259179 3192.2162903107246 L 502.3489621259179 3192.2162903107246 A 15.832581659999999 15.832581659999999 0 0 1 518.1815437859179 3208.0488719707246 L 518.1815437859179 3252.028265470725 L 518.1815437859179 3252.028265470725 A 15.832581659999999 15.832581659999999 0 0 1 502.3489621259179 3267.860847130725 L 249.56035108822266 3267.860847130725 L 249.56035108822266 3267.860847130725 A 15.832581659999999 15.832581659999999 0 0 1 233.72776942822267 3252.028265470725 L 233.72776942822267 3208.0488719707246" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="258.35622978822266" y="3216.844750670725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. wl_argument_from_va_list( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="258.35622978822266" y="3234.436508070725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. wl_proxy_marshal_array_flags( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="258.35622978822266" y="3252.028265470725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">.......</text></g><g><g><rect fill="white" stroke="none" x="625.1101464016016" y="3294.2484832307246" width="151.9704746076953" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="627.7489100116015" y="3310.0810648907245" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_proxy *new_proxy</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 375.9546566070703 3317.1177678507247 L 1024.0371411288281 3317.1177678507247" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(1026.236110803828,3317.1177678507247) translate(-1026.236110803828,-3317.1177678507247)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1011.1643091605391 3310.3941090200533 L 1024.5880955640055 3317.1177678507247 L 1011.1643091605391 3323.841426681396" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><g><rect fill="white" stroke="none" x="485.5101509480664" y="3343.5054039507245" width="151.9704746076953" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="488.1489145580664" y="3359.3379856107244" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_proxy *new_proxy</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1026.236110803828 3366.3746885707246 L 111.23854595933334 3366.3746885707246" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(96.7546657,3366.3746885707246) translate(-96.7546657,-3366.3746885707246)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 111.41446353333333 3359.044789654058 L 96.7546657 3366.3746885707246 L 111.41446353333333 3373.704587487391 Z"/></g></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 123.14230180000001 187.54412639072729 L 628.7670114141406 187.54412639072729 L 628.7670114141406 469.01224479072727 L 123.14230180000001 469.01224479072727 L 123.14230180000001 187.54412639072729 Z" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 123.14230180000001 187.54412639072729 L 123.14230180000001 208.65423527072727 L 173.42931696621093 208.65423527072727 L 183.98437140621093 198.09918083072728 L 183.98437140621093 187.54412639072729 L 123.14230180000001 187.54412639072729" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="140.73405920000002" y="201.61753231072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="198.93736519621092" y="188.95146698272725" width="153.59774816726562" height="18.295427696"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="201.57612880621093" y="201.61753231072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[env WAYLAND_SOCKET]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 123.14230180000001 319.4823068907273 L 628.7670114141406 319.4823068907273" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray="4.39793935"/></g><g/></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 305.5876270070703 843.7166774107275 L 1652.3537583152279 843.7166774107275 L 1652.3537583152279 1698.676087050727 L 305.5876270070703 1698.676087050727 L 305.5876270070703 843.7166774107275 Z" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><path fill="pink" stroke="black" paint-order="fill stroke markers" d=" M 305.5876270070703 843.7166774107275 L 305.5876270070703 864.8267862907275 L 492.01802901410156 864.8267862907275 L 502.57308345410155 854.2717318507275 L 502.57308345410155 843.7166774107275 L 305.5876270070703 843.7166774107275" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><text fill="blue" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="323.1793844070703" y="857.7900833307275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_proxy_marshal_flags( )</text></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 17.591757400000006 2434.011546370726 L 1406.2813542675326 2434.011546370726 L 1406.2813542675326 3000.466134650725 L 17.591757400000006 3000.466134650725 L 17.591757400000006 2434.011546370726 Z" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 17.591757400000006 2434.011546370726 L 17.591757400000006 2455.1216552507262 L 79.47703916777344 2455.1216552507262 L 90.03209360777345 2444.566600810726 L 90.03209360777345 2434.011546370726 L 17.591757400000006 2434.011546370726" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="35.183514800000005" y="2448.084952290726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">loop</text><g><rect fill="white" stroke="none" x="104.98508739777346" y="2435.418886962726" width="160.34472692703125" height="18.295427696"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="107.62385100777345" y="2448.084952290726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[ret&gt;=0 &amp; !callback_done]</text></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 314.3835057070703 2602.892417410726 L 1388.6895968675326 2602.892417410726 L 1388.6895968675326 2801.6792760307258 L 314.3835057070703 2801.6792760307258 L 314.3835057070703 2602.892417410726 Z" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 314.3835057070703 2602.892417410726 L 314.3835057070703 2624.002526290726 L 603.5601235344141 2624.002526290726 L 614.1151779744141 2613.447471850726 L 614.1151779744141 2602.892417410726 L 314.3835057070703 2602.892417410726" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="331.9752631070703" y="2616.965823330726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_display_read_events( ) --&gt;read_events( )</text></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 35.18351480000001 2828.0669121307255 L 1388.6895968675326 2828.0669121307255 L 1388.6895968675326 2974.0784985507253 L 35.18351480000001 2974.0784985507253 L 35.18351480000001 2828.0669121307255 Z" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><path fill="#8899aa" stroke="black" paint-order="fill stroke markers" d=" M 35.18351480000001 2828.0669121307255 L 35.18351480000001 2849.1770210107256 L 541.7370857523438 2849.1770210107256 L 552.2921401923438 2838.6219665707254 L 552.2921401923438 2828.0669121307255 L 35.18351480000001 2828.0669121307255" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="52.77527220000001" y="2842.1403180507255" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_display_dispatch_queue_pending( ) --&gt;dispatch_queue( )--&gt;dispatch_event( )</text></g></g></g></g></g></g></g></svg>