<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="948" height="634"><desc>title%20wayland_input%0A%0A%0Aparticipant%20udev%0A%0Aparticipant%20libinput_seat%0A%0Aparticipant%20Weston%0A%0A%0A%0Arbox%20left%20of%20libinput_seat%3A1.%20libinput_udev_create_context()%20%20%5C-%5C-%3E%3Ccolor%3A%23green%3Elibinput%3C%2Fcolor%3E%5Cn2.%20libinput_get_fd(%3Ccolor%3A%23green%3Elibinput%3C%2Fcolor%3E)%20%5C-%5C-%3E%20%3Ccolor%3A%23red%3Efd%3C%2Fcolor%3E%0Alibinput_seat%20-%3E%20Weston%3Awl_event_loop_add_fd(%3Ccolor%3A%23red%3Efd%3C%2Fcolor%3E)%0Audev%20-%3Elibinput_seat%3ADevice%20add%2Fremove%5CnInput%20event%0A%0A%0Arbox%20right%20of%20libinput_seat%3A%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%5Cn%5Cnlibinput_source_dispatch(%20)%5Cn%20%20%20%20%20%20%20%20%20%20udev_input_dispatch(%20)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20process_events(%20)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20process_event(%20)%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20udev_input_process_event(%20)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ccolor%3A%23red%3Evice_added%3C%2Fcolor%3E()%20or%20%3Ccolor%3A%23red%3Edevice_removed(%20)%3C%2Fcolor%3E%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20evdev_device_process_event(%20)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ccolor%3A%23red%3Ehandle_keyboard_key(%20)%3C%2Fcolor%3E</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="948" height="634"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 45.0948266533164 103.10369087072726 L 45.0948266533164 634.3747643507273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 427.56269117468355 103.10369087072726 L 427.56269117468355 634.3747643507273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 894.4111861892147 103.10369087072726 L 894.4111861892147 634.3747643507273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.795878699999996 55.60594589072727 L 81.3937746066328 55.60594589072727 L 81.3937746066328 103.10369087072726 L 8.795878699999996 103.10369087072726 L 8.795878699999996 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="27.882935478999997" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">udev</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 363.876505672539 55.60594589072727 L 491.24887667682805 55.60594589072727 L 491.24887667682805 103.10369087072726 L 363.876505672539 103.10369087072726 L 363.876505672539 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="382.963562451539" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">libinput_seat</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 848.6562598423436 55.60594589072727 L 940.1661125360858 55.60594589072727 L 940.1661125360858 103.10369087072726 L 848.6562598423436 103.10369087072726 L 848.6562598423436 55.60594589072727 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="867.7433166213436" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Weston</text></g></g><g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16pt" font-style="normal" font-weight="normal" text-decoration="normal" x="400.36572265625" y="26.547561167272725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wayland_input</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 427.56269117468355 167.31360538072727 L 418.76681247468355 167.31360538072727 M 53.89070535331638 154.11978733072726 L 53.89070535331638 154.11978733072726 A 15.832581659999999 15.832581659999999 0 0 1 69.72328701331638 138.28720567072727 L 402.93423081468353 138.28720567072727 L 402.93423081468353 138.28720567072727 A 15.832581659999999 15.832581659999999 0 0 1 418.76681247468355 154.11978733072726 L 418.76681247468355 180.50742343072727 L 418.76681247468355 180.50742343072727 A 15.832581659999999 15.832581659999999 0 0 1 402.93423081468353 196.34000509072726 L 69.72328701331638 196.34000509072726 L 69.72328701331638 196.34000509072726 A 15.832581659999999 15.832581659999999 0 0 1 53.89070535331638 180.50742343072727 L 53.89070535331638 154.11978733072726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="78.51916571331637" y="162.9156660307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. libinput_udev_create_context()  --&gt;</text><text fill="green" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="340.17987127972265" y="162.9156660307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">libinput</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="78.51916571331637" y="180.5074234307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. libinput_get_fd(</text><text fill="green" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="204.59648199749606" y="180.5074234307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">libinput</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="258.55494757366796" y="180.5074234307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">) --&gt; </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="295.68450995159765" y="180.5074234307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">fd</text></g><g><g><rect fill="white" stroke="none" x="569.3646087877695" y="222.72764119072727" width="183.24465978835937" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="572.0033723977695" y="238.56022285072729" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_event_loop_add_fd(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="730.6147310403476" y="238.56022285072729" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">fd</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="745.074295249332" y="238.56022285072729" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 427.56269117468355 245.59692581072727 L 879.9273059298814 245.59692581072727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(894.4111861892147,245.59692581072727) translate(-894.4111861892147,-245.59692581072727)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 879.7513883558814 238.2670268940606 L 894.4111861892147 245.59692581072727 L 879.7513883558814 252.92682472739395 Z"/></g></g><g><g><rect fill="white" stroke="none" x="165.2433018835898" y="271.9845619107273" width="142.1709140608203" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="165.2433018835898" y="289.5763193107273" width="85.54953039382812" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="167.8820654935898" y="287.8171435707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Device add/remove</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="167.8820654935898" y="305.4089009707273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Input event</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 45.0948266533164 312.44560393072726 L 413.07881091535023 312.44560393072726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(427.56269117468355,312.44560393072726) translate(-427.56269117468355,-312.44560393072726)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 412.9028933413502 305.1157050140606 L 427.56269117468355 312.44560393072726 L 412.9028933413502 319.7755028473939 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 427.56269117468355 455.8184267407273 L 436.35856987468355 455.8184267407273 M 436.35856987468355 354.6658216907273 L 436.35856987468355 354.6658216907273 A 15.832581659999999 15.832581659999999 0 0 1 452.19115153468357 338.83324003072727 L 869.7827258292148 338.83324003072727 L 869.7827258292148 338.83324003072727 A 15.832581659999999 15.832581659999999 0 0 1 885.6153074892147 354.6658216907273 L 885.6153074892147 556.9710317907274 L 885.6153074892147 556.9710317907274 A 15.832581659999999 15.832581659999999 0 0 1 869.7827258292148 572.8036134507273 L 452.19115153468357 572.8036134507273 L 452.19115153468357 572.8036134507273 A 15.832581659999999 15.832581659999999 0 0 1 436.35856987468355 556.9710317907274 L 436.35856987468355 354.6658216907273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="460.9870302346835" y="363.46170039072734" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">事件处理</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="460.9870302346835" y="398.64521519072736" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">libinput_source_dispatch( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="460.9870302346835" y="416.23697259072736" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">          udev_input_dispatch( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="460.9870302346835" y="433.82872999072737" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                       process_events( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="460.9870302346835" y="451.4204873907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                            process_event( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="460.9870302346835" y="486.6040021907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                                udev_input_process_event( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="460.9870302346835" y="504.1957595907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                                     </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="621.4878542092929" y="504.1957595907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">vice_added</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="699.877289023746" y="504.1957595907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">() or </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="733.2631075051913" y="504.1957595907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">device_removed( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="460.9870302346835" y="539.3792743907273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                                 evdev_device_process_event( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="460.9870302346835" y="556.9710317907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                                      </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="625.8257143167148" y="556.9710317907274" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">handle_keyboard_key( )</text></g></g><g/><g/><g/></g></svg>