<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1282" height="2847"><desc>title%20Server%20APIs%0A%0Aparticipant%20%22Weston%22%20as%20w%0Aparticipant%20%22Wayland-util.c%22%20as%20wu%0Aparticipant%20%22Connection.c%22%20as%20cn%0Aparticipant%20%22Wayland-server.c%22%20as%20ws%0Aparticipant%20%22event-loop.c%22%20as%20el%0Aw-%23blue%3Ews%3Awl_display_create(%20)%0Aws%20-%3Eel%3A1.wl_event_loop_create(%20)%0Ael--%3E%3Ews%3A%20struct%20wl_event_loop%20*loop%20%2F%2F%3Ccolor%3A%23red%3Eepoll_fd%3C%2Fcolor%3E%0Arbox%20over%20ws%3Acreate%20eventfd%20for%20%2F%2F%3Ccolor%3A%23red%3Eterminated_efd%3C%2Fcolor%3E%5Cnset%20handle%20func%20%2F%2F%3Ccolor%3A%23red%3Ehandle_display_terminate%3C%2Fcolor%3E%5Cn%5CnFunc%20wl_display_terminate(%20)%20will%20write%20it%0A%0Aw-%23blue%3Ews%3Aweston_create_listening_socket(%20)%20%5C-%5C-%3Ewl_display_add_socket(%3Ccolor%3A%23red%3E%2F%2Fname%3C%2Fcolor%3E)%0Arbox%20over%20ws%3A_wl_display_add_socket(%20)%5Cn%20%20%2F%2F1.wl_os_socket_cloexec(%20)%20%20%5C%2F%5C%2F%20create%20socket%5Cn%20%20%2F%2F2.%3Ccolor%3A%23red%3Elisten%20fd%3C%2Fcolor%3E%5Cn%20%20%2F%2F3.%20wl_event_loop_add_fd(%20)%20%5C%2F%5C%2F%20handle%20func%20%3Ccolor%3A%23red%3Esocket_data%3C%2Fcolor%3E%5Cn%0A%0A%3D%3DClient%20%5C-%5C-%3E%20wl_display_connect(%20)%20%20%5C-%5C-%3E%20connect(fd)%3D%3D%23pink%0A%0Ael-%23steelblue%3Ews%3Asocket_data(%20)%20%5Cn%3Ccolor%3A%23red%3E%2F%2Fa%20new%20connecting%20request%20comming%3C%2Fcolor%3E%0Arbox%20over%20ws%3A1.%20accept()%5Cn2.%20wl_client_create(%3Ccolor%3A%23red%3Eclient_fd%3C%2Fcolor%3E)%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20a.%20wl_event_loop_add_fd(%3Ccolor%3A%23red%3Eclient_fd%3C%2Fcolor%3E)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%2F%5C%2F%20handle%20func%20%3Cbackground%3A%23yellow%3Ewl_client_connection_data%3C%2Fbackground%3E%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20b.%20wl_map_init(%20)%20%5C%2F%5C%2F%20create%20map%20for%20this%20client%20to%20save%20objects%5Cn%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20c.%20bind_display(%20)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20c.1.%20wl_resource_create(%20)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20c.2.%20wl_resource_set_implementation(%20)%0A%0A%3D%3DClient%20call%20some%20wl_xxx_func%3D%3D%23pink%0A%0Ael-%23steelblue%3Ews%3A%3Cbackground%3A%23yellow%3Ewl_client_connection_data%3C%2Fbackground%3E(%20)%5Cn%2F%2F%20%3Ccolor%3A%23red%3Enew%20client%20data%20comming%3C%2Fcolor%3E%0Aws-%3Ecn%3Awl_connection_read()%5Cn%20%20%2F%2F1.%20read%20msg%20%20%5C-%5C-%3E%3Ccolor%3A%23red%3Econnection-%3Ein%3C%2Fcolor%3E%5Cn%20%20%2F%2F2.%20decode_cmsg()%20%5C-%5C-%3E%20%3Ccolor%3A%23red%3Econnection-%3Efds_in%3C%2Fcolor%3E%0Aloop%20%23steelblue%0Aws-%3Ecn%3Awl_connection_copy(%20)%5Cn%20%20%2F%2F%20copy%20some%20data%20to%20get%20%3Ccolor%3A%23red%3Eobject%20id%3C%2Fcolor%3E%0Aws-%3Ewu%3Awl_map_lookup(%3Ccolor%3A%23red%3Eobject%20id%3C%2Fcolor%3E)%0Awu--%3E%3Ews%3Awl_resource%0Aws-%3Ecn%3Awl_connection_%3Ccolor%3A%23red%3Edemarshal%3C%2Fcolor%3E(%20)%5Cn%20%20%20%5C%2F%5C%2F%3Ccolor%3A%23blue%3E%20decode%20the%20args%20data%3C%2Fcolor%3E%0Acn--%3E%3Ews%3Awl_closure%0Aws-%3Ecn%3Awl_closure_invoke(%20)%0Acn-%3Ew%3A%3Cbackground%3A%23yellow%3EFFI%3C%2Fbackground%3E%20%3D%3D%3E%20target-%3E%3Ccolor%3A%23red%3Eimplementation%3C%2Fcolor%3E%20func%0Aend%20%0A%0A%3D%3DCompositor%20create%20global%20object%20when%20it's%20launched%3D%3D%20%23AABBFF%0Aw-%23blue%3Ews%3Awl_global_create(%20)%0Arbox%20over%20ws%3A1.%20malloc(%20)%5C-%5C-%3Ewl_global%5Cn2.%20insert%20display-%3E%3Ccolor%3A%23red%3Eglobal_list%3C%2Fcolor%3E%0Aloop%20%23550055%20display-%3Eregistry_resource_list%20%0Aws-%3Ews%3Awl_resource_post_event(%20)%0Aactivate%20ws%0Aws-%3Ecn%3Awl_argument_from_va_list(%20)%0Acn--%3E%3Ews%3A%20union%20wl_argument%0Aws-%3Ews%3Awl_resource_post_event_array(%20)%5Cn%5C-%5C-%3Ehandle_array(%20)%0Aactivate%20ws%0Aws-%3Ecn%3Awl_closure_marshal(%20)%0Aws-%3Ecn%3Awl_closure_send(%20)%0Arbox%20over%20cn%3A1.%20copy_fds_to_connection(%20)%5Cn%20%20%20%20wl_connection_put_fd(%20)%20-%20-%3E%20%3Ccolor%3A%23red%3Econnection-%3Efds_out%3C%2Fcolor%3E%20%5C%2F%5C%2Fring_buffer%5Cn%5Cn2.%20serialize_closure(%20)%5Cn3.%20wl_connection_write(%20)%5Cn%20%20%20%20%20%20-%20-%3E%3Ccolor%3A%23red%3Econnection-%3Eout%3C%2Fcolor%3E%20%5C%2F%5C%2Fring_buffer%0Adeactivate%20ws%0Adeactivateafter%20ws%0Aend%20%0A%0A%3D%3Dbind%20func(%20)%20will%20trigger%20resource%20create%3D%3D%20%23AABBFF%0Aw-%23blue%3Ews%3Awl_resource_create(%3Ccolor%3A%23red%3Eclient%3C%2Fcolor%3E)%0Arbox%20over%20ws%3A1.%20malloc(%20)%20%5C-%5C-%3Ewl_resource%5Cn2.%20insert%20map%20%3Ccolor%3A%23red%3Eclient-%3Eobjects%3C%2Fcolor%3E%5Cn3.%20wl_priv_signal_emit(%3Ccolor%3A%23red%3Eclient-%3Eresource_created_signal%3C%2Fcolor%3E)%0Aws--%3E%3Ew%3A%20wl_resource%0A%0Aw-%23blue%3Ews%3Awl_resource_set_implementation(%20)%0Arbox%20over%20ws%3Asave%20implementation%20to%20%3Ccolor%3A%23red%3Eobject-%3Eimplementation%3C%2Fcolor%3E</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1282" height="2847"/></g><g><rect fill="rgb(218,230,240)" stroke="none" x="17.591757400000006" y="1186.7559467107267" width="939.1589559503848" height="427.4797048199996"/><rect fill="rgb(221,204,221)" stroke="none" x="276.6670864723509" y="1841.169321990726" width="888.9785608281642" height="561.1770610599997"/></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 79.1629083 103.10369087072726 L 79.1629083 2847.417845270725" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 259.0753290723509 103.10369087072726 L 259.0753290723509 2847.417845270725" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 540.3312479200462 103.10369087072726 L 540.3312479200462 2847.417845270725" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 895.1795624503848 103.10369087072726 L 895.1795624503848 2847.417845270725" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1211.3863624922467 103.10369087072726 L 1211.3863624922467 2847.417845270725" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 33.4079819531289 55.781863464727266 L 124.91783464687109 55.781863464727266 L 124.91783464687109 103.10369087072726 L 33.4079819531289 103.10369087072726 L 33.4079819531289 55.781863464727266 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="52.495038732128904" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Weston</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 189.92384205653445 55.781863464727266 L 328.2268160881673 55.781863464727266 L 328.2268160881673 103.10369087072726 L 189.92384205653445 103.10369087072726 L 189.92384205653445 55.781863464727266 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="209.01089883553448" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Wayland-util.c</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 475.51404282561646 55.781863464727266 L 605.1484530144758 55.781863464727266 L 605.1484530144758 103.10369087072726 L 475.51404282561646 103.10369087072726 L 475.51404282561646 55.781863464727266 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="494.6010996046165" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Connection.c</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 816.4074623364238 55.781863464727266 L 973.9516625643457 55.781863464727266 L 973.9516625643457 103.10369087072726 L 816.4074623364238 103.10369087072726 L 816.4074623364238 55.781863464727266 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="835.4945191154238" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Wayland-server.c</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1148.806103503774 55.781863464727266 L 1273.9666214807194 55.781863464727266 L 1273.9666214807194 103.10369087072726 L 1148.806103503774 103.10369087072726 L 1148.806103503774 55.781863464727266 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1167.893160282774" y="85.51193347072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">event-loop.c</text></g></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 886.3836837503848 1934.4056362107262 L 903.9754411503848 1934.4056362107262 L 903.9754411503848 2388.272977130726 L 886.3836837503848 2388.272977130726 L 886.3836837503848 1934.4056362107262" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 895.1795624503848 2122.637440390726 L 912.7713198503848 2122.637440390726 L 912.7713198503848 2375.958746950726 L 895.1795624503848 2375.958746950726 L 895.1795624503848 2122.637440390726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16pt" font-style="normal" font-weight="normal" text-decoration="normal" x="583.3476028442383" y="26.547561167272725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Server APIs</text></g><g><g><rect fill="white" stroke="none" x="417.152367700251" y="138.28720567072727" width="140.0377353498828" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="419.791131310251" y="154.1197873307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_display_create( )</text></g><g><path fill="none" stroke="blue" paint-order="fill stroke markers" d=" M 79.1629083 161.15649029072728 L 880.6956821910514 161.15649029072728" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(895.1795624503848,161.15649029072728) translate(-895.1795624503848,-161.15649029072728)"><path fill="blue" stroke="none" paint-order="stroke fill markers" d=" M 880.5197646170515 153.8265913740606 L 895.1795624503848 161.15649029072728 L 880.5197646170515 168.48638920739396 Z"/></g></g><g><g><rect fill="white" stroke="none" x="963.1925005580932" y="187.54412639072726" width="180.1809238264453" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="965.8312641680932" y="203.37670805072727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1.wl_event_loop_create( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 895.1795624503848 210.41341101072726 L 1196.9024822329134 210.41341101072726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1211.3863624922467,210.41341101072726) translate(-1211.3863624922467,-210.41341101072726)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1196.7265646589133 203.08351209406058 L 1211.3863624922467 210.41341101072726 L 1196.7265646589133 217.74330992739394 Z"/></g></g><g><g><rect fill="white" stroke="none" x="927.4588045742065" y="236.80104711072724" width="251.64831579421875" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="930.0975681842065" y="252.63362877072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">struct wl_event_loop *loop </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="1120.6344181597924" y="252.63362877072726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">epoll_fd</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1211.3863624922467 259.67033173072724 L 897.3785321253847 259.67033173072724" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(895.1795624503848,259.67033173072724) translate(-895.1795624503848,-259.67033173072724)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 910.2513640936737 252.94667290005583 L 896.8275776902072 259.67033173072724 L 910.2513640936737 266.3939905613986" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 725.7551121001504 301.89054949072727 L 725.7551121001504 301.89054949072727 A 15.832581659999999 15.832581659999999 0 0 1 741.5876937601504 286.05796783072725 L 1048.7714311406191 286.05796783072725 L 1048.7714311406191 286.05796783072725 A 15.832581659999999 15.832581659999999 0 0 1 1064.604012800619 301.89054949072727 L 1064.604012800619 363.46170039072723 L 1064.604012800619 363.46170039072723 A 15.832581659999999 15.832581659999999 0 0 1 1048.7714311406191 379.29428205072725 L 741.5876937601504 379.29428205072725 L 741.5876937601504 379.29428205072725 A 15.832581659999999 15.832581659999999 0 0 1 725.7551121001504 363.46170039072723 L 725.7551121001504 301.89054949072727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="750.3835724601504" y="310.6864281907273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">create eventfd for </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="879.4100464591738" y="310.6864281907273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">terminated_efd</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="750.3835724601504" y="328.27818559072733" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">set handle func </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="862.2232178458926" y="328.27818559072733" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">handle_display_terminate</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="750.3835724601504" y="363.46170039072734" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Func wl_display_terminate( ) will write it</text></g><g><g><rect fill="white" stroke="none" x="252.29550277105176" y="405.68191815072726" width="469.7514652082813" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="254.93426638105177" y="421.5144998107273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">weston_create_listening_socket( ) --&gt;wl_display_add_socket(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="675.3208630607393" y="421.5144998107273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">name</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="714.5119946525361" y="421.5144998107273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><path fill="none" stroke="blue" paint-order="fill stroke markers" d=" M 79.1629083 428.55120277072723 L 880.6956821910514 428.55120277072723" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(895.1795624503848,428.55120277072723) translate(-895.1795624503848,-428.55120277072723)"><path fill="blue" stroke="none" paint-order="stroke fill markers" d=" M 880.5197646170515 421.2213038540606 L 895.1795624503848 428.55120277072723 L 880.5197646170515 435.8811016873939 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 678.7293476348184 470.77142053072726 L 678.7293476348184 470.77142053072726 A 15.832581659999999 15.832581659999999 0 0 1 694.5619292948184 454.93883887072724 L 1095.7971956059512 454.93883887072724 L 1095.7971956059512 454.93883887072724 A 15.832581659999999 15.832581659999999 0 0 1 1111.6297772659511 470.77142053072726 L 1111.6297772659511 549.9343288307273 L 1111.6297772659511 549.9343288307273 A 15.832581659999999 15.832581659999999 0 0 1 1095.7971956059512 565.7669104907272 L 694.5619292948184 565.7669104907272 L 694.5619292948184 565.7669104907272 A 15.832581659999999 15.832581659999999 0 0 1 678.7293476348184 549.9343288307273 L 678.7293476348184 470.77142053072726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="703.3578079948184" y="479.5672992307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">_wl_display_add_socket( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="703.3578079948184" y="497.1590566307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="712.0335282096621" y="497.1590566307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1.wl_os_socket_cloexec( )  // create socket</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="703.3578079948184" y="514.7508140307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="712.0335282096621" y="514.7508140307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2.</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="724.1595200309512" y="514.7508140307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">listen fd</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="703.3578079948184" y="532.3425714307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="712.0335282096621" y="532.3425714307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. wl_event_loop_add_fd( ) // handle func </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="1004.4816178092715" y="532.3425714307273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">socket_data</text></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 606.5211484673939 L 1273.2041213 606.5211484673939 M 8.7958787 612.3850676007272 L 1273.2041213 612.3850676007272 M 8.7958787 618.2489867340605 L 1273.2041213 618.2489867340605" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="pink" stroke="black" paint-order="fill stroke markers" d=" M 447.792422818711 592.1545465907271 L 834.207577181289 592.1545465907271 L 834.207577181289 632.6155886107272 L 447.792422818711 632.6155886107272 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="472.42088317871094" y="616.7830069507272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Client --&gt; wl_display_connect( )  --&gt; connect(fd)</text></g><g><g><rect fill="white" stroke="none" x="924.7923540737182" y="659.0032247107271" width="106.26535070632812" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="924.7923540737182" y="676.5949821107271" width="256.98121679519534" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="927.4311176837182" y="674.835806370727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">socket_data( ) </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="927.4311176837182" y="692.427563770727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">a new connecting request comming</text></g><g><path fill="none" stroke="steelblue" paint-order="fill stroke markers" d=" M 1211.3863624922467 699.4642667307271 L 909.6634427097181 699.4642667307271" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(895.1795624503848,699.4642667307271) translate(-895.1795624503848,-699.4642667307271)"><path fill="steelblue" stroke="none" paint-order="stroke fill markers" d=" M 909.8393602837181 692.1343678140604 L 895.1795624503848 699.4642667307271 L 909.8393602837181 706.7941656473938 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 633.2569813018106 741.6844844907271 L 633.2569813018106 741.6844844907271 A 15.832581659999999 15.832581659999999 0 0 1 649.0895629618105 725.8519028307271 L 1141.2695619389592 725.8519028307271 L 1141.2695619389592 725.8519028307271 A 15.832581659999999 15.832581659999999 0 0 1 1157.1021435989592 741.6844844907271 L 1157.1021435989592 926.3979371907271 L 1157.1021435989592 926.3979371907271 A 15.832581659999999 15.832581659999999 0 0 1 1141.2695619389592 942.2305188507271 L 649.0895629618105 942.2305188507271 L 649.0895629618105 942.2305188507271 A 15.832581659999999 15.832581659999999 0 0 1 633.2569813018106 926.3979371907271 L 633.2569813018106 741.6844844907271" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="657.8854416618105" y="750.4803631907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. accept()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="657.8854416618105" y="768.0721205907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. wl_client_create(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="788.6513870963809" y="768.0721205907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">client_fd</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="847.6492508659121" y="768.0721205907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="657.8854416618105" y="803.2556353907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">            a. wl_event_loop_add_fd(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="884.521046520209" y="803.2556353907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">client_fd</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="943.5189102897402" y="803.2556353907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="657.8854416618105" y="820.8473927907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                      // handle func </text><g><rect fill="yellow" stroke="none" x="857.1193741569277" y="807.8294923147271" width="182.32644653320312" height="17.767674974"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="857.1193741569277" y="820.8473927907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_client_connection_data</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="657.8854416618105" y="856.0309075907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">             b. wl_map_init( ) // create map for this client to save objects</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="657.8854416618105" y="873.6226649907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="657.8854416618105" y="891.2144223907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">             c. bind_display( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="657.8854416618105" y="908.8061797907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                    c.1. wl_resource_create( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="657.8854416618105" y="926.3979371907271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">                    c.2. wl_resource_set_implementation( )</text></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 982.9847568273938 L 1273.2041213 982.9847568273938 M 8.7958787 988.8486759607271 L 1273.2041213 988.8486759607271 M 8.7958787 994.7125950940604 L 1273.2041213 994.7125950940604" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="pink" stroke="black" paint-order="fill stroke markers" d=" M 518.2398257728125 968.618154950727 L 763.7601742271875 968.618154950727 L 763.7601742271875 1009.079196970727 L 518.2398257728125 1009.079196970727 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="542.8682861328125" y="993.2466153107271" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Client call some wl_xxx_func</text></g><g><g><rect fill="white" stroke="none" x="952.4158358242065" y="1035.466833070727" width="201.73425329421875" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="952.4158358242065" y="1053.058590470727" width="187.02413976882812" height="22.86928462"/></g><g><rect fill="yellow" stroke="none" x="955.0545994342065" y="1038.281514254727" width="182.32644653320312" height="17.767674974"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="955.0545994342065" y="1051.299414730727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_client_connection_data</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1137.3810459674096" y="1051.299414730727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="955.0545994342065" y="1068.891172130727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="959.3924595416283" y="1068.891172130727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">new client data comming</text></g><g><path fill="none" stroke="steelblue" paint-order="fill stroke markers" d=" M 1211.3863624922467 1075.927875090727 L 909.6634427097181 1075.927875090727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(895.1795624503848,1075.927875090727) translate(-895.1795624503848,-1075.927875090727)"><path fill="steelblue" stroke="none" paint-order="stroke fill markers" d=" M 909.8393602837181 1068.5979761740602 L 895.1795624503848 1075.927875090727 L 909.8393602837181 1083.2577740073937 Z"/></g></g><g><g><rect fill="white" stroke="none" x="565.5461001933796" y="1102.315511190727" width="153.00126684402343" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="565.5461001933796" y="1119.907268590727" width="236.35127294753906" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="565.5461001933796" y="1137.499025990727" width="304.4186099836719" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="568.1848638033796" y="1118.148092850727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_connection_read()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="568.1848638033796" y="1135.739850250727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="576.8605840182233" y="1135.739850250727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. read msg  --&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="690.9837071871686" y="1135.739850250727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">connection-&gt;in</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="568.1848638033796" y="1153.331607650727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="576.8605840182233" y="1153.331607650727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. decode_cmsg() --&gt; </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="731.234287021153" y="1153.331607650727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">connection-&gt;fds_in</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 895.1795624503848 1160.368310610727 L 554.8151281793795 1160.368310610727" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(540.3312479200462,1160.368310610727) translate(-540.3312479200462,-1160.368310610727)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 554.9910457533795 1153.0384116940602 L 540.3312479200462 1160.368310610727 L 554.9910457533795 1167.6982095273936 Z"/></g></g><g><g><rect fill="rgb(218,230,240)" stroke="none" x="596.6843066753132" y="1234.2536916907268" width="159.9447177717578" height="22.86928462"/></g><g><rect fill="rgb(218,230,240)" stroke="none" x="596.6843066753132" y="1251.8454490907268" width="242.14219701980468" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="599.3230702853132" y="1250.0862733507267" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_connection_copy( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="599.3230702853132" y="1267.6780307507267" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="607.9987905001569" y="1267.6780307507267" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> copy some data to get </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="italic" font-weight="normal" text-decoration="normal" x="774.8420064425397" y="1267.6780307507267" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">object id</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 895.1795624503848 1274.7147337107267 L 554.8151281793795 1274.7147337107267" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(540.3312479200462,1274.7147337107267) translate(-540.3312479200462,-1274.7147337107267)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 554.9910457533795 1267.38483479406 L 540.3312479200462 1274.7147337107267 L 554.9910457533795 1282.0446326273934 Z"/></g></g><g><g><rect fill="rgb(218,230,240)" stroke="none" x="484.54951894336006" y="1301.1023698107267" width="185.15585363601562" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="487.18828255336007" y="1316.9349514707267" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_map_lookup(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="600.8246656100007" y="1316.9349514707267" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">object id</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="662.1703992525788" y="1316.9349514707267" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 895.1795624503848 1323.9716544307266 L 273.5592093316842 1323.9716544307266" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(259.0753290723509,1323.9716544307266) translate(-259.0753290723509,-1323.9716544307266)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 273.73512690568424 1316.64175551406 L 259.0753290723509 1323.9716544307266 L 273.73512690568424 1331.3015533473933 Z"/></g></g><g><g><rect fill="rgb(218,230,240)" stroke="none" x="533.5115779643562" y="1350.3592905307266" width="87.23173559402343" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="536.1503415743562" y="1366.1918721907266" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_resource</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 259.0753290723509 1373.2285751507266 L 892.9805927753848 1373.2285751507266" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(895.1795624503848,1373.2285751507266) translate(-895.1795624503848,-1373.2285751507266)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 880.1077608070958 1366.5049163200551 L 893.5315472105623 1373.2285751507266 L 880.1077608070958 1379.952233981398" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><g><rect fill="rgb(218,230,240)" stroke="none" x="618.1516986430867" y="1399.6162112507266" width="199.2074130842578" height="22.86928462"/></g><g><rect fill="rgb(218,230,240)" stroke="none" x="618.1516986430867" y="1417.2079686507266" width="183.73849523757812" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="620.7904622530866" y="1415.4487929107265" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_connection_</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="727.5335195040632" y="1415.4487929107265" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">demarshal</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="800.5900685763288" y="1415.4487929107265" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="620.7904622530866" y="1433.0405503107265" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">   //</text><text fill="blue" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="646.3308980441022" y="1433.0405503107265" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> decode the args data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 895.1795624503848 1440.0772532707265 L 554.8151281793795 1440.0772532707265" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(540.3312479200462,1440.0772532707265) translate(-540.3312479200462,-1440.0772532707265)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 554.9910457533795 1432.7473543540598 L 540.3312479200462 1440.0772532707265 L 554.9910457533795 1447.4071521873932 Z"/></g></g><g><g><rect fill="rgb(218,230,240)" stroke="none" x="679.042903477071" y="1466.4648893707265" width="77.42500341628906" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="681.681667087071" y="1482.2974710307265" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_closure</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 540.3312479200462 1489.3341739907264 L 892.9805927753848 1489.3341739907264" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(895.1795624503848,1489.3341739907264) translate(-895.1795624503848,-1489.3341739907264)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 880.1077608070958 1482.610515160055 L 893.5315472105623 1489.3341739907264 L 880.1077608070958 1496.0578328213978" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><g><rect fill="rgb(218,230,240)" stroke="none" x="645.7716022075398" y="1515.7218100907264" width="143.96760595535156" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="648.4103658175397" y="1531.5543917507264" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_closure_invoke( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 895.1795624503848 1538.5910947107263 L 554.8151281793795 1538.5910947107263" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(540.3312479200462,1538.5910947107263) translate(-540.3312479200462,-1538.5910947107263)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 554.9910457533795 1531.2611957940596 L 540.3312479200462 1538.5910947107263 L 554.9910457533795 1545.920993627393 Z"/></g></g><g><g><rect fill="rgb(218,230,240)" stroke="none" x="174.0768127300035" y="1564.9787308107263" width="271.3405307600391" height="22.86928462"/></g><g><rect fill="yellow" stroke="none" x="176.7155763400035" y="1567.7934119947263" width="19.885467529296875" height="17.767674974"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="176.7155763400035" y="1580.8113124707263" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">FFI</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="196.60104386930038" y="1580.8113124707263" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> ==&gt; target-&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="296.3505098116832" y="1580.8113124707263" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">implementation</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="407.93963639859726" y="1580.8113124707263" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> func</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 540.3312479200462 1587.8480154307263 L 93.64678855933333 1587.8480154307263" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(79.1629083,1587.8480154307263) translate(-79.1629083,-1587.8480154307263)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 93.82270613333333 1580.5181165140596 L 79.1629083 1587.8480154307263 L 93.82270613333333 1595.177914347393 Z"/></g></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 1654.9898895073927 L 1273.2041213 1654.9898895073927 M 8.7958787 1660.8538086407261 L 1273.2041213 1660.8538086407261 M 8.7958787 1666.7177277740595 L 1273.2041213 1666.7177277740595" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="#AABBFF" stroke="black" paint-order="fill stroke markers" d=" M 436.21048312144535 1640.6232876307263 L 845.7895168785547 1640.6232876307263 L 845.7895168785547 1681.0843296507262 L 436.21048312144535 1681.0843296507262 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="460.8389434814453" y="1665.251747990726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Compositor create global object when it's launched</text></g><g><g><rect fill="white" stroke="none" x="419.8688975464424" y="1707.4719657507262" width="134.6046756575" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="422.5076611564424" y="1723.3045474107262" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_global_create( )</text></g><g><path fill="none" stroke="blue" paint-order="fill stroke markers" d=" M 79.1629083 1730.3412503707261 L 880.6956821910514 1730.3412503707261" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(895.1795624503848,1730.3412503707261) translate(-895.1795624503848,-1730.3412503707261)"><path fill="blue" stroke="none" paint-order="stroke fill markers" d=" M 880.5197646170515 1723.0113514540594 L 895.1795624503848 1730.3412503707261 L 880.5197646170515 1737.6711492873928 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 771.9791721587442 1772.561468130726 L 771.9791721587442 1772.561468130726 A 15.832581659999999 15.832581659999999 0 0 1 787.8117538187441 1756.7288864707261 L 1002.5473710820254 1756.7288864707261 L 1002.5473710820254 1756.7288864707261 A 15.832581659999999 15.832581659999999 0 0 1 1018.3799527420254 1772.561468130726 L 1018.3799527420254 1798.949104230726 L 1018.3799527420254 1798.949104230726 A 15.832581659999999 15.832581659999999 0 0 1 1002.5473710820254 1814.781685890726 L 787.8117538187441 1814.781685890726 L 787.8117538187441 1814.781685890726 A 15.832581659999999 15.832581659999999 0 0 1 771.9791721587442 1798.949104230726 L 771.9791721587442 1772.561468130726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="796.6076325187441" y="1781.3573468307259" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. malloc( )--&gt;wl_global</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="796.6076325187441" y="1798.9491042307259" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. insert display-&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="923.3721131095645" y="1798.9491042307259" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">global_list</text></g><g><g><rect fill="rgb(221,204,221)" stroke="none" x="924.7923540737181" y="1888.6670669707262" width="184.1680301496875" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="927.4311176837181" y="1904.4996486307261" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_resource_post_event( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 895.1795624503848 1911.5363515907263 L 974.3424707503848 1911.5363515907263 L 974.3424707503848 1934.4056362107262 L 918.4593214097181 1934.4056362107262" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(903.9754411503848,1934.4056362107262) translate(-903.9754411503848,-1934.4056362107262)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 918.6352389837181 1927.0757372940595 L 903.9754411503848 1934.4056362107262 L 918.6352389837181 1941.735535127393 Z"/></g></g><g><g><rect fill="rgb(221,204,221)" stroke="none" x="614.0007151646686" y="1960.7932723107263" width="198.71350134109375" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="616.6394787746685" y="1976.6258539707262" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_argument_from_va_list( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 886.3836837503848 1983.6625569307262 L 554.8151281793795 1983.6625569307262" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(540.3312479200462,1983.6625569307262) translate(-540.3312479200462,-1983.6625569307262)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 554.9910457533795 1976.3326580140595 L 540.3312479200462 1983.6625569307262 L 554.9910457533795 1990.9924558473929 Z"/></g></g><g><g><rect fill="rgb(221,204,221)" stroke="none" x="643.138158707149" y="2010.0501930307262" width="140.4386142561328" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="645.776922317149" y="2025.8827746907261" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">union wl_argument</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 540.3312479200462 2032.919477650726 L 884.1847140753848 2032.919477650726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(886.3836837503848,2032.919477650726) translate(-886.3836837503848,-2032.919477650726)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 871.3118821070958 2026.1958188200547 L 884.7356685105623 2032.919477650726 L 871.3118821070958 2039.6431364813975" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><g><rect fill="rgb(221,204,221)" stroke="none" x="933.5882327737181" y="2059.3071137507263" width="225.90029943679687" height="22.86928462"/></g><g><rect fill="rgb(221,204,221)" stroke="none" x="933.5882327737181" y="2076.8988711507263" width="132.45719946121093" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="936.2269963837181" y="2075.1396954107263" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_resource_post_event_array( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="936.2269963837181" y="2092.7314528107263" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">--&gt;handle_array( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 903.9754411503848 2099.768155770726 L 983.1383494503848 2099.768155770726 L 983.1383494503848 2122.637440390726 L 927.2552001097181 2122.637440390726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(912.7713198503848,2122.637440390726) translate(-912.7713198503848,-2122.637440390726)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 927.4311176837181 2115.3075414740597 L 912.7713198503848 2122.637440390726 L 927.4311176837181 2129.9673393073926 Z"/></g></g><g><g><rect fill="rgb(221,204,221)" stroke="none" x="641.011409336446" y="2149.025076490726" width="153.48799169753906" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="643.650172946446" y="2164.857658150726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_closure_marshal( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 895.1795624503848 2171.894361110726 L 554.8151281793795 2171.894361110726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(540.3312479200462,2171.894361110726) translate(-540.3312479200462,-2171.894361110726)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 554.9910457533795 2164.5644621940596 L 540.3312479200462 2171.894361110726 L 554.9910457533795 2179.2242600273926 Z"/></g></g><g><g><rect fill="rgb(221,204,221)" stroke="none" x="651.9348102153523" y="2198.281997210726" width="131.64118993972656" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="654.5735738253522" y="2214.114578870726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_closure_send( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 895.1795624503848 2221.151281830726 L 554.8151281793795 2221.151281830726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(540.3312479200462,2221.151281830726) translate(-540.3312479200462,-2221.151281830726)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 554.9910457533795 2213.8213829140595 L 540.3312479200462 2221.151281830726 L 554.9910457533795 2228.4811807473925 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 285.4629651723509 2263.3714995907258 L 285.4629651723509 2263.3714995907258 A 15.832581659999999 15.832581659999999 0 0 1 301.2955468323509 2247.538917930726 L 779.3669490077415 2247.538917930726 L 779.3669490077415 2247.538917930726 A 15.832581659999999 15.832581659999999 0 0 1 795.1995306677414 2263.3714995907258 L 795.1995306677414 2360.126165290726 L 795.1995306677414 2360.126165290726 A 15.832581659999999 15.832581659999999 0 0 1 779.3669490077415 2375.958746950726 L 301.2955468323509 2375.958746950726 L 301.2955468323509 2375.958746950726 A 15.832581659999999 15.832581659999999 0 0 1 285.4629651723509 2360.126165290726 L 285.4629651723509 2263.3714995907258" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="310.09142553235085" y="2272.167378290726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. copy_fds_to_connection( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="310.09142553235085" y="2289.759135690726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">    wl_connection_put_fd( ) - -&gt; </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="529.7764688673118" y="2289.759135690726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">connection-&gt;fds_out</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="676.7485910596946" y="2289.759135690726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> //ring_buffer</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="310.09142553235085" y="2324.942650490726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. serialize_closure( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="310.09142553235085" y="2342.534407890726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. wl_connection_write( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="310.09142553235085" y="2360.126165290726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">      - -&gt;</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="364.01407873059304" y="2360.126165290726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">connection-&gt;out</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="483.1694437208274" y="2360.126165290726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> //ring_buffer</text></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.7958787 2443.1006210273927 L 1273.2041213 2443.1006210273927 M 8.7958787 2448.964540160726 L 1273.2041213 2448.964540160726 M 8.7958787 2454.828459294059 L 1273.2041213 2454.828459294059" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="#AABBFF" stroke="black" paint-order="fill stroke markers" d=" M 480.5555148597266 2428.7340191507255 L 801.4444851402734 2428.7340191507255 L 801.4444851402734 2469.1950611707257 L 480.5555148597266 2469.1950611707257 Z" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="505.18397521972656" y="2453.3624795107257" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">bind func( ) will trigger resource create</text></g><g><g><rect fill="white" stroke="none" x="394.9798442017158" y="2495.5826972707255" width="184.38278234695312" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="397.61860781171583" y="2511.4152789307254" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_resource_create(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="533.860581688669" y="2511.4152789307254" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">client</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="571.8276532218721" y="2511.4152789307254" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><path fill="none" stroke="blue" paint-order="fill stroke markers" d=" M 79.1629083 2518.4519818907256 L 880.6956821910514 2518.4519818907256" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(895.1795624503848,2518.4519818907256) translate(-895.1795624503848,-2518.4519818907256)"><path fill="blue" stroke="none" paint-order="stroke fill markers" d=" M 880.5197646170515 2511.122082974059 L 895.1795624503848 2518.4519818907256 L 880.5197646170515 2525.781880807392 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 679.9605335479043 2560.6721996507254 L 679.9605335479043 2560.6721996507254 A 15.832581659999999 15.832581659999999 0 0 1 695.7931152079043 2544.8396179907254 L 1094.5660096928652 2544.8396179907254 L 1094.5660096928652 2544.8396179907254 A 15.832581659999999 15.832581659999999 0 0 1 1110.3985913528652 2560.6721996507254 L 1110.3985913528652 2604.6515931507256 L 1110.3985913528652 2604.6515931507256 A 15.832581659999999 15.832581659999999 0 0 1 1094.5660096928652 2620.4841748107256 L 695.7931152079043 2620.4841748107256 L 695.7931152079043 2620.4841748107256 A 15.832581659999999 15.832581659999999 0 0 1 679.9605335479043 2604.6515931507256 L 679.9605335479043 2560.6721996507254" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="704.5889939079043" y="2569.4680783507256" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. malloc( ) --&gt;wl_resource</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="704.5889939079043" y="2587.0598357507256" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. insert map </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="800.4873245963809" y="2587.0598357507256" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">client-&gt;objects</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="704.5889939079043" y="2604.6515931507256" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. wl_priv_signal_emit(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="860.2153519401309" y="2604.6515931507256" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">client-&gt;resource_created_signal</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1080.8739212760684" y="2604.6515931507256" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><g><rect fill="white" stroke="none" x="443.55536757818066" y="2646.8718109107253" width="87.23173559402343" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="446.1941311881807" y="2662.7043925707253" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_resource</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 895.1795624503848 2669.7410955307255 L 81.361877975 2669.7410955307255" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="7.0367029599999995"/><g transform="translate(79.1629083,2669.7410955307255) translate(-79.1629083,-2669.7410955307255)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 94.23470994328896 2663.017436700054 L 80.81092353982251 2669.7410955307255 L 94.23470994328896 2676.464754361397" stroke-miterlimit="10" stroke-width="1.4659797833333332"/></g></g><g><g><rect fill="white" stroke="none" x="363.84169112554395" y="2696.1287316307253" width="246.65908849929687" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="366.48045473554396" y="2711.9613132907252" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_resource_set_implementation( )</text></g><g><path fill="none" stroke="blue" paint-order="fill stroke markers" d=" M 79.1629083 2718.9980162507254 L 880.6956821910514 2718.9980162507254" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(895.1795624503848,2718.9980162507254) translate(-895.1795624503848,-2718.9980162507254)"><path fill="blue" stroke="none" paint-order="stroke fill markers" d=" M 880.5197646170515 2711.668117334059 L 895.1795624503848 2718.9980162507254 L 880.5197646170515 2726.327915167392 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 699.6849674468301 2761.218234010725 L 699.6849674468301 2761.218234010725 A 15.832581659999999 15.832581659999999 0 0 1 715.5175491068301 2745.385652350725 L 1074.8415757939395 2745.385652350725 L 1074.8415757939395 2745.385652350725 A 15.832581659999999 15.832581659999999 0 0 1 1090.6741574539394 2761.218234010725 L 1090.6741574539394 2770.0141127107254 L 1090.6741574539394 2770.0141127107254 A 15.832581659999999 15.832581659999999 0 0 1 1074.8415757939395 2785.8466943707253 L 715.5175491068301 2785.8466943707253 L 715.5175491068301 2785.8466943707253 A 15.832581659999999 15.832581659999999 0 0 1 699.6849674468301 2770.0141127107254 L 699.6849674468301 2761.218234010725" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="724.3134278068301" y="2770.0141127107254" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">save implementation to </text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="894.3849915275332" y="2770.0141127107254" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">object-&gt;implementation</text></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 17.591757400000006 1186.7559467107267 L 956.7507133503848 1186.7559467107267 L 956.7507133503848 1614.2356515307263 L 17.591757400000006 1614.2356515307263 L 17.591757400000006 1186.7559467107267 Z" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><path fill="steelblue" stroke="black" paint-order="fill stroke markers" d=" M 17.591757400000006 1186.7559467107267 L 17.591757400000006 1207.8660555907268 L 79.47703916777344 1207.8660555907268 L 90.03209360777345 1197.3110011507267 L 90.03209360777345 1186.7559467107267 L 17.591757400000006 1186.7559467107267" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="35.183514800000005" y="1200.8293526307268" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">loop</text></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 276.6670864723509 1841.169321990726 L 1165.645647300515 1841.169321990726 L 1165.645647300515 2402.3463830507258 L 276.6670864723509 2402.3463830507258 L 276.6670864723509 1841.169321990726 Z" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><path fill="#550055" stroke="black" paint-order="fill stroke markers" d=" M 276.6670864723509 1841.169321990726 L 276.6670864723509 1862.2794308707262 L 338.55236824012434 1862.2794308707262 L 349.10742268012433 1851.7243764307261 L 349.10742268012433 1841.169321990726 L 276.6670864723509 1841.169321990726" stroke-miterlimit="10" stroke-width="2.5131082" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="294.2588438723509" y="1855.2427279107262" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">loop</text><g><rect fill="rgb(221,204,221)" stroke="none" x="364.0604164701243" y="1842.5766625827262" width="198.4270633528125" height="18.295427696"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="366.69918008012434" y="1855.2427279107262" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[display-&gt;registry_resource_list ]</text></g></g></g></g></g></g></svg>