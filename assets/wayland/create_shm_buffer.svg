<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1224" height="504"><desc>title%20%20Surface%20attach%0A%0AClient%20-%3E%20RPC%3Awl_surface_attach(%3Ccolor%3A%23red%3Ewl_resource*%3C%2Fcolor%3E)%0A%0ARPC%20-%3E%20weston_surface%3Asurface_attach(%20)%0Aactivate%20weston_surface%0Aweston_surface%20-%3E%20weston_buffer%3Aweston_buffer_from_resource(%3Ccolor%3A%23red%3Ewl_resource*%3C%2Fcolor%3E%20)%0Aactivate%20weston_buffer%0Abox%20over%20weston_buffer%3A%3Ccolor%3A%23red%3Eweston_buffer%20*%3C%2Fcolor%3E%20%3D%20zalloc(%20)%5Cn%20wl_resource_add_destroy_listener(%20)%0Aweston_buffer-%3Eweston_surface%3A%20%3Ccolor%3A%23red%3Eweston_buffer%20*%3C%2Fcolor%3E%0Adeactivate%20weston_buffer%0Aweston_surface%20-%3Eweston_surface_state%3A%20weston_suface_state_set_buffer(%3Ccolor%3A%23red%3Esurface_pending%2C%20%20weston_buffer*%3C%2Fcolor%3E)%0Adeactivate%20weston_surface</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1224" height="504"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="534.0729176792604" y="26.3876361" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> Surface attach</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 48.094101860835934 103.26361593799999 L 48.094101860835934 504.35568465799986" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 316.12215414625257 103.26361593799999 L 316.12215414625257 504.35568465799986" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 486.6110479002239 103.26361593799999 L 486.6110479002239 504.35568465799986" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 859.7899548756797 103.26361593799999 L 859.7899548756797 504.35568465799986" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1122.9720826187786 103.26361593799999 L 1122.9720826187786 504.35568465799986" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.795878699999996 55.765870957999994 L 87.39232502167187 55.765870957999994 L 87.39232502167187 103.26361593799999 L 8.795878699999996 103.26361593799999 L 8.795878699999996 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="27.882935478999997" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Client</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 282.861864335026 55.765870957999994 L 349.3824439574791 55.765870957999994 L 349.3824439574791 103.26361593799999 L 282.861864335026 103.26361593799999 L 282.861864335026 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="301.948921114026" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RPC</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 413.80530215638015 55.765870957999994 L 559.4167936440676 55.765870957999994 L 559.4167936440676 103.26361593799999 L 413.80530215638015 103.26361593799999 L 413.80530215638015 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="432.8923589353802" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">weston_surface</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 791.0321675058593 55.765870957999994 L 928.5477422455 55.765870957999994 L 928.5477422455 103.26361593799999 L 791.0321675058593 103.26361593799999 L 791.0321675058593 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="810.1192242848593" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">weston_buffer</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1029.8764351415364 55.765870957999994 L 1216.0677300960208 55.765870957999994 L 1216.0677300960208 103.26361593799999 L 1029.8764351415364 103.26361593799999 L 1029.8764351415364 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1048.9634919205364" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">weston_surface_state</text></g></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 477.8151692002239 210.57333607799995 L 495.4069266002239 210.57333607799995 L 495.4069266002239 442.7845337579999 L 477.8151692002239 442.7845337579999 L 477.8151692002239 210.57333607799995" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 850.9940761756797 259.83025679799994 L 868.5858335756797 259.83025679799994 L 868.5858335756797 393.5276130379999 L 850.9940761756797 393.5276130379999 L 850.9940761756797 259.83025679799994" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><g><rect fill="white" stroke="none" x="68.91101478416924" y="138.44713073799997" width="226.39422643875" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="71.54977839416924" y="154.279712398" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_surface_attach(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="199.14462702698174" y="154.279712398" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_resource*</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="287.7702678961224" y="154.279712398" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 48.094101860835934 161.31641535799997 L 301.63827388691925 161.31641535799997" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(316.12215414625257,161.31641535799997) translate(-316.12215414625257,-161.31641535799997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 301.4623563129192 153.9865164413333 L 316.12215414625257 161.31641535799997 L 301.4623563129192 168.64631427466665 Z"/></g></g><g><g><rect fill="white" stroke="none" x="336.93906706958586" y="187.70405145799995" width="120.05918920730468" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="339.5778306795859" y="203.53663311799997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">surface_attach( )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 316.12215414625257 210.57333607799995 L 463.3312889408906 210.57333607799995" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(477.8151692002239,210.57333607799995) translate(-477.8151692002239,-210.57333607799995)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 463.15537136689056 203.24343716133328 L 477.8151692002239 210.57333607799995 L 463.15537136689056 217.90323499466663 Z"/></g></g><g><g><rect fill="white" stroke="none" x="516.2238395235573" y="236.96097217799993" width="313.9533237287891" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="518.8626031335573" y="252.79355383799995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">weston_buffer_from_resource(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="729.678688948987" y="252.79355383799995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">wl_resource*</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="818.3043298181276" y="252.79355383799995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> )</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 495.4069266002239 259.83025679799994 L 836.5101959163463 259.83025679799994" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(850.9940761756797,259.83025679799994) translate(-850.9940761756797,-259.83025679799994)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 836.3342783423464 252.50035788133326 L 850.9940761756797 259.83025679799994 L 836.3342783423464 267.1601557146666 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 709.8608353359922 286.21789289799995 L 1009.7190744153672 286.21789289799995 L 1009.7190744153672 344.27069231799993 L 709.8608353359922 344.27069231799993 L 709.8608353359922 286.21789289799995" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="734.4892956959922" y="310.8463532579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">weston_buffer *</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="844.8400494801718" y="310.8463532579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> = zalloc( )</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="734.4892956959922" y="328.4381106579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> wl_resource_add_destroy_listener( )</text></g><g><g><rect fill="white" stroke="none" x="615.386360885862" y="370.65832841799994" width="115.62828100417968" height="22.86928462"/></g><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="618.025124495862" y="386.49091007799996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">weston_buffer *</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 850.9940761756797 393.5276130379999 L 509.89080685955724 393.5276130379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(495.4069266002239,393.5276130379999) translate(-495.4069266002239,-393.5276130379999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 510.0667244335573 386.19771412133326 L 495.4069266002239 393.5276130379999 L 510.0667244335573 400.85751195466656 Z"/></g></g><g><g><rect fill="white" stroke="none" x="575.6201684897356" y="419.9152491379999" width="467.1386722395313" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="578.2589320997356" y="435.74783079799994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">weston_suface_state_set_buffer(</text><text fill="red" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="801.4586543897747" y="435.74783079799994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">surface_pending,  weston_buffer*</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1035.22386740247" y="435.74783079799994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 495.4069266002239 442.7845337579999 L 1108.4882023594453 442.7845337579999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1122.9720826187786,442.7845337579999) translate(-1122.9720826187786,-442.7845337579999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1108.3122847854452 435.45463484133325 L 1122.9720826187786 442.7845337579999 L 1108.3122847854452 450.11443267466655 Z"/></g></g></g><g/><g/><g/><g/><g/></g></svg>