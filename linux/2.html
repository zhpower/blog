<!DOCTYPE html> <html lang=zh data-hairline=true class=itcauecng data-theme=light data-rh=data-theme style><!--
 Page saved with SingleFile 
 url: https://zhuanlan.zhihu.com/p/685361884 
 saved date: Fri Mar 29 2024 09:41:51 GMT+0800 (中国标准时间)
--><meta charset=utf-8><title>RDMA（三）- 从DMA-BUF 到GDR - 知乎</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=renderer content=webkit><meta name=force-rendering content=webkit><meta http-equiv=X-UA-Compatible content="IE=10,chrome=1"><meta name=google-site-verification content=FTeR0c8arOPKh8c5DYh_9uu98_zJbaWw53J-Sch9MTg><meta data-rh=true name=keywords content=GDR,pcie><meta data-rh=true name=description content="简介Dma-buf 一种在用户进程-内核驱动/内核不同驱动之间进行buffer共享的框架，不仅仅可以共享dma buffer，也可以共享普通的内存buffer，当然由于dma_buf设计的初衷是解决不同内核驱动模块和设备间进行快速大数据…"><meta data-rh=true property=og:title content="RDMA（三）- 从DMA-BUF 到GDR"><meta data-rh=true property=og:url content=https://zhuanlan.zhihu.com/p/685361884><meta data-rh=true property=og:description content="简介Dma-buf 一种在用户进程-内核驱动/内核不同驱动之间进行buffer共享的框架，不仅仅可以共享dma buffer，也可以共享普通的内存buffer，当然由于dma_buf设计的初衷是解决不同内核驱动模块和设备间进行快速大数据…"><meta data-rh=true property=og:image content><meta data-rh=true property=og:type content=article><meta data-rh=true property=og:site_name content=知乎专栏><link crossorigin rel=search type=application/opensearchdescription+xml href=https://static.zhihu.com/heifetz/search.xml title=知乎><style>@media (max-width:768px){}@media (min-width:769px){}@media (max-width:768px){}@-webkit-keyframes spring-in{0%{opacity:.01;-webkit-transform:translate(-50%,-20px);transform:translate(-50%,-20px)}to{opacity:1;-webkit-transform:translate(-50%);transform:translate(-50%)}}@keyframes spring-in{0%{opacity:.01;-webkit-transform:translate(-50%,-20px);transform:translate(-50%,-20px)}to{opacity:1;-webkit-transform:translate(-50%);transform:translate(-50%)}}@-webkit-keyframes spring-out{0%{opacity:1;-webkit-transform:translate(-50%);transform:translate(-50%)}to{opacity:0;-webkit-transform:translate(-50%,-20px);transform:translate(-50%,-20px)}}@keyframes spring-out{0%{opacity:1;-webkit-transform:translate(-50%);transform:translate(-50%)}to{opacity:0;-webkit-transform:translate(-50%,-20px);transform:translate(-50%,-20px)}}.ztext>:first-child{margin-top:0}.ztext>:last-child{margin-bottom:0}.ztext h2{font-synthesis:style}.ztext h3{font-synthesis:style}.ztext b{font-synthesis:style}.ztext a:focus{outline:none;-webkit-transition:-webkit-box-shadow .3s;transition:-webkit-box-shadow .3s;transition:box-shadow .3s;transition:box-shadow .3s,-webkit-box-shadow .3s}.ztext a.external:hover,.ztext a.internal:hover,.ztext a.ztext-link:hover{border-bottom:1px solid #09408e;color:#09408e}.ztext ol li:before,.ztext ul li:before{width:1em}.ztext ol{display:table}.ztext ol>li:before{content:counter(ol)". ";counter-increment:ol;display:table-cell;text-align:right;white-space:pre}.ztext .origin_image.zh-lightbox-thumb{cursor:-webkit-zoom-in}.ztext pre{-webkit-overflow-scrolling:touch}@supports not ((-webkit-backdrop-filter:blur(16px)) or (backdrop-filter:blur(16px))){.VideoCardPlayButton-withFileSize--outer .VideoCardPlayButton-withFileSize{background-color:hsla(0,0%,7%,.8)}}@media (max-width:660px){}@media (max-width:660px){}@-webkit-keyframes mu-rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes mu-rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@media (hover:hover){}@-webkit-keyframes CircleLoadingBarRotator{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(270deg);transform:rotate(270deg)}}@keyframes CircleLoadingBarRotator{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(270deg);transform:rotate(270deg)}}@-webkit-keyframes CircleLoadingBarDash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;-webkit-transform:rotate(135deg);transform:rotate(135deg)}to{stroke-dashoffset:187;-webkit-transform:rotate(450deg);transform:rotate(450deg)}}@keyframes CircleLoadingBarDash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;-webkit-transform:rotate(135deg);transform:rotate(135deg)}to{stroke-dashoffset:187;-webkit-transform:rotate(450deg);transform:rotate(450deg)}}</style><style>body{font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif}body{margin:0}h2,h3{font:inherit;margin:0}li{list-style-type:none}a{color:inherit}.B46v1Ak6Gj5sL2JTS4PY.RuuQ6TOh2cRzJr6WlyQp .t2ntD6J1DemdOdvh5FB4{margin-right:4px}@media (max-width:690px){}@media (max-width:690px){}@media (max-width:690px){}@media (max-width:690px){}@media only screen and (min-device-width:320px){}body{color:#191b1f}body{-webkit-tap-highlight-color:rgba(25,27,31,0)}.WhiteBg-body{background:#fff}.App-main{padding-bottom:46px}@media (max-width:690px){body{background:#fff}.App-main{padding:0}}.ColumnPageHeader-WriteButton .Zi--EditSurround{margin-left:-3px;margin-right:4px}@media (max-width:420px){}@media (max-width:420px){}@media (max-width:420px){}@media (max-width:660px){}@media (max-width:420px){}@media (max-width:1020px){}@media (max-width:420px){}@media (max-width:420px){}@media (max-width:420px){}@media (max-width:420px){}@media (max-width:420px){}@media (max-width:420px){}@media (max-width:1020px){}@media (max-width:420px){}@media (max-width:420px){}@media (max-width:420px){}@media (max-width:420px){}@media (max-width:320px){}.VoteButton-TriangleUp{margin-right:5px}@media (min-width:690px){}@media (max-width:690px){}@-webkit-keyframes Post-SideActions-spread{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(1.8);transform:scale(1.8)}}@keyframes Post-SideActions-spread{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(1.8);transform:scale(1.8)}}@media (max-width:690px){}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:192dpi){}@media (-webkit-min-device-pixel-ratio:3),(min-resolution:288dpi){}@media (-webkit-min-device-pixel-ratio:4),(min-resolution:384dpi){}@media (min-width:690px){}@media (max-width:320px){}@-webkit-keyframes slideInUp{0%{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0);visibility:visible}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@keyframes slideInUp{0%{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0);visibility:visible}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@media (min-width:640px){}@media (max-width:690px){}@-webkit-keyframes fsFadeIn{0%{opacity:0}to{opacity:1}}@keyframes fsFadeIn{0%{opacity:0}to{opacity:1}}@-webkit-keyframes fsFadeOut{0%{opacity:1}to{opacity:0}}@keyframes fsFadeOut{0%{opacity:1}to{opacity:0}}@-webkit-keyframes fsSlideUp{0%{opacity:0;-webkit-transform:translateY(40px);transform:translateY(40px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes fsSlideUp{0%{opacity:0;-webkit-transform:translateY(40px);transform:translateY(40px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes fsSlideDown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(40px);transform:translateY(40px)}}@keyframes fsSlideDown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(40px);transform:translateY(40px)}}.Post-RichTextContainer{position:relative}.Post-NormalMain>.Post-RichTextContainer{overflow:visible}@media (max-width:690px){}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:192dpi){}@media (-webkit-min-device-pixel-ratio:3),(min-resolution:288dpi){}@media (-webkit-min-device-pixel-ratio:4),(min-resolution:384dpi){}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:192dpi){}.Post-content{background:#fff}.Post-content{min-width:1000px}@media (max-width:690px){}.Post-NormalMain>div{margin:0 auto;width:690px}.Post-Main{-webkit-box-sizing:border-box;box-sizing:border-box}.Post-Main:focus{outline:none}@media (max-width:690px){}@media (min-width:690px){}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:192dpi){}@media (-webkit-min-device-pixel-ratio:3),(min-resolution:288dpi){}@media (-webkit-min-device-pixel-ratio:4),(min-resolution:384dpi){}@media (min-width:690px){}@media (max-width:690px){}@media (max-width:690px){}@media (max-width:690px){}@media (max-width:660px){}@-webkit-keyframes WriteIndexLoading{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes WriteIndexLoading{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}</style><style>@-webkit-keyframes spinnerBladeFade{0%{opacity:.85}50%{opacity:.25}to{opacity:.25}}@keyframes spinnerBladeFade{0%{opacity:.85}50%{opacity:.25}to{opacity:.25}}</style><style>img:not([src]),img[src=""]{opacity:0}@-webkit-keyframes skeleton-wave{0%{-webkit-transform:translateX(-8000%);transform:translateX(-8000%)}to{-webkit-transform:translateX(10000%);transform:translateX(10000%)}}@keyframes skeleton-wave{0%{-webkit-transform:translateX(-8000%);transform:translateX(-8000%)}to{-webkit-transform:translateX(10000%);transform:translateX(10000%)}}@-webkit-keyframes linear-double{0%{-webkit-transform:translateX(-56%);transform:translateX(-56%)}to{-webkit-transform:translateX(56%);transform:translateX(56%)}}@keyframes linear-double{0%{-webkit-transform:translateX(-56%);transform:translateX(-56%)}to{-webkit-transform:translateX(56%);transform:translateX(56%)}}</style><style>@-webkit-keyframes spinnerBladeFade{0%{opacity:.85}50%{opacity:.25}to{opacity:.25}}@keyframes spinnerBladeFade{0%{opacity:.85}50%{opacity:.25}to{opacity:.25}}</style><style>@-webkit-keyframes Bounce{0%,to{-webkit-transform:translateY(-100%);transform:translateY(-100%)}50%{-webkit-transform:translateY(100%);transform:translateY(100%)}}@keyframes Bounce{0%,to{-webkit-transform:translateY(-100%);transform:translateY(-100%)}50%{-webkit-transform:translateY(100%);transform:translateY(100%)}}@-webkit-keyframes linear-double{0%{-webkit-transform:translateX(-56%);transform:translateX(-56%)}to{-webkit-transform:translateX(56%);transform:translateX(56%)}}@keyframes linear-double{0%{-webkit-transform:translateX(-56%);transform:translateX(-56%)}to{-webkit-transform:translateX(56%);transform:translateX(56%)}}</style><style>@media screen and (min-width:680px) and (max-width:750px){}</style><style>@-webkit-keyframes Bounce{0%,to{-webkit-transform:translateY(-100%);transform:translateY(-100%)}50%{-webkit-transform:translateY(100%);transform:translateY(100%)}}@keyframes Bounce{0%,to{-webkit-transform:translateY(-100%);transform:translateY(-100%)}50%{-webkit-transform:translateY(100%);transform:translateY(100%)}}@media (max-width:320px){}@-webkit-keyframes linear-double{0%{-webkit-transform:translateX(-56%);transform:translateX(-56%)}to{-webkit-transform:translateX(56%);transform:translateX(56%)}}@keyframes linear-double{0%{-webkit-transform:translateX(-56%);transform:translateX(-56%)}to{-webkit-transform:translateX(56%);transform:translateX(56%)}}@media (min-width:768px){}@-webkit-keyframes LoadingBarForward{0%{-webkit-transform:translateX(-100%);transform:translateX(-100%)}40%{-webkit-transform:translateX(0);transform:translateX(0)}60%{-webkit-transform:translateX(0);transform:translateX(0)}to{-webkit-transform:translateX(100%);transform:translateX(100%)}}@keyframes LoadingBarForward{0%{-webkit-transform:translateX(-100%);transform:translateX(-100%)}40%{-webkit-transform:translateX(0);transform:translateX(0)}60%{-webkit-transform:translateX(0);transform:translateX(0)}to{-webkit-transform:translateX(100%);transform:translateX(100%)}}@-webkit-keyframes fxRichTextFadeIn{0%{opacity:0}to{opacity:1}}@keyframes fxRichTextFadeIn{0%{opacity:0}to{opacity:1}}.RichText .lazy[data-lazy-status=ok]{-webkit-animation:fxRichTextFadeIn .5s ease-in}</style><style data-emotion-css=1hlrcxk>.css-1hlrcxk{-webkit-transition-property:fill;transition-property:fill;-webkit-transition-duration:0.25s;transition-duration:0.25s;-webkit-transition-timing-function:ease-in;transition-timing-function:ease-in}</style><style data-emotion-css=1ifz0go>.css-1ifz0go{overflow:visible!important}</style><style data-emotion-css=1yuhvjn>.css-1yuhvjn{margin-top:16px}</style><style data-emotion-css=376mun>.css-376mun{position:relative;display:inline}</style><style data-emotion-css="jflero animation-1yvu044">.css-jflero{word-break:break-word;line-height:1.6}.css-jflero>[data-first-child]{margin-top:0}.css-jflero>:last-child{margin-bottom:0}.css-jflero h2{clear:left;margin-top:calc((1.4em*2)/1.2);margin-bottom:calc(1.4em/1.2);font-size:1.2em;line-height:1.5;font-weight:600}.css-jflero h3{clear:left;margin-top:calc((1.4em*1.5)/1.1);margin-bottom:calc(1.4em/1.1);font-size:1.1em;line-height:1.5;font-weight:600}.css-jflero u{-webkit-text-decoration:none;text-decoration:none;border-bottom:1px solid #373a40}.css-jflero b{font-weight:600}.css-jflero a:focus{outline:none;-webkit-transition:box-shadow 0.3s;transition:box-shadow 0.3s}.css-jflero a.external{-webkit-text-decoration:none;text-decoration:none;cursor:pointer;border-bottom:1px solid #81858f}.css-jflero a.ztext-link:hover,.css-jflero a.internal:hover,.css-jflero a.external:hover{color:#09408e;border-bottom:1px solid #09408e}.css-jflero p{margin:1.4em 0}.css-jflero ol{margin:1.4em 0;padding:0;width:100%}.css-jflero ol li::before,.css-jflero ul li::before{width:1em}.css-jflero ol{counter-reset:ol}.css-jflero ol>li{display:table;width:100%;list-style:none}.css-jflero ol>li::before{display:table-cell;text-align:right;counter-increment:ol;content:counter(ol)". ";white-space:pre}.css-jflero figure{margin:1.4em 0}.css-jflero figure .origin_image{margin:0 auto}.css-jflero .origin_image{display:block;height:auto}.css-jflero .origin_image.zh-lightbox-thumb{cursor:-webkit-zoom-in;cursor:-moz-zoom-in;cursor:zoom-in}.css-jflero code{font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace}.css-jflero pre{padding:calc(0.8em/0.9);font-size:0.9em;word-break:initial;word-wrap:initial;white-space:pre;overflow:auto;-webkit-overflow-scrolling:touch;background:#f8f8fa;border-radius:4px}.css-jflero pre code{margin:0;padding:0;font-size:inherit;border-radius:0;background-color:inherit}.css-jflero .lazy[data-lazy-status="ok"]{background-color:transparent;-webkit-animation:animation-1yvu044 0.5s ease-in;animation:animation-1yvu044 0.5s ease-in}.css-jflero .highlight{margin:1em 0}.css-jflero .highlight pre{margin:0}.css-jflero .highlight::-webkit-scrollbar{width:6px;height:6px}.css-jflero .highlight::-webkit-scrollbar-thumb:horizontal{background-color:rgba(25,27,31,0.5);border-radius:6px}.css-jflero .highlight::-webkit-scrollbar-thumb:horizontal:hover{background-color:rgba(25,27,31,0.6)}.css-jflero img.origin_image[data-size="normal"]{width:100%;max-width:100%}@-webkit-keyframes animation-1yvu044{from{opacity:0}to{opacity:1}}@keyframes animation-1yvu044{from{opacity:0}to{opacity:1}}</style><style data-emotion=css>@-webkit-keyframes animation-p6x5s9{0%{transform:translateX(-100%)}40%{transform:translateX(0px)}60%{transform:translateX(0px)}100%{transform:translateX(100%)}}@keyframes animation-p6x5s9{0%{transform:translateX(-100%)}40%{transform:translateX(0px)}60%{transform:translateX(0px)}100%{transform:translateX(100%)}}@-webkit-keyframes animation-1alkx44{0%,100%{transform:translateY(-100%)}50%{transform:translateY(100%)}}@keyframes animation-1alkx44{0%,100%{transform:translateY(-100%)}50%{transform:translateY(100%)}}@supports (gap:16px){.css-1gw6e1j{gap:16px}}@supports (gap:16px){.css-1oct3vw{gap:16px}}@supports not (gap:16px){.css-1c6j3lq{margin-top:16px}}@supports not (gap:16px){.css-1k0fcsy{margin-top:16px}}.css-15ro776{margin-right:4px}.css-paut93{margin-left:4px;flex-shrink:0;overflow:visible!important}.css-gx7lzm{margin:0px 4px;flex-shrink:0}.css-14jvw02 svg{margin-bottom:1px}</style><meta itemprop=name content="Bruce 仗剑走天涯"><meta itemprop=image content="https://pic1.zhimg.com/v2-cdd558cb11fcf8440c9a00ea49876038_l.jpg?source=172ae18b"><meta itemprop=url content=https://www.zhihu.com/people/void-73-73><meta itemprop=zhihu:followerCount><meta name=referrer content=no-referrer><link crossorigin rel="shortcut icon" type=image/x-icon href="data:image/vnd.microsoft.icon;base64,AAABAAEAICAAAAEAIACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAABAAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/ZQBg/2cAv/9lAP7/ZgD//2YA//9mAf//ZgD//2YA//9mAP//ZgD//2YA//9mAP//ZgD//2YA//9mAf7/ZgH//2YB//9lAP//ZgD//2YB/v9nAP7/agH//2sA//9sAe7/bwC//3EAXwAAAAAAAAAAAAAAAAAAAAD/YAAQ/2YAz/9lAP7/ZgD//2YA//9lAP7/ZgD//2YA//9mAP//ZgD//2YB/v9lAf7/ZgH//2UA//9mAf7/ZgH//2YA//9mAP//ZgH//2YA//9nAf//aAD//2kA//9rAP//bAD//24A//9wAP//cQD+/3QAv/9wABAAAAAAAAAAAP9lAb//ZQH+/2YA//9mAP//ZgH//2YA//9mAP//ZgD//2YA//9mAP//ZgD//2YA//9mAP//ZwH//2YA//9mAf7/ZgD//2YA//9mAP//ZwD//2gA/v9qAP//bAD//2wB/v9uAP//cAD//3IA//9zAP//dQD//3cAzwAAAAD/ZgBf/2YA//9mAP//ZgH+/2YA//9mAP//ZgH//2YA//9lAP7/ZgH//2YB/v9lAP7/ZgD//2UB/v9lAP7/ZgH+/2UB/v9mAP//ZgH//2cA//9pAP//agD//2wA//9uAP//bwD//3AA//9xAf7/dAD//3UA//92AP//eAH//3kAX/9nAL//ZQD//2YB//9mAP//ZgD//2YA//9mAP//ZgD//2UA/v9lAP7/ZgD//2YA//9mAf//ZgD//2YA//9mAP//ZgH//2cB//9nAP//aQD//2sA//9sAP//bgH//28B/v9wAP7/cgH//3MA//91AP7/dgD//3gA//95AP7/ewC//2YB7v9mAf//ZgD//2UA/v9mAf//jUD//59g//+MQP//ZgD//2UA/v9lAf7/ZgH//2YA//9lAP7/ZgD//2UA/v9mAf7/aAD//2kA//9rAP//bAH+/20A/v9vAP//cQH+/3MA//9zAf7/dQD+/3YA//95AP//egD//3sB/v99Af//ZgD//2YB/v9lAP//ZgD//2UA/v+gYP//9e/////////Yv///eSD+/2YA//9mAP//ZgH//2UA/v9mAf//xaD//2gA//9qAf//awD//2wB/v/JoP//lED//3EA//9zAP//dAD//3YB//93AP//eAD+/3oA//97AP//fQH+/38A//9lAP7/ZgH//2YA//9mAP//ZgD//2YA//+CMP//9e/////////s3///ZgD//2YB/v9lAP7/ZgD//6lw////////cxD//2wA//9tAP//bgD///bv////////wpD//30R//91Af7/eAD//3kA//96AP7/fAH//30B/v+AAf//gAD//2YA//9mAP7/ZgD//2YA//9mAP//ZgD//2YA//+fYP////////////+zgP7/ZQH+/2YA//96If//9e////////9+IP//pGD//////////////////////////////////////////////////3wA/v9+Af//gAD//4AA/v+CAP7/ZQD+/2YA//9mAf//ZgH//2UA//9mAf//ZgH+/2YA///FoP///////+zf//95IP//ZwD//9m/////////2r///20B//+lYP//////////////////l0D//9Wv////////////////////////fgD//4AB//+AAf7/ggD+/4QB//9mAP//ZgD//2YA//9mAP//ZgD//2YA//9mAf//ZgH+/3gh/v///////////6Fg//+scP7///////bv//+AIP7/bwD+/6Zg////////3L///3UA//92Af7/eAD//3oA//+LIP////////////+AAP//gQH+/4IB/v+EAP//hQD//2YA//9mAP//ZQD+/2YB//9nAf//ZgD//2UB/v9mAP//ZgD//8ag////////2r///+zf////////rnD//3AA//9xAP//p2D////////dv///dwD+/3kA//95Af7/fAD//40h/v///////////4IA//+DAP//hQD//4YA//+IAP//ZgH+/2YA//9mAP//ZgD//2YA//9mAf//ZQD+/2YA//9nAP//jkD+///////27///fyD//8CQ//9wAP//cQH+/3MA//+oYP///////96///95AP//egD+/3wB//9+Af//jyD/////////////gwD//4UA//+HAf//iAH//4kA//9mAf7/ZgD//2YA//9mAP//ZgH//2YA//9mAP//ZgD+/2gB/v9qAP//9u////////+JMf7/cAH//3EA//9zAP//dAH+/6lg////////3r///3sB//99Af//fQD+/38A//+RIf7///////////+FAf//hwH//4gB/v+KAP//igH+/2YB//9mAf7/ZgH+/2YA//9mAf//cBD//3oh/v97IP7/fSD//34g///kz////////51Q//9xAf7/cwD//3UA//92AP//q2H+///////ev///fQD//34A//9/AP//gAH+/5Ig/////////////4cA//+JAf//iQD+/4sA/v+NAf7/ZgD//2YB//9mAf7/ZgD//2YB/v+9kP///////////////////////////////////////////////////////+7f//+tYP7//////9+///9+Af//gAH+/4EA//+DAP//lCD/////////////iQH//4oB//+MAf//jgH//48A//9mAP//ZgH//2YB/v9mAP//aAD//3wg///av///7N///+3f///t3///9u/////////37///7t///+7f///v3///zp///61g////////37///4AB//+BAP//gwD//4QA/v+VIP////////////+LAf//jAD//44B//+PAP//kQD+/2YB//9mAP//ZwD//2kA//9pAP//awD//20B//9uAP7/cAD//3EA//+5gP///////8uf//93AP//eQH//3oA/v97AP//rmD////////gv///ggD//4MB/v+FAP//hgH+/5ch/v///////////4wA/v+OAP//jwD//5EA//+TAf7/ZgD//2cA//9pAf//agD//2wA//9tAP//bwD//3AA//9yAP//cwD//7mA////////zJ///3kA//97Af//fAD//34A//+vYP///////+C///+EAP//hQD//4cA//+HAf7/mCD/////////////jwD//5AA/v+RAf//kwH+/5QA//9nAP//aQH//2oB/v9sAf7/bQD//5tQ//+vcP7/ehH+/3QB//91AP//uoD////////Nn///ewD//3wB/v9+AP//gAD//7Bh////////4L///4UA//+HAP7/iAD//4oB/v+aIP////////////+QAP//kgD//5MA//+UAP//lwD+/2kA//9qAP//bAD//20A//9vAP//lED////////u3///hyD//3cB//+8gP///////86f//98AP//fgD//4AA//+BAP//sWD////////gv///iAH//4kA//+KAP//jAH//5sg/////////////5IB//+TAf//lQD//5cB/v+YAP//agD+/20B//9uAf//cAH//3EA//9yAP//3L/////////DkP//eAH+/7yA////////z5///34A//+AAf//gQD//4MB/v+yYP///////+G///+JAf//igD//4wA//+OAP//nSD/////////////lAH//5UA//+XAf7/mAD//5oA//9sAf7/bgH+/3AA//9xAP//cwD//3QA/v+pYP////////fv///ev///79/////////37///37///9+////fv///s2D//7Nh////////9+///+G////jv///47///+O////jv/////////////+VAP//lwD+/5gA//+aAP//mwD//24A//9wAP//cQD//3MA/v91AP//dgD//4gg//////////////////////////////////////////////////+0YP//tGD//////////////////////////////////////////////////5gA/v+ZAf//mgD//5wA//+eAf//cQD//3EB/v9zAP//dQD//3YA//94AP//eQH+/9av////////x5D//6BA/v+hQP//oUD//6NA/v+kQP//pUD//4kB//+REf//qUD//6pA//+rQP//rED//61A//+uQP//r0D//7BA//+yQP//mQD//5sA/v+cAf//ngD+/58A//9yAP//dAH//3UA//92AP//eAH+/3kA/v97Af//rWD////////nz///gQD//4IA//+FAf//hgH//4cA/v+JAP//igD+/4wA//+NAP//jwD//5AA//+SAf7/kwD//5YB/v+WAP//mAD//5oA/v+bAP//nQH//54A/v+fAP//oQD//3QA//91Af//dwD//3gA//96Af//ewD//30A//9/AP//t3D///fv//+TIP7/hAD//4UA//+HAP//iAD+/4sA//+MAf//jQD//48A//+RAf//kgH//5QA//+VAP//lwH+/5gB/v+aAP//mwH//50B//+eAP//oAD+/6EA//+jAO//dwG//3cA//95AP//egH+/3sA//99AP//fwD//4AA//+CAf//hAD//4UA//+GAP7/hwH+/4kA//+LAf7/jAD//44B/v+PAP//kQH+/5MA//+VAf7/lQD//5cA//+YAP//mgD//5wB//+dAP//nwH//6AA//+iAf//owH//6QAv/94AGD/eQH//3oA//98Af//fgH//4AA//+AAP//ggH//4MA//+FAP7/hgH//4gA//+KAP//iwH//40A//+OAP//kAD//5EA//+TAP//lQD//5YB/v+XAP//mQD//5sA/v+cAf7/nQH//58A//+gAP//ogH//6MA//+lAP//pgBfAAAAAP96Ac//fAD//34B/v+AAf//gQD//4IB//+DAf7/hgH//4YA/v+IAf7/igH+/4sB/v+NAP//jgD+/5AA/v+RAP//kwD+/5UA//+XAP7/lwD//5kA//+aAP//nAD//54B/v+fAP//oQD//6IB//+kAf7/pQD//6cAvwAAAAAAAAAA/4AAEP99AL//gAH+/4EA//+DAP//hAH+/4UA//+HAf//iQH//4oA//+LAP//jQH+/44A//+QAP//kgH+/5QA/v+UAP//lgD//5gA//+ZAP//mwD//5wA//+dAP//nwH//6EB//+iAf//owD//6UA//+nAM//nwAQAAAAAAAAAAAAAAAAAAAAAP+BAF//gwC//4QA7/+FAP7/hwD//4kB/v+KAP//jAD//40A//+QAf7/kAD//5IB//+UAf//lQD//5cA//+YAP//mgH+/5sA//+dAf7/ngD//58A//+hAP//owH//6QA//+lAL//pgBfAAAAAAAAAAAAAAAA4AAAB4AAAAGAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAABgAAAAeAAAAc="><link rel=canonical href=https://zhuanlan.zhihu.com/p/685361884><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style><body class="WhiteBg-body PostIndex-body" aria-basefontsize=16 data-rh=class><a id=ariaTipText role=pagedescription aria-label="欢迎进入 RDMA（三）- 从DMA-BUF 到GDR - 知乎,盲人用户使用操作智能引导，请按快捷键Ctrl+Alt+R；阅读详细操作说明请按快捷键Ctrl+Alt+问号键。" aria-atomic=true href=javascript:void(0) class=skipAutoFix style=width:1px;height:1px;display:none!important></a><div id=root><div class=App><div class="LoadingBar css-55n9hh" style=display:none!important></div><div style=display:none!important></div><main role=main class=App-main><div class=Post-content data-zop-usertoken='{"userToken":""}' data-zop='{"authorName":"Bruce 仗剑走天涯","itemId":685361884,"title":"RDMA（三）- 从DMA-BUF 到GDR","type":"article"}' data-za-detail-view-path-module=PostItem data-za-extra-module='{"card":{"content":{"type":"Post","token":"685361884"}}}'><div class=ColumnPageHeader-Wrapper style=display:none!important><div style=display:none!important><div class="Sticky ColumnPageHeader css-1l12z7y" style=display:none!important><div class=ColumnPageHeader-content style=display:none!important><a href=https://www.zhihu.com/ aria-label=知乎 style=display:none!important><svg viewBox="0 0 64 30" fill=#1772F6 width=64 height=30 class=css-1hlrcxk><path d="M29.05 4.582H16.733V25.94h3.018l.403 2.572 4.081-2.572h4.815V4.582zm-5.207 18.69l-2.396 1.509-.235-1.508h-1.724V7.233h6.78v16.04h-2.425zM14.46 14.191H9.982c0-.471.033-.954.039-1.458v-5.5h5.106V5.935a1.352 1.352 0 0 0-.404-.957 1.378 1.378 0 0 0-.968-.396H5.783c.028-.088.056-.177.084-.255.274-.82 1.153-3.326 1.153-3.326a4.262 4.262 0 0 0-2.413.698c-.57.4-.912.682-1.371 1.946-.532 1.453-.997 2.856-1.31 3.693C1.444 8.674.28 11.025.28 11.025a5.85 5.85 0 0 0 2.52-.61c1.119-.593 1.679-1.502 2.054-2.883l.09-.3h2.334v5.5c0 .5-.045.982-.073 1.46h-4.12c-.71 0-1.39.278-1.893.775a2.638 2.638 0 0 0-.783 1.874h6.527a17.717 17.717 0 0 1-.778 3.649 16.796 16.796 0 0 1-3.012 5.273A33.104 33.104 0 0 1 0 28.74s3.13 1.175 5.425-.954c1.388-1.292 2.631-3.814 3.23-5.727a28.09 28.09 0 0 0 1.12-5.229h5.967v-1.37a1.254 1.254 0 0 0-.373-.899 1.279 1.279 0 0 0-.909-.37z"></path><path d="M11.27 19.675l-2.312 1.491 5.038 7.458a6.905 6.905 0 0 0 .672-2.218 3.15 3.15 0 0 0-.28-2.168l-3.118-4.563zM51.449 15.195V5.842c4.181-.205 7.988-.405 9.438-.483l.851-.05c.387-.399.885-2.395.689-3.021-.073-.25-.213-.666-.638-.555a33.279 33.279 0 0 1-4.277.727c-2.766.321-3.97.404-7.804.682-6.718.487-12.709.72-12.709.72a2.518 2.518 0 0 0 .788 1.834 2.567 2.567 0 0 0 1.883.706c2.278-.095 5.598-.25 8.996-.41v9.203h-12.78c0 .703.281 1.377.783 1.874a2.69 2.69 0 0 0 1.892.777h10.105v7.075c0 .887-.464 1.192-1.231 1.214h-3.92a4.15 4.15 0 0 0 .837 1.544 4.2 4.2 0 0 0 1.403 1.067 6.215 6.215 0 0 0 2.71.277c1.36-.066 2.967-.826 2.967-3.57v-7.607h11.28c.342 0 .67-.135.91-.374.242-.239.378-.563.378-.902v-1.375H51.449z"></path><path d="M42.614 8.873a2.304 2.304 0 0 0-1.508-.926 2.334 2.334 0 0 0-1.727.405l-.376.272 4.255 5.85 2.24-1.62-2.884-3.98zM57.35 8.68l-3.125 4.097 2.24 1.663 4.517-5.927-.375-.277a2.32 2.32 0 0 0-1.722-.452 2.327 2.327 0 0 0-1.536.896z"></path></svg></a><div class=ColumnPageHeader-Button style=display:none!important><button type=button class="Button ColumnPageHeader-WriteButton FEfUrdfMIKpQDJDqkjte Button--blue JmYzaky7MEPMFcJDLNMG" style=display:none!important><svg width=24 height=24 viewBox="0 0 24 24" class="Zi Zi--EditSurround" fill=currentColor><path d="M4.352 6.804A2.554 2.554 0 0 1 6.905 4.25h6.072a.875.875 0 0 0 0-1.75H6.905a4.304 4.304 0 0 0-4.303 4.304v10.142a4.304 4.304 0 0 0 4.303 4.304h10.143a4.304 4.304 0 0 0 4.304-4.304v-6.071a.875.875 0 0 0-1.75 0v6.071a2.554 2.554 0 0 1-2.554 2.554H6.905a2.554 2.554 0 0 1-2.553-2.554V6.804Z"></path><path d="M20.595 4.731a.875.875 0 1 0-1.237-1.237l-7.763 7.762a.875.875 0 1 0 1.238 1.238l7.762-7.763Z"></path></svg>写文章</button></div></div></div></div></div><article class="Post-Main Post-NormalMain" tabindex=-1><header class=Post-Header style=display:none!important><div class=Post-Author style=display:none!important><div class=AuthorInfo itemprop=author itemscope itemtype=http://schema.org/Person style=display:none!important><div class=AuthorInfo style=display:none!important><div class=AuthorInfo-content style=display:none!important><div class=AuthorInfo-head style=display:none!important><span class="UserLink AuthorInfo-name" style=display:none!important><a href=https://www.zhihu.com/question/48510028 target=_blank class=css-4gq0sj aria-label="软件开发行业 从业人员" data-tooltip="软件开发行业 从业人员" style=display:none!important><span class=css-18biwo style=display:none!important>​<svg viewBox="0 0 24 24" class=css-1ifz0go width=18 height=18><defs><lineargradient id=biz-badges-blue x1=0 y1=0 x2=100% y2=73.32%><stop offset=15% stop-color=#47D3FF></stop><stop offset=81.54% stop-color=#4A7DFF></stop></lineargradient></defs><svg viewBox="0 0 24 24" x=-3 y=-3 fill=#ffffff width=30 height=30><path d="M3.56231227,13.8535307 C2.40051305,12.768677 2.41398885,11.0669203 3.59484487,9.99979213 L3.59222085,9.99654885 C4.26730143,9.45036719 4.79446755,8.21005186 4.7184197,7.34453784 L4.72305873,7.34412719 C4.66942824,5.75539997 5.8824188,4.56066914 7.47188965,4.64242381 L7.47229112,4.6386236 C8.33515314,4.72977993 9.58467253,4.22534048 10.1426329,3.55925173 L10.1462611,3.56228565 C11.2316055,2.40008701 12.9353108,2.41394456 14.0015072,3.59634088 L14.0047263,3.59374004 C14.5498229,4.26841874 15.7896857,4.79521622 16.6545744,4.71844347 L16.6549836,4.72304294 C18.245027,4.66894057 19.4396947,5.88213996 19.3575031,7.47241135 L19.3623099,7.47292747 C19.2704388,8.3358681 19.7742711,9.58421483 20.4407199,10.1424506 L20.437686,10.1460789 C21.5997217,11.2312209 21.5860695,12.9345218 20.4042441,14.0007396 L20.4072865,14.0045125 C19.7325967,14.5495925 19.2055209,15.7896954 19.2815865,16.6561959 L19.2770449,16.6565978 C19.3315454,18.2453037 18.1173775,19.4393568 16.5274188,19.3571512 L16.5269029,19.3619539 C15.6647098,19.270083 14.415408,19.7741709 13.8573671,20.4403558 L13.8537409,20.4373235 C12.76842,21.5995708 11.0650432,21.5864553 9.99899434,20.4039226 L9.99527367,20.406923 C9.45025436,19.7323399 8.21017638,19.2051872 7.34461983,19.2812352 L7.344304,19.2776405 C5.75448683,19.3312904 4.55977145,18.1170085 4.64254978,16.527117 L4.63769921,16.5265942 C4.72957031,15.6644394 4.22547659,14.4151814 3.55928015,13.8571569 L3.56231227,13.8535307 Z"></path></svg><path d="M2.63951518,13.3895441 C3.70763333,14.2842292 4.44777637,16.1226061 4.30075305,17.5023312 L4.32211542,17.3063047 C4.17509209,18.6910561 5.17786655,19.7063729 6.5613937,19.5844846 L6.364106,19.6008202 C7.75140298,19.4789319 9.57474349,20.2554985 10.4468305,21.3349009 L10.3224262,21.1803415 C11.1982831,22.2647703 12.6257916,22.2723098 13.5167278,21.2079863 L13.3898102,21.3600325 C14.2845162,20.2919393 16.1229361,19.5518136 17.5026934,19.6988334 L17.3054057,19.6774716 C18.6914461,19.8244915 19.7067866,18.8217404 19.5836389,17.4395022 L19.6012314,17.6367853 C19.4793403,16.2482641 20.255925,14.4249662 21.3353526,13.5528995 L21.1807897,13.677301 C22.2639871,12.8014646 22.2727834,11.3739894 21.2084351,10.483074 L21.3604848,10.6099886 C20.2923667,9.71530351 19.5522236,7.87818322 19.6992469,6.49720154 L19.6778846,6.69448464 C19.8249079,5.30847665 18.8221335,4.2944164 17.4386063,4.41630468 L17.635894,4.39871256 C16.248597,4.52185742 14.4252565,3.74529084 13.5531695,2.66588842 L13.6775738,2.81919121 C12.8017169,1.73601905 11.3742084,1.72722299 10.4832722,2.79154644 L10.6101898,2.63950024 C9.71548377,3.70759343 7.87706394,4.44771919 6.49730661,4.30195588 L6.69459432,4.32206116 C5.30855394,4.17504128 4.29447,5.17904888 4.41636114,6.56128713 L4.3987686,6.36400404 C4.52065973,7.75126861 3.74407501,9.57456653 2.66464737,10.4478898 L2.81921035,10.3222318 C1.73601288,11.1993248 1.72721662,12.6255433 2.79156494,13.5164587 L2.63951518,13.3895441 Z" fill=url(#biz-badges-blue)></path><svg class="Zi Zi--Check" fill=#fff x=6 y=6 viewBox="0 0 24 24" width=12 height=12><path d="M10.229 17.516c-.318.327-.75.484-1.199.484-.453 0-.884-.16-1.202-.488l-4.335-4.47a1.77 1.77 0 0 1 .007-2.459 1.663 1.663 0 0 1 2.397.01l3.137 3.246 9.072-9.329a1.662 1.662 0 0 1 2.397 0c.663.681.663 1.786 0 2.466L10.23 17.516z" fill-rule=evenodd></path></svg></svg></span></a></span></div></div></div></div></div></header><div class=Post-RichTextContainer><div class=css-1yuhvjn><div class=css-376mun><div class="RichText ztext Post-RichText css-jflero" options="[object Object]"><h2 data-first-child>简介</h2><p data-pid=VJEFK9Dt>Dma-buf 一种在用户进程-内核驱动/内核不同驱动之间进行buffer共享的框架，不仅仅可以共享dma buffer，也可以共享普通的内存buffer，当然由于dma_buf设计的初衷是解决不同内核驱动模块和设备间进行快速大数据传输的问题（自然这种场景主要依赖dma），dma buffer的共享在该模块中是使用频率最高的。尤其在GPU 通信方面，dma buf几乎统一了所有的GPU p2pdma方式，包括android著名的ion也使用了GPU p2pdma。<br>DMA buf框架将内核的一块需要共享的buffer和一个文件fd关联，通过fd的传递，得以被各驱动模块/用户进程使用。本文会从dma-buf 理解p2p，最后讲一下rdma gdr的基本原理<h2>基本示意框架</h2><p data-pid=AN1G2v3g>下图中理解为fd&lt;-&gt;dma_buf&lt;-&gt;sglist/page&lt;-&gt;vaddr<figure data-size=normal><noscript><img src="https://pic1.zhimg.com/v2-db919a996e1e0dd6179ed8622363669c_b.jpg" data-caption="" data-size="normal" data-rawwidth="1634" data-rawheight="794" class="origin_image zh-lightbox-thumb" width="1634" data-original="https://pic1.zhimg.com/v2-db919a996e1e0dd6179ed8622363669c_r.jpg"></noscript><div><img src="data:image/webp;base64,UklGRigdAABXRUJQVlA4IBwdAABQrwCdASrQAl4BPm00lUikIqIhJZGp4IANiWVu7orQAuPllRps7P4bY3/C/2r9ueKR8D/Jhjb+B8rf6/7n/mj/t/Vb5gH9x8rP9gPdR/V/+b6gP2n/Zz3ZP+P+3Xul/s3qAfzD/R+s5/nPYr/rH+s/+vuGfxn/P+nH+6Hwj/3r/r/u37anqAf/XgnfN3+F7Zf7x+VHnf+K/QP4P8qfWLx72l/yf7kfmvMn/m+C/xz1Avyb+c/6Hed9H/1X++9QX1r+n/8j+/eLJ/P/mr7k/Zv/I+4B/L/61/tftz+d++L+1/6X9pvgB/mP9b/3f+P/LL6a/73/3f7Hz7/VH/q9w7+Zf2f/n/4ftZfu57Jv7D//8k1cTcc59f7PATKPyk4aDcdEPNA5WZ5z2vVNpVZnnQbjqX+0BP6WEUFt7MDre7IBnbmennROp/3IqKSAMGxMMFQ4dTHk14kgirGWvDNAeWIUEfQRbFOlGZlYgU4bPT1J9bGpgAiRM5FLtKG/GLeKFuFJCpLOp0D46Zl1PF8OZhd/64pECsnOGgPLEKSHd6jVEIadZnnQbjqYAE1EJMYrM3OzBvv8DqWN09wVASjxbhmMmAiRM3+DQlnnQbjqYAE1EIs86Ddxh9UADeXSKAXILshyJuOpJypfM2kG42f7B/kExVwKYuCAa/4ZutmMuyhTpQnttVCKKuvMvlWwzmuwgr/FUCZ1x8++Cv8YQV/jCCv8YdBqgZ/jCCv8YQV/lr8YQV08yUigW2uhIm3iTFY46mACI0XsdPYA5lktwLedBuOpNpW8jGS8giS2ddrbmsL6b5qO8t1nomXx8S+nkuJZg8VJ+lNilxF8nSHusYDe9MiVuFCHPLexktOOzi1os8oHhrcKCjOFVI4YULbe0cvKoJvRkFWxMRnoDYmyMn5Dy3n4s4JBbMJscoWPDIDGGU9YmyMsfycm8zUoDywyMyBf8BEWbpn/vnk8M0BrIhSQn02zBc3HLWLHG5vWxpKXUsbebBo/W7lhSK9I2m3NU7wkWpc8eICtn+WsV1cPkgI45/P4CPWY1IXUwaUal/rJBKqX/H8n/kgPl7jeK2XHcMpTemJDwDOU+VIaEF//KrLkj2YlxcLvuy2JlwymX9nr+h6Cl0hqamR+RyuSPVFUEWg6fbQXLBqszyZtR5WbHJoZlsoRpbSYqiLwmgnxKrdf4IHRkh5nBwFzRYfEq+9WLqRA6mh/OlNsyPreLcAsrhAP6e9zgnc6XpKFyBy64k9YWVIEMKP+pZA6ekqt9QAB95r/VZl9RpPTLMn1sTMxyCuRtFwpyK3ky/ABy4wIR6o6SI/nwj8jlckgdXsL/QZPOU+VVqtZb5VXEseK3kzZzn7YmZ4Z8kC0Is84wK3mN4CbbzjlMn1P8uA1Vqs9uMpIF7al5DFTT3xEs8mbYrHHUg8TroHqXJn4w0WTOWuHCU3lVZu8B65ylcDXG2/lTEnUnyrcSjmkc3WfYqMzZ+MNFkz8V6lwtybfABEibjqYFtHz+yE+UFu9P/4UtVLqhay/4a92edBuOpgAiRNx1MAESJuOpf6MYF9bnDQGsXlJConk4sEg3wARIm46mACJE3HUwARIm46KYi6aPg0a/XOBWVZG5vUdGMrgpSWGIc9QPu6B5D9ecgqiYX6OZ0fM/bKNi0J6nR9WY6uJj2G8iMFfwuUQC5j74IZXE7cDtyZNVLRdKrM86DcdS/1kgQZtSMIZacU3Y/cT+lQakHjb7a2GwunjhoA018mr3jV21qCJyC7zRYiobc4tHujQUEqqWtQnpB1v3e3Z0dePwbgus/j2BSlVvYXF92VG3zmyWkO6ClJ+rbObS+ti6dg86DcdTABEiZL+jAGZD0al4sDGvwPKrM86DcdTABBgAP7/XQD4z6nAWvW6nQYg8VQ7UbXloFtAMSjgH21pGxq7qvxi7JUMlhaC//LkjpKnn+sWbzVHY6+nn6hdX7yr/gqbG1ubKAC4j9evqViXnZ3v8q8pfcGWLyZ8HHthSa8BoxiyLR2UEtNgAwP6Ox+6MUZK5vFVtJai+9v5xRehF3WQpJTMfZb+5SkWGGUFqh/Jn/t9lrtkzqwqyFmmj/Bwt7UJu3gerbicvCF6dmcw3nHp9cTPyGYJ11WTve5Bx0BONK2qYlImjthWn89NISWIcG6mH+2M9xyTVw09LmdBH0qUo32943nCGI5hx0xIqGXY+m0B++wAMKm/AbjNJM2dDuXQ3FEdAdoiLRW9rdYKyIOlOjIsBzbnCXT8MjkXyG2IoV6DORvUbaq+A+mqsMH5kJwB0k/Ctyv9zrvpIhufr/xbZO4+7n3UZ/zd7J2R3aAARjoGX4vcoiUZ+kv0mZ/y1GHQ8+S8ks32Ikk3yYXZKFwvmeOAeeLNYA5I9v7ZU84fL4443j1n16GbXlfZfFvoVLC0iEJEH+XzEnIqwU264XM5Cy7z/CFRc93g7+gLbs9Wscy6AhJxlm7habw4ektXv5/JIzMCuV8yEFD14Pm01zq2Eyx/lFF/pMMd4sL78fEXbgVHr8aCzy7qZsjjgj6Yl0IuuAR6JXVaOCVBgTVCVEnJNsgfQrwLebPoEZL1Vffw+Vv9Xfg7r5AHF0OSmNjMu983f+CCdovu39djN8QK9Q5X1bqQOhsm88QXFtP6CnvFJOCKn0HvrN5WxsL+ayjLgYysbfwNuSHTCyRlgtMses2sceT4VhhF3LTaAK7Jn2VK0lGpg+OCaDc1OjGFMm3mtm+1nFwhyynVg7Gzjcru2o+Ow6LtwosAhtcasDh9AXrhi7yes4eh6p5KezBWsBZVOSxYEuC/WDkwVKqjizOnti5TVeM/lLxUj72GgABOsBbkQvP0HMPMRdFKAvJGBQNFh5vsKfZaRP/9Psbc0AHLw/ufrfOaDycxhQWSNN27Nte4my8aq+8tbAUhNGqT7AryrHZd9swaX7sKNOdKOjYh2GfNmtxvV2f6RcNgc2TZICStiADE/4CYQduob+YI06MRGwFPtc8aowwQgwZo73qFyesPE2tk6Yu48iyGfgSd0a4OnMq7bpsDjY9tcz6DO2SSBx3NIXlN8d2ZPjpp+I58QcPg4MKQSVUG8kXKir+v/OpXJwljwhP7gXs2pYD6dvzuJpIdjKQXbOB/gcUD4+SMORM7+iVTedur7/zwRT8Ft4XbCMFlrywPFUmdN3cqyMG3h0cd+gIsbjQFLvWUtLyZ/3w1NT9JQz7F8CF6DrYBCU/1n/pLpPwZsz6h3gcFgSKCFJNa+9y1g01Id06FJpY7mGgFTi/s3zAXWQg1GhxMrpdFaCRNuKpDgKORrDlJcRwHy+ph1mwtt/qqOse2Ty827RqKp1yzck9eKL5O0axnolsKPqO5jzEiFJy8+57r6i4iSFdZYX/IZLhPqADvLGle2QCDls0c/tpqmK7+SEtNiY6mSSsxjDWzOAjmd4deBUlgVEyVzJsgNTSqCfkihCz+X1/QoZOR/v8k09GnkLmyvrPv0uVbEvuWQifb2EY0rSwns8HVH6IMqRWLV3FyXXpsSGVZljStJQ2snI0CKbLZQM+uli8v6Waki4v/8gfUJRmtkOrIsPKtHw/Sg0SdkEeVWzivGuwRG8VmBfsA/hP0wmj3s0jNkjAHR7Kvz8ZHH9+prVBm6wGlepG71etJgug3kMyzBQn8qnzj8+GaNL7IhxA4K7MK0ozty74XtRvz9pODa2sh1k3FIfMzKbHUbIOO74R3fGSvCCCZX/daI+KMKoByiTqJ9NcJLo6V/rsHQRRNOx3VsDL6wfF2lgOK+9UOkJNgFQgwHoqYD+tKicQnyDKf5wZ970s5Ccd175fFK2GPEoqjuhSjdeCn7h9FjFrfbT/IMRDwpsFLjeg/ts8po5iYjV+He3jAzbSKE+0AE3EvA/EycuKhmPwG5Dksp2/naJjM4TC/p9c2Eofmby5bQFBZaEe7fvq3slu3QwKttb62PPvUgNWJZ+1W5qd8294o1PdgWLT0bUyCoY4tCww721z6pQJmE++ycR2h4TutBkak+GeHVqAWpNaUuAJMbLBJkVGvLPs4KHpHQ4l4Sffvb4a5nLFHwlKmSBen2TROzMRuWY/NICOIrjG6GnK8hdFgMHpzFG03UiusVfj7kHd0NR9snGTWKgbkmqeUBbJSQ19YOYvxPSkZNH6I2O8mhZTM/UaODvEf1hebDNasi49LgH/mA2nLriw18qW6kEWUFZkYccQIWhysQHdexRl9m653aJz/YW2X3GMOqvT4aypb0gV8pPG9bHRsNhsb6m2Og0DB5G5/x9iE1jVuHO/riYiBjS0jwe/2lP160ZDmzQNo89/4Ug6cxjBqVyHrmSG3bvjbVL3a4OYaqwdaN8nrkVaXPUfaoM7FVCf4P1e4j2gXq7bR9XX0CsWijgCE3egBFSKoPuFtdvo1YVToYpLQTMVzitPGEItJoqbSeWk/DU8Qy1Ic0KuIVLPweANNsAX8gSSOJl4jz/PnbJ4EsCouG5ct5hc4r3ZYzZp/E0ruwSx/pnAL4HVZ+ceBOOUg9vmNTohRi+1PAqyWSPCdYI4B7TXjVSVinP9ItIXGZQ2N8Crw1eir4EpYHBLo8lGoNjOZlYI0Ux6uAJrsweFMwjn9d+Qkzvymz2FVLniKNz7Nl+psxhFzfEqeBkjOhR53uFTfY+XNfFZURqtHpBzqLaxHf2GIvMEpgZ6rX9rxb+c1Cq8VWDIb1jbAPzAGEjn3FXEpdymc3bIH2oXpjfg8gfz+8cn3+2aXi4G6zlTnM0J7r87WVFOpiGXa1bE/XOHUjRtOg0RKdNQT2ZyWAXDLO7qNzxnn7vboQa/ggKqT/q2D/3Jkvlnxb7Fii5Ota5c2L4EUvqdEKKtfGbt+FGcnrhxpSAvNpFNc3nn2vQsoo3HsUL/nSeLyOURbg+dOxRb2sHFpPM3s5vYLCXT1KyGt+XlcBo1OmiwfTLIL+TvnnVLGL/MRgR104iqOLxnO1jIWjUV3tt4c1TQ6u7Y5xT2mFJGlmw+4NqXAVNI5fj7YonkGczI7vcxA5CJ5H+2JL/XUHscXOQYorCIShobin/f2QyscqPeoyyOdNC93GtGXMWuvll2ER2aVeEQRmzuDiyuf7ie+sZKhsZaNypDUsmbffm5Ti2AP2ORt7V1PhWG1aiicmNcbZPhJF1f/yK6kb67Gtx/M/8FH1a/BcXmaP8wZTfDFiNcQKaS/L+a/RqcUZQ/t/1O+6eezm+l3v+h5F9IILfCeCPg5h0qqInSviLohHj0/ext9loT9v1STup+odXYf7cQhOXG8EiWhgtwLxhozVt1hSjsHYWTx/Fgj2uKlIqESS6iHf+C8KlFe0NY49/lrUFfFjoSpWVDuV5JesvrSgGogNgnG2wgGmPhEqmhXk6oXefE5InmZMvB4yrsT0DY/6mfZZRepAsU3NsdPjMdYulzdhvnbqWdkpwH/7M0F7zzClqwT/6Lmt5ildfHXdM/Pvh1rNXUEhAJp43QFjWurUVMLat5+r3adnKCjaZn8IbQ70mTbKzDLKDC2sIct5xzfHI2LQMreLOoB1vJgUJ7SFXUOahWohkBpqDiGJejwGGMyayaPwXhYYKO9SkXOHk3EoOmwld+SuWMCJQAGsgA0mV/vIf6QfbSglaUHK8SDj+6hzKhJV5e1UoDj1sZxFtQvdxg43hfKOlGzBa1xd9mCEhhlqvswZVy1O9WxMNSvABnibr2kCATKV+UnraMr2w5HgaB3rBGoc+t8FDq2tZ3NMychQFny+Ta3eOlBY4EoJMRdwiEySkY8BG3J6lB6kOPJJgRi9MC8wANP/gHBy3qDlu30EXVAkXh6dCklN762aYSziTHx3/IgdqzpUex/No4qeTVNtK3s+NEBVuh0tYFpBlAXawBrH6d6xrTHdOuoSjB5fdMbYzhkVoxZtusfUxPLay3EmQWmzVLaSYM3E0JaC6IAz8lO/WWZj/jVaRY5KW/0quqAURvmFoorQywpwgUQ2zMMBWi+Ir/nLYvUx8m2sRM0Qbdb3RmAe6yJn1U+5nazvwxoPlLzpmAWmmP60UG/+9Qlm5YSse1OGdm7pauTCkcGYXpuycbj7IM3r1cR/Uw7Q5aUP91LZn6jbuns1+86CuntyggMJM+SQ3//20ejD0nMdU2RhWFSRue4j/T7+NEGWj59zT1CcW7Nz657usnZ4MaKPY3GBbqwoXTjIPYbwJp7C/5jL+6+Ythz23hDdq3f4NUTs6O7NhjotdFBSyElka3SD99Ru4KNr8VDL3O2MvhYMKk8P6uvSyt/D6jpHvCdogpJ5+AE+/MU6UNoq6M+0TcO4PiHz2pCYcKfs5nlMLAlu+ZBNfXwYxGcpGzIt1ImZhuSTTmoC52W2J/T8oC9NuaBPWLPot0k5jdSYiJPylc35HzN/go8EkbPZaNbkbPI/rNGWT77K0ydgPu94AssFXh30Ailt6wPyx3piWbWV+lRzOzd5PAVRg7eSy88S0fdSk3k7FDZ7sWgcXV0aEOYSb0ldMsy5p6Ns8hxLX94f+gXlYjn+sqtmfvQNCHV3KZF12yktKx3d7PwDwSUMREaoXLcdb5GjN4aOrD2Z6HScfOQwDQVCFxRhybDw/WgzpfhNVYfu5eiHTw71UjumhxnUmuXErXojxspIDYxxSWQd0a2FCQVEe97FOp8Ke5c0AwA0ssEf0MGn4X7U0tlHj3zQkxYpDxaPtvw1VLyDSTJqHdTkct3FMWb0C22BUjssgsqwxi1+lHetBqKhoJKblM6CYCu0F55HuagVqvHDFb9o6ybVGlaLiId8UB4VfUCfzcOxS+u1NdSMuDIVQMvdh6inM/7Lf2aHjgRooZJPWeKa/sEZkiN3rUs0sGjU68jn4V1EZh+wP1dME4NNZWBtd8LU+yIf2Fefp+sqCjKEWh4nP1PjPsXVbE5xsDOTj5zZcKlX0pph7bM543ApJyjYpChykriMMS3L39BIjiSkZp0k0xbMGlIq9gdQEMsDLEfc9PiVJ7Zms1Xz0TBGWK6HMJ30uWgWv1uWJuXhBBCJMXA5lSBVR7vs0UhJ+fz6w3yaW9PEfJ/fSJEofzt9pFylPdtwY2NnrZFRB2iX2mmqCqyuyg8DtEcmM/Vlb3lmr3hnQRezLxokDo6U5hjJEKSPQGeURHEXfxLt+IiXwx1dUvvRckCasd5WzBY7RlZqs2soK4iFyckdalG6hm56eMIaHUEvWP4FFYvmPizuXRzu2HzEm3H9SON3JrNv1oOK3UCCPGc5HAy2YXxc7H37Olv9TbwvH9hahSLsW6mXEsx2Ljr7Cero2CcE/tHVYVgUGHAeL46DBXoq5go3WNMLgybNCNWKkherdBUpLY76A0zcUy0uYqJNyAym8h7cVN2lQEERd98LjeZYRzqykgA4bTrSDklL/vqKI3qTn/jEUrn8WKV1gBAco7mWgJpbBL+Jxk55gN7+C9Aei/4CvCgoBoqLwHRlWoNJQK3GLApJ3Plwell0RbjKMOP2iSCwOFg8wtHTrhpYUAGpIxEIUDCerOipSD0zmqHQfqPZZvQKlV6DA4sCgxMuANdlAYE7cIZhGSWuTA9R6AbYsYb78oDquNyGxh5N3mJ2PlQ5ksr3qe+F1iD8LFb6sXXm/7VjXa6lNvS6f7qJqQOVMAdrLPcoA708qnUAznjtIU90J9c9QhxMv/H8htQJOYgBmWu/vwHCFsLvgRdeazyLFRWpEjPS9ssBjhtGnfLc/lnJLD/ZMNEWkeIhs2Lir2ToYZ46eEA+i+ZsULtHyFU8DLeDYxKYAGGmG3BbQEO/H6S4qFIk0UXJhoMSIUIT3Cb2exJW/SxkemsK0jxWRcUVJd3LPYVtVohqb9SdrrGpMyDjVg03VMppl0ok4AXZ4bpausGShvkuc2iQvXJp5AtkAAAdJEAyO8yjyDEFNOpgdYmmh/6K01IaH/26ErWeTKXygIwltABCQbq8nVxAD0I6Uhc+2zWqej8hf6sC2BKgAA7O4hOxECUOsscBTPziz9gwC2NWZ/UTPigbC9/X1VKmG5yxk83cq97xoy35FJqGHkh1BUWYzVkm9YUxHdL/XYraGO/Ya0NRUAVz+uBacNzDRzbn2+Lc2e7clhzKd1JJH493jtwjstRQ8/x75iqwnAAcAU/GKYwDYpKQ/sD00Cerw8iE+/tljVQQBpwDXvXX1hF3I6QMD6tKpctW5y89GtEZKgELTpYaeLwXpHt9xnwRwdqC1y+Vdv3F/oMFaQbeO6rzsJDMkf3JSWwidk5AAUt/50xPwN+4NJRTUIJiMNw1gfiktG8zTFw0ctUvKTIPl2064HTttmdKQIqOE8cnwhqz+UE2a14IzdKLbTCE2OJrLVYjCAOoyWg7jKGKcQEm6mE/+zRQSQbegmeA0KonySiIkKO1wGEQgBcvfIGBkhgYLdh7+UPm8tiBPiGJLS9WPmpXn2cFzoBTdcxECkGDOIg/b+QMD9LotheGauGQMC/ayb8gJk3/LsioVnFuDDyThsjryo4NlJZcRI+yzrG7RWffENgm/lhRFQzjm47zJj4vpxKyRWUTt72nh8SxcWptuuEuMyyVl1QBRh4Uiq08YiMMhkZPlohxF1/cHRjDb6QP4ZRkXiJnvbIOAFoxUXchdW1rJCuNFwF+gvJUpa00pFpUU6BA3QLatTxEJyATweoFfDAmZ428Ma4mQ80bP+xlrlYdZPBcLlIq4VhYbOr4HcRRbP1P0iPsYDIhlusIQg7sNFhLYKnn5SDit2A3+nOdbh6zlzubJy4TcN3lzMdQVKFIRl4GR2TphbchN04zsILkAV5RllDF9/ELR/ObZIP9xuAqUQs7mxbjR549IZBq17sYOiENyqBFWbsqXIrdFNxdiEDJvMZjiMa0bcXChTu9D95DhajAUP2RgLw4AWwAGK6+QcRRhAsPrV240pIIuRx6wh3Cob78Bfl2mc2SJ+Y8gKQ+OdzWEyRd6rS6rhdmKhzfOoDXLyzYT/ciFqdzLPxG8RLU+CMmgaVneezZ/nV8MBh/RAu+cLU6YEskoePa0r8odpwza8GaAwDdoyenOXjwL57HyZ4I8j715rVtYsBm7lk7mxHfSUNryvI0lpR8kerg6wXWp6Q6XuPP+HHU7Oc/IpkNhYhIXM2NLvIYLMFAi6rI7blL3xf8U8oDWE3bRaucE6nLGcH9U9NViUNyvaUJLtPGAbffJsiKKC2OVedP78B0F3GD1AYgCb+BchrRc27LEptynr9uYBOF79Bx3eDxnMFkYGI5j/Ua91Vj6Ywc9BgsI1XK1qA4tElMC7AiJ+PwnltAWsej+6YRyqqk/yBmHJ6CxoDreGoukcIUi+ZfoDBtoRzXbyQAMMchrKw466aiiyZwoNZXJcPHnb6zPIMZYSs4Bc+DKWvjezm4ad4ntCss72ufGsRZFPKoxeU0GeN6JHEqJvBrGtrvl6KYKoBfy/mvsbnZOFBnT3QT6hc4NWJi7T17AphQ0V8nkQp1zSaMujSFlgdK/Wfug3ZWLDmUr4zCmOItl3nSl3/AJg2Ab5b/khkt0VqP1zXCXAQUIhJPVPjfX0vorkTQ7MRisBtEb5xEIUBo80bn3fXZZG5uz9SWxSSTCk8Qx4G/NNRKfyYbWidO9cYdKNnNGDLUTYokPDsvp9mvmHY9zHCxJxFy5nBPcDFpN5KofBX1Ubrsm+m4BHeBjIdTeVaJrm4QVpZHEqfBvMbYK8hfN10zMUwfoI9FnOv2D5bF0+MNYlvFW1L+EdXOYfTwqZfsKp2ndClXKBrXEB7SrdPDXS1C9gxiigB92r7/eYa+AjLxO/qGEo6VNpbTGn6zDP1uZ/A8LJsdNW8UMal8jJkRFHvt4QyNaKJtBiksak0rs51ekTjE+TccHjxqKUbf/rfw0kLdnjL1EWHTx47aKmloUM278xM2nrmz86lJONTL5hEIAA1TIvj13sEYDshJikIpXGK3err9FxWXC95eSAAAAA=" data-caption data-size=normal data-rawwidth=1634 data-rawheight=794 class="origin_image zh-lightbox-thumb lazy" width=1634 data-original=https://pic1.zhimg.com/v2-db919a996e1e0dd6179ed8622363669c_r.jpg data-actualsrc=https://pic1.zhimg.com/v2-db919a996e1e0dd6179ed8622363669c_b.jpg data-original-token=v2-9b0b781a54fdd726b5c0cc31a8d317cd height=794 data-lazy-status=ok></div></figure><p data-pid=OVzu8a1G><br>主要的角色有三个：<ol><li data-pid=sPjOhAUr>Exporter: 提供dma buffer的ko模块，即共享的dma 地址空间由exporter提供<li data-pid=_3XTw4YO>Importer：使用dma buffer的ko模块，可以访问（读写）exporter提供模块<li data-pid=NNYm1Lrk>User：用户进程，通过fd转移给不同模块或自己与内核通信</ol><p data-pid=nzNbS3cH><b>注意1：</b>由于我们依赖于fd在不同模块之间传递buffer，不同进程之间共享buffer不可通过dma-buf直接实现，因为不同用户进程的fd/虚拟地址空间是独立分配的，进程A的fd/va对应的内核资源对进程B不可见。<br> <b>注意2: </b>由于dma buf的核心共享的是dma buf对应的vaddr（转换成<b>sglist）</b>，所以dma buf提供的仅仅是buffer的共享，与p2pdma模块（另一种实现p2p的模块）直接map 驱动A设备的pcie bar交由驱动B管理是不一样的，p2pdma给了更大的控制权，而dma buf灵活许多<br> <b>注意3: </b>我们dma_buf核心依赖于vaddr，所以我们的设备无论是访问host还是device，都必须要有host 可见的vaddr<p data-pid=pXG8oKOj>DMA_BUF OPs接口<div class=highlight><pre><code class=language-text>struct dma_buf_ops {
  bool cache_sgt_mapping;
  int (*attach)(struct dma_buf *, struct dma_buf_attachment *);
  void (*detach)(struct dma_buf *, struct dma_buf_attachment *);
  struct sg_table * (*map_dma_buf)(struct dma_buf_attachment *, enum dma_data_direction);
  void (*unmap_dma_buf)(struct dma_buf_attachment *,struct sg_table *, enum dma_data_direction);
  void (*release)(struct dma_buf *);
  int (*begin_cpu_access)(struct dma_buf *, enum dma_data_direction);
  int (*end_cpu_access)(struct dma_buf *, enum dma_data_direction);
  int (*mmap)(struct dma_buf *, struct vm_area_struct *vma);
  void *(*vmap)(struct dma_buf *);
  void (*vunmap)(struct dma_buf *, void *vaddr);
};</code></pre></div><p data-pid=Rn8H-FJl>以上接口，可以分为几组去理解<ol><li data-pid=h3kIa8ac><b>map/unmap_dma_buf</b> exporter提供dma_buf，ops内必须实现<li data-pid=1xWZ5pm_><b>mmap</b> 用于用户态user访问1中提供的dma buf<li data-pid=GlbOqpF6><b>map/vmap</b> 用于内核态importer访问1中提供的dma buf，两者区别在于物理地址是否连续<li data-pid=2K4RGQR5><b>begin/end_cpu_access</b> 考虑cache一致性时使用<li data-pid=H3USCQS7>attach/detach 设备绑定<li data-pid=sk2THUDp>release 当无设备引用时释放</ol><h2>DMA_BUF内核关键数据结构</h2><h3>dma_buf </h3><p data-pid=DEwGetqK><b>核心数据结构</b><div class=highlight><pre><code class=language-text>struct dma_buf {
  size_t size;                                 // buffer size
  struct file *file;                           // binded fd
  struct list_head attachments;                // attached device list
  const struct dma_buf_ops *ops;               // 由exporter 提供
  struct mutex lock;
  unsigned vmapping_counter;                   // vmap相关，非必要
  void *vmap_ptr;
  const char *exp_name;
  const char *name;
  struct module *owner;
  struct list_head list_node;
  void *priv;                                 // exporter 提供
  struct dma_resv *resv;
  wait_queue_head_t poll;
  struct dma_buf_poll_cb_t {                   // related with poll in userspace
    struct dma_fence_cb cb;
    wait_queue_head_t *poll;
    __poll_t active;
  } cb_excl, cb_shared;
};</code></pre></div><p data-pid=mRnIy8HP><b>dma_buf_attachment</b><p data-pid=2kUsc9BU>将importer device与dma buf关联起来的结构，dma_buf_attach中将dma_buf与device关联起来返回dma_buf_attachment。<div class=highlight><pre><code class=language-text>struct dma_buf_attachment {
  struct dma_buf *dmabuf;
  struct device *dev;
  struct list_head node;
  struct sg_table *sgt;                  // vaddr 对应sglist
  enum dma_data_direction dir;
  void *priv;                            // 不常用，用于特殊case
};</code></pre></div><p data-pid=ce0J4V_8><b>dma_buf_export_info </b><p data-pid=nkV_yQ8Y>Exporter 设备必须实现的数据结构，<u><b><a href="https://link.zhihu.com/?target=https%3A//lxr.byted.org/xref/v5.4/drivers/dma-buf/dma-buf.c%3Fr%3D9fd2ab51%26fi%3Ddma_buf_export%23dma_buf_export" class="wrap external" target=_blank rel="nofollow noreferrer" data-za-detail-view-id=1043>dma_buf_export</a> 将该结构转换为一个dma_buf</b></u><div class=highlight><pre><code class=language-text>struct dma_buf_export_info {
  const char *exp_name;
  struct module *owner;
  const struct dma_buf_ops *ops;         // key ops
  size_t size;                           // vaddr size
  int flags;
  struct dma_resv *resv;
  void *priv;                            // vaddr or an obj contained vaddr
};</code></pre></div><h2>DMA_BUF内核关键函数</h2><p data-pid=ut_r7698><b>dma_buf_export</b><p data-pid=JAo4CyIh>Exporter 设备调用，通过将dma_buf_export_info转换为dma_buf结构。<div class=highlight><pre><code class=language-text>/**
 * dma_buf_export - Creates a new dma_buf, and associates an anon file
 * with this buffer, so it can be exported.
 * Also connect the allocator specific data and ops to the buffer.
 * Additionally, provide a name string for exporter; useful in debugging.
 *
 * @exp_info:        [in]        holds all the export related information provided
 *                        by the exporter. see &amp;struct dma_buf_export_info
 *                        for further details.
 *
 * Returns, on success, a newly created dma_buf object, which wraps the
 * supplied private data and operations for dma_buf_ops. On either missing
 * ops, or error in allocating struct dma_buf, will return negative error.
 *
 * For most cases the easiest way to create @exp_info is through the
 * %DEFINE_DMA_BUF_EXPORT_INFO macro.
 */
 struct dma_buf *dma_buf_export(const struct dma_buf_export_info *exp_info)</code></pre></div><p data-pid=p-uqR6s8><b>dma_buf_fd</b><p data-pid=YrA8TVF2>Exporter 调用，将dma_buf结构转换成匿名文件的fd，该fd可以被传递给user process或者kernel module。<div class=highlight><pre><code class=language-text>/**
 * dma_buf_fd - returns a file descriptor for the given dma_buf
 * @dmabuf:        [in]        pointer to dma_buf for which fd is required.
 * @flags:      [in]    flags to give to fd
 *
 * On success, returns an associated 'fd'. Else, returns error.
 */
 int dma_buf_fd(struct dma_buf *dmabuf, int flags)</code></pre></div><p data-pid=htOPC8Yd><b>dma_buf_get</b><p data-pid=m872UGeI>Importer 调用，将fd转换成对应的dma_buf<div class=highlight><pre><code class=language-text>/**
 * dma_buf_get - returns the dma_buf structure related to an fd
 * @fd:        [in]        fd associated with the dma_buf to be returned
 *
 * On success, returns the dma_buf structure associated with an fd; uses
 * file's refcounting done by fget to increase refcount. returns ERR_PTR
 * otherwise.
 */
struct dma_buf *dma_buf_get(int fd)</code></pre></div><p data-pid=OGapjDDB><b>dma_buf_attach</b><p data-pid=-oLHIWUY>importer 设备调用，绑定impoter dev与dma_buf，如果expoter实现了attach接口，会调用接口进行一定的客制化适配。<div class=highlight><pre><code class=language-text>/**
 * dma_buf_attach - Add the device to dma_buf's attachments list; optionally,
 * calls attach() of dma_buf_ops to allow device-specific attach functionality
 * @dmabuf:        [in]        buffer to attach device to.
 * @dev:        [in]        device to be attached.
 *
 * Returns struct dma_buf_attachment pointer for this attachment. Attachments
 * must be cleaned up by calling dma_buf_detach().
 *
 * Returns:
 *
 * A pointer to newly created &amp;dma_buf_attachment on success, or a negative
 * error code wrapped into a pointer on failure.
 *
 * Note that this can fail if the backing storage of @dmabuf is in a place not
 * accessible to @dev, and cannot be moved to a more suitable place. This is
 * indicated with the error code -EBUSY.
 */
 struct dma_buf_attachment *dma_buf_attach(struct dma_buf *dmabuf,
                    struct device *dev)</code></pre></div><p data-pid=O7o-Y1UU><b>dma_buf_map_attachment</b><p data-pid=ZMcKMnax>importer调用，用于获得dma_buf适配importer后的sglist，从vaddr到sglist使用dma_map_single/sg<div class=highlight><pre><code class=language-text>/**
 * dma_buf_map_attachment - Returns the scatterlist table of the attachment;
 * mapped into _device_ address space. Is a wrapper for map_dma_buf() of the
 * dma_buf_ops.
 * @attach:        [in]        attachment whose scatterlist is to be returned
 * @direction:        [in]        direction of DMA transfer
 *
 * Returns sg_table containing the scatterlist to be returned; returns ERR_PTR
 * on error. May return -EINTR if it is interrupted by a signal.
 *
 * A mapping must be unmapped by using dma_buf_unmap_attachment(). Note that
 * the underlying backing storage is pinned for as long as a mapping exists,
 * therefore users/importers should not hold onto a mapping for undue amounts of
 * time.
 */
 struct sg_table *dma_buf_map_attachment(struct dma_buf_attachment *attach,
                                      enum dma_data_direction direction)</code></pre></div><h2>DMA BUF 内核态基本使用流程图</h2><figure data-size=normal><noscript><img src="https://pic1.zhimg.com/v2-d6793fd39490da3401691de800239664_b.jpg" data-caption="" data-size="normal" data-rawwidth="744" data-rawheight="505" class="origin_image zh-lightbox-thumb" width="744" data-original="https://pic1.zhimg.com/v2-d6793fd39490da3401691de800239664_r.jpg"></noscript><div><img src="data:image/webp;base64,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" data-caption data-size=normal data-rawwidth=744 data-rawheight=505 class="origin_image zh-lightbox-thumb lazy" width=744 data-original=https://pic1.zhimg.com/v2-d6793fd39490da3401691de800239664_r.jpg data-actualsrc=https://pic1.zhimg.com/v2-d6793fd39490da3401691de800239664_b.jpg data-original-token=v2-9cdee1cee9912711e15ae982ba439f7c height=505 data-lazy-status=ok></div></figure><h2>Cache一致性问题-begin/end_cpu_access</h2><p data-pid=olY5eIqX>dma_buf_map_attachment() 函数的一个重要功能，是同步 Cache 操作。但是该函数通常使用的是 dma_map_{single,sg} 这种流式 DMA 映射接口来实现 Cache 同步操作，这类接口的特点就是 Cache 同步只是一次性的，即在 dma map 的时候执行一次 Cache Flush 操作，在 dma unmap 的时候执行一次 Cache Invalidate 操作，而这中间的过程是不保证 Cache 和 DDR 上数据的一致性的。因此如果 CPU 在 dma map 和 unmap 之间又去访问了这块内存，那么有可能 CPU 访问到的数据就只是暂存在 Cache 中的旧数据，这就带来了问题。<br>那么什么情况下会出现 CPU 在 dma map 和 unmap 期间又去访问这块内存呢？一般不会出现 DMA 硬件正在传输过程中突然 CPU 发起访问的情况，而更多的是在 DMA 硬件发起传输之前，或 DMA 硬件传输完成之后，并且仍然处于 dma map 和 unmap 操作之间的时候，CPU 对这段内存发起了访问。下面举个例子：<br>这是内核文档 DMA-API-HOWTO.txt 中描述的一个网卡驱动例子，非常经典。网卡驱动首先通过 dma_map_single() 将接收缓冲区映射给了网卡 DMA 硬件，此后便发起了 DMA 传输请求，等待网卡接收数据完成。当网卡接收完数据后，会触发中断，此时网卡驱动需要在中断里检查本次传输数据的有效性。如果是有效数据，则调用 dma_unmap_single() 结束本次 DMA 映射；如果不是，则丢弃本次数据，继续等待下一次 DMA 接收的数据。在这个过程中，检查数据有效性是通过 CPU 读取接收缓冲区中的包头来实现的，也只有在数据检查完成后，才能决定是否执行 dma_unmap_single() 操作。因此这里出现了 dma map 和 unmap 期间 CPU 要访问这段内存的需求。<br>以上例子是 CPU 在 DMA 传输后发起访问。针对这种情况，就需要在 CPU 访问内存前，先将 DDR 数据同步到 Cache 中（Invalidate）；在 CPU 访问结束后，将 Cache 中的数据回写到 DDR 上（Flush），以便 DMA 能获取到 CPU 更新后的数据。这也就是 dma-buf 给我们预留 {begin,end}_cpu_access 的原因。<h2>内核态其他用法-kmap/vmap</h2><p data-pid=d2-DJWBT>kmap/vmap接口实际上是返回对应虚拟地址<br>kmap可以指定返回虚拟地址下偏移第几页<h2>用户态的使用-mmap</h2><p data-pid=mklYVDAg>当然dma_buf也允许将dma_buf指向的vaddr直接mmap到用户态，只需要实现ops中的mmap接口即可<h2>NVIDIA的做法有什么不同？</h2><p data-pid=K4R-G5iO>目前看起来核心原理没有什么不同。<br>nvida的核心函数nvidia_p2p_get_pages也是返回GPU 虚拟地址对应的pg table，并使该页表可以被访问和操作。<h2>GDR的实现</h2><p data-pid=DQ_yuaIR>其实了解了DMA-BUF，也就很容易理解GDR的原理了。<p data-pid=VguvD4Gt>GDR 本身是RDMA 访问 GPU HBM/DDR4的存储。<p data-pid=23LgXLCH>所以包括几步：<ol><li data-pid=_o3j0mts>首先GPU 驱动需要将HBM 内部存储空间映射到bar上，使外部可以访问HBM。如果bar 足够大，可以直接将HBM空间直接完整映射到bar上，如果bar 不够大，bar 与 hbm 之间需要mapping table，控制bar上某个地址当前对应GPU 上hbm上的具体物理单元。最后体现在软件侧，就是nvidia的page table，cuda 分配的va地址最后可以需要类似内核pin的操作将va 对应的hbm 单元通过bar 可访问，也就是存在host 可见的一个pa。</ol><figure data-size=normal><noscript><img src="https://pic2.zhimg.com/v2-02caf37724c557c0efb501f6f75b5cf5_b.jpg" data-caption="" data-size="normal" data-rawwidth="1440" data-rawheight="990" class="origin_image zh-lightbox-thumb" width="1440" data-original="https://pic2.zhimg.com/v2-02caf37724c557c0efb501f6f75b5cf5_r.jpg"></noscript><div><img src="data:image/webp;base64,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" data-caption data-size=normal data-rawwidth=1440 data-rawheight=990 class="origin_image zh-lightbox-thumb lazy" width=1440 data-original=https://pic2.zhimg.com/v2-02caf37724c557c0efb501f6f75b5cf5_r.jpg data-actualsrc=https://pic2.zhimg.com/v2-02caf37724c557c0efb501f6f75b5cf5_b.jpg data-original-token=v2-afd31e70407c9a68c3f68a7dd5d6b2ab height=990 data-lazy-status=ok></div></figure><p data-pid=-2d9o4hQ>2. mlnx 的rdma 支持peer2peer，通过rdma memory client的架构实现，逻辑与dma buf非常类似。假如GPU 允许rdma 访问，就需要按照mlnx的ops 注册一个memory client，ops 与dma buf 接近。rdma 进行reg mr时，使用va，该va 通过ops 调用map 接口将va对应hbm 单元map &amp; pin到bar上，并根据bar上的pa 填写mtt表，于是完成mr的注册。<p data-pid=-EFSoy0t>3. 发起gdr，只需要rdma 的wqe 里地址使用gpu的va即可。rdma 协议栈会判断va是不是host address，如果是则走一般的pcie 访问host 主存；如果不是host address，会判断va 是不是memory client之一的地址，如果是，则访问该memory client对应的访问空间，在GDR情况下，就是GPU的bar，进而访问GPU的HBM。<p data-pid=InmEAGMh>最后讲一个有趣的知识，NCCL 对GDR的使用有一个iflush的做法，大致原理如下：当通过gdr 将数据写到GPU 的PCIE 端后，其实并不保证数据已经落在HBM上了，如果不在HBM上，GPU的SM 是不能访问数据的，所以为了确保GDR写入的数据落HBM，会进行iflush，也就是将数据刷入HBM。这里有两种实现，一种是发起rdma 本地读，通过gdr 再读一个写入数据的片段，由于物理硬件设计的原因，该操作可以强制数据入hbm，然后再被读出来；另一种是通过gdrcopy，在cpu侧读取该数据的一个片段，也可以达到flush的效果。iflush 是nccl 目前唯一会使用rdma read的场景。</p></div></div></div></div><div style=display:none!important><div class="Sticky RichContent-actions is-bottom" style=display:none!important><div class=ContentItem-actions data-za-detail-view-path-module=BottomBar data-za-extra-module='{"card":{"content":{"type":"Post","id":"685361884","token":"685361884"}}}' style=display:none!important><span style=display:none!important><button aria-label="赞同 10 " aria-live=polite type=button class="Button VoteButton VoteButton--up FEfUrdfMIKpQDJDqkjte" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=10 height=10 viewBox="0 0 24 24" class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill=currentColor><path fill-rule=evenodd d="M13.792 3.681c-.781-1.406-2.803-1.406-3.584 0l-7.79 14.023c-.76 1.367.228 3.046 1.791 3.046h15.582c1.563 0 2.55-1.68 1.791-3.046l-7.79-14.023Z" clip-rule=evenodd></path></svg></span>赞同 10</button><button aria-label=反对 aria-live=polite type=button class="Button VoteButton VoteButton--down FEfUrdfMIKpQDJDqkjte" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=10 height=10 viewBox="0 0 24 24" class="Zi Zi--TriangleDown" fill=currentColor><path fill-rule=evenodd d="M13.792 20.319c-.781 1.406-2.803 1.406-3.584 0L2.418 6.296c-.76-1.367.228-3.046 1.791-3.046h15.582c1.563 0 2.55 1.68 1.791 3.046l-7.79 14.023Z" clip-rule=evenodd></path></svg></span></button></span><button type=button class="Button BottomActions-CommentBtn FEfUrdfMIKpQDJDqkjte Button--plain Button--withIcon Button--withLabel fEPKGkUK5jyc4fUuT0QP B46v1Ak6Gj5sL2JTS4PY RuuQ6TOh2cRzJr6WlyQp" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="Zi Zi--Comment Button-zi t2ntD6J1DemdOdvh5FB4" fill=currentColor><path fill-rule=evenodd d="M12 2.75a9.25 9.25 0 1 0 4.737 17.197l2.643.817a1 1 0 0 0 1.25-1.25l-.8-2.588A9.25 9.25 0 0 0 12 2.75Z" clip-rule=evenodd></path></svg></span>10 条评论</button><div class="Popover ShareMenu" style=display:none!important><div class=ShareMenu-toggler id=Popover2-toggle aria-haspopup=true aria-expanded=false aria-owns=Popover2-content style=display:none!important><button type=button class="Button FEfUrdfMIKpQDJDqkjte Button--plain Button--withIcon Button--withLabel fEPKGkUK5jyc4fUuT0QP B46v1Ak6Gj5sL2JTS4PY RuuQ6TOh2cRzJr6WlyQp" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="Zi Zi--Share Button-zi t2ntD6J1DemdOdvh5FB4" fill=currentColor><path d="M19.47 1.914a.8.8 0 0 1 1.204.778l-1.872 16.386a.9.9 0 0 1-1.204.743l-4.615-1.692a.7.7 0 0 0-.831.28l-1.927 3.02c-.43.674-1.474.369-1.474-.43v-3.865a.8.8 0 0 1 .179-.504l5.808-7.148a.595.595 0 0 0-.897-.781l-5.93 6.354a1.1 1.1 0 0 1-1.258.252L2.57 13.46a.8.8 0 0 1-.08-1.415l16.98-10.13Z"></path></svg></span>分享</button></div></div><button aria-live=polite type=button class="Button ContentItem-action FEfUrdfMIKpQDJDqkjte Button--plain Button--withIcon Button--withLabel fEPKGkUK5jyc4fUuT0QP B46v1Ak6Gj5sL2JTS4PY RuuQ6TOh2cRzJr6WlyQp" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="Zi Zi--Heart Button-zi t2ntD6J1DemdOdvh5FB4" fill=currentColor><path fill-rule=evenodd d="M12.004 4.934c1.015-.944 2.484-1.618 3.98-1.618 3.48 0 6.53 3.265 6.15 7.614-.11 1.254-.686 2.55-1.458 3.753-.778 1.215-1.79 2.392-2.845 3.419-1.054 1.028-2.168 1.923-3.161 2.566a9.96 9.96 0 0 1-1.41.777c-.418.182-.862.32-1.268.32s-.848-.137-1.267-.317a9.918 9.918 0 0 1-1.407-.771c-.992-.64-2.103-1.53-3.156-2.555-1.052-1.024-2.062-2.2-2.84-3.417-.77-1.208-1.346-2.51-1.456-3.775-.38-4.349 2.67-7.614 6.15-7.614 1.484 0 2.983.673 3.988 1.618Z" clip-rule=evenodd></path></svg></span>喜欢</button><button type=button class="Button FEfUrdfMIKpQDJDqkjte Button--plain Button--withIcon Button--withLabel fEPKGkUK5jyc4fUuT0QP B46v1Ak6Gj5sL2JTS4PY RuuQ6TOh2cRzJr6WlyQp" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="Zi Zi--Star Button-zi t2ntD6J1DemdOdvh5FB4" fill=currentColor><path d="M10.484 3.307c.673-1.168 2.358-1.168 3.032 0l2.377 4.122a.25.25 0 0 0 .165.12l4.655.987c1.319.28 1.84 1.882.937 2.884l-3.186 3.535a.25.25 0 0 0-.063.193l.5 4.733c.142 1.34-1.222 2.33-2.453 1.782l-4.346-1.938a.25.25 0 0 0-.204 0l-4.346 1.938c-1.231.549-2.595-.442-2.453-1.782l.5-4.733a.25.25 0 0 0-.064-.193L2.35 11.42c-.903-1.002-.382-2.604.937-2.884l4.655-.987a.25.25 0 0 0 .164-.12l2.378-4.122Z"></path></svg></span>收藏</button><button type=button class="Button ContentItem-action FEfUrdfMIKpQDJDqkjte Button--plain Button--withIcon Button--withLabel fEPKGkUK5jyc4fUuT0QP B46v1Ak6Gj5sL2JTS4PY RuuQ6TOh2cRzJr6WlyQp" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="Zi Zi--Deliver Button-zi t2ntD6J1DemdOdvh5FB4" fill=currentColor><g fill-rule=evenodd clip-rule=evenodd><path d="M7.821 12a.75.75 0 0 1 .75-.75h6.857a.75.75 0 0 1 0 1.5H8.571a.75.75 0 0 1-.75-.75ZM8.965 8a.75.75 0 0 1 .75-.75h4.571a.75.75 0 0 1 0 1.5H9.715a.75.75 0 0 1-.75-.75Z"></path><path d="M7.527 3.15a2.35 2.35 0 0 0-2.309 1.91L3.165 15.84a.85.85 0 0 0-.015.16v2.5a2.35 2.35 0 0 0 2.35 2.35h13a2.35 2.35 0 0 0 2.35-2.35V16a.848.848 0 0 0-.015-.16L18.78 5.06a2.35 2.35 0 0 0-2.308-1.91H7.527Zm0 1.7a.65.65 0 0 0-.639.528l-1.88 9.872h13.984l-1.88-9.872a.65.65 0 0 0-.64-.528H7.528Z"></path></g></svg></span>申请转载</button><div class=Post-ActionMenuButton style=display:none!important><div class=Popover style=display:none!important><div id=Popover3-toggle aria-haspopup=true aria-expanded=false aria-owns=Popover3-content style=display:none!important><button type=button class="Button FEfUrdfMIKpQDJDqkjte Button--plain Button--withIcon Button--iconOnly fEPKGkUK5jyc4fUuT0QP B46v1Ak6Gj5sL2JTS4PY hIwDV_tcL6XN1HprrnAq" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="Zi Zi--Dots Button-zi t2ntD6J1DemdOdvh5FB4" fill=currentColor><path d="M6 10.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3ZM10.5 12a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 12a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z"></path></svg></span></button></div></div></div></div></div></div></article><div class="Post-Sub Post-NormalSub" style=display:none!important><div data-za-detail-view-path-module=CommentList data-za-extra-module={} style=overflow:unset;display:none!important><div class="Comments-container css-plbgu" style=display:none!important><div class=css-79elbk style=display:none!important><div class=css-u76jt1 style=display:none!important><div class=css-840pn3 style=display:none!important><div class=css-1frn93x style=display:none!important><div data-id=10836323163 style=display:none!important><div class=css-194v73m style=display:none!important><div class=css-14nvvry style=display:none!important><div class=css-140jo2 style=display:none!important><div class=css-18opwoy style=display:none!important><button type=button class="Button Button--plain Button--withIcon Button--withLabel css-1ij6qqc" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="ZDI ZDI--ChatBubbleFill24 css-15ro776" fill=currentColor><path fill-rule=evenodd d="M12 2.75a9.25 9.25 0 1 0 4.737 17.197l2.643.817a1 1 0 0 0 1.25-1.25l-.8-2.588A9.25 9.25 0 0 0 12 2.75Z" clip-rule=evenodd></path></svg></span>回复</button><button type=button class="Button Button--plain Button--grey Button--withIcon Button--withLabel css-1o3qul2" style=transform:none;display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="ZDI ZDI--HeartFill24 css-15ro776" fill=currentColor><path fill-rule=evenodd d="M12.004 4.934c1.015-.944 2.484-1.618 3.98-1.618 3.48 0 6.53 3.265 6.15 7.614-.11 1.254-.686 2.55-1.458 3.753-.778 1.215-1.79 2.392-2.845 3.419-1.054 1.028-2.168 1.923-3.161 2.566a9.96 9.96 0 0 1-1.41.777c-.418.182-.862.32-1.268.32s-.848-.137-1.267-.317a9.918 9.918 0 0 1-1.407-.771c-.992-.64-2.103-1.53-3.156-2.555-1.052-1.024-2.062-2.2-2.84-3.417-.77-1.208-1.346-2.51-1.456-3.775-.38-4.349 2.67-7.614 6.15-7.614 1.484 0 2.983.673 3.988 1.618Z" clip-rule=evenodd></path></svg></span>喜欢</button></div></div></div></div><div data-id=10839111225 style=display:none!important><div class=css-8j5fyx style=display:none!important><div class=css-14nvvry style=display:none!important><div class=css-z0cc58 style=display:none!important><div class=css-swj9d4 style=display:none!important><div class=css-1tww9qq style=display:none!important><div class=css-1qe0v6x style=display:none!important><span class=css-18biwo style=display:none!important>​<svg viewBox="0 0 24 24" class=css-paut93 width=18 height=18><defs><lineargradient id=biz-badges-blue x1=0 y1=0 x2=100% y2=73.32%><stop offset=15% stop-color=#47D3FF></stop><stop offset=81.54% stop-color=#4A7DFF></stop></lineargradient></defs><svg viewBox="0 0 24 24" x=-3 y=-3 fill=#ffffff width=30 height=30><path d="M3.56231227,13.8535307 C2.40051305,12.768677 2.41398885,11.0669203 3.59484487,9.99979213 L3.59222085,9.99654885 C4.26730143,9.45036719 4.79446755,8.21005186 4.7184197,7.34453784 L4.72305873,7.34412719 C4.66942824,5.75539997 5.8824188,4.56066914 7.47188965,4.64242381 L7.47229112,4.6386236 C8.33515314,4.72977993 9.58467253,4.22534048 10.1426329,3.55925173 L10.1462611,3.56228565 C11.2316055,2.40008701 12.9353108,2.41394456 14.0015072,3.59634088 L14.0047263,3.59374004 C14.5498229,4.26841874 15.7896857,4.79521622 16.6545744,4.71844347 L16.6549836,4.72304294 C18.245027,4.66894057 19.4396947,5.88213996 19.3575031,7.47241135 L19.3623099,7.47292747 C19.2704388,8.3358681 19.7742711,9.58421483 20.4407199,10.1424506 L20.437686,10.1460789 C21.5997217,11.2312209 21.5860695,12.9345218 20.4042441,14.0007396 L20.4072865,14.0045125 C19.7325967,14.5495925 19.2055209,15.7896954 19.2815865,16.6561959 L19.2770449,16.6565978 C19.3315454,18.2453037 18.1173775,19.4393568 16.5274188,19.3571512 L16.5269029,19.3619539 C15.6647098,19.270083 14.415408,19.7741709 13.8573671,20.4403558 L13.8537409,20.4373235 C12.76842,21.5995708 11.0650432,21.5864553 9.99899434,20.4039226 L9.99527367,20.406923 C9.45025436,19.7323399 8.21017638,19.2051872 7.34461983,19.2812352 L7.344304,19.2776405 C5.75448683,19.3312904 4.55977145,18.1170085 4.64254978,16.527117 L4.63769921,16.5265942 C4.72957031,15.6644394 4.22547659,14.4151814 3.55928015,13.8571569 L3.56231227,13.8535307 Z"></path></svg><path d="M2.63951518,13.3895441 C3.70763333,14.2842292 4.44777637,16.1226061 4.30075305,17.5023312 L4.32211542,17.3063047 C4.17509209,18.6910561 5.17786655,19.7063729 6.5613937,19.5844846 L6.364106,19.6008202 C7.75140298,19.4789319 9.57474349,20.2554985 10.4468305,21.3349009 L10.3224262,21.1803415 C11.1982831,22.2647703 12.6257916,22.2723098 13.5167278,21.2079863 L13.3898102,21.3600325 C14.2845162,20.2919393 16.1229361,19.5518136 17.5026934,19.6988334 L17.3054057,19.6774716 C18.6914461,19.8244915 19.7067866,18.8217404 19.5836389,17.4395022 L19.6012314,17.6367853 C19.4793403,16.2482641 20.255925,14.4249662 21.3353526,13.5528995 L21.1807897,13.677301 C22.2639871,12.8014646 22.2727834,11.3739894 21.2084351,10.483074 L21.3604848,10.6099886 C20.2923667,9.71530351 19.5522236,7.87818322 19.6992469,6.49720154 L19.6778846,6.69448464 C19.8249079,5.30847665 18.8221335,4.2944164 17.4386063,4.41630468 L17.635894,4.39871256 C16.248597,4.52185742 14.4252565,3.74529084 13.5531695,2.66588842 L13.6775738,2.81919121 C12.8017169,1.73601905 11.3742084,1.72722299 10.4832722,2.79154644 L10.6101898,2.63950024 C9.71548377,3.70759343 7.87706394,4.44771919 6.49730661,4.30195588 L6.69459432,4.32206116 C5.30855394,4.17504128 4.29447,5.17904888 4.41636114,6.56128713 L4.3987686,6.36400404 C4.52065973,7.75126861 3.74407501,9.57456653 2.66464737,10.4478898 L2.81921035,10.3222318 C1.73601288,11.1993248 1.72721662,12.6255433 2.79156494,13.5164587 L2.63951518,13.3895441 Z" fill=url(#biz-badges-blue)></path><svg width=12 height=12 viewBox="0 0 24 24" fill=#fff x=6 y=6 class="Zi Zi--Check"><path fill-rule=evenodd d="M21.864 5.347a1.25 1.25 0 0 1 .04 1.767L10.976 18.537a1.35 1.35 0 0 1-1.965-.014L2.584 11.6a1.25 1.25 0 0 1 1.832-1.702l5.598 6.029L20.096 5.386a1.25 1.25 0 0 1 1.767-.04Z" clip-rule=evenodd></path></svg></svg></span></div></div><svg width=12 height=12 viewBox="0 0 16 16" class="ZDI ZDI--ArrowRightAlt16 css-gx7lzm" fill=currentColor><path d="M10.727 7.48a.63.63 0 0 1 0 1.039l-4.299 2.88c-.399.268-.926-.028-.926-.519V5.12c0-.491.527-.787.926-.52l4.299 2.881Z"></path></svg></div></div><div class=css-140jo2 style=display:none!important><div class=css-18opwoy style=display:none!important><button type=button class="Button Button--plain Button--withIcon Button--withLabel css-1ij6qqc" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="ZDI ZDI--ChatBubbleFill24 css-15ro776" fill=currentColor><path fill-rule=evenodd d="M12 2.75a9.25 9.25 0 1 0 4.737 17.197l2.643.817a1 1 0 0 0 1.25-1.25l-.8-2.588A9.25 9.25 0 0 0 12 2.75Z" clip-rule=evenodd></path></svg></span>回复</button><button type=button class="Button Button--plain Button--grey Button--withIcon Button--withLabel css-1o3qul2" style=transform:none;display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="ZDI ZDI--HeartFill24 css-15ro776" fill=currentColor><path fill-rule=evenodd d="M12.004 4.934c1.015-.944 2.484-1.618 3.98-1.618 3.48 0 6.53 3.265 6.15 7.614-.11 1.254-.686 2.55-1.458 3.753-.778 1.215-1.79 2.392-2.845 3.419-1.054 1.028-2.168 1.923-3.161 2.566a9.96 9.96 0 0 1-1.41.777c-.418.182-.862.32-1.268.32s-.848-.137-1.267-.317a9.918 9.918 0 0 1-1.407-.771c-.992-.64-2.103-1.53-3.156-2.555-1.052-1.024-2.062-2.2-2.84-3.417-.77-1.208-1.346-2.51-1.456-3.775-.38-4.349 2.67-7.614 6.15-7.614 1.484 0 2.983.673 3.988 1.618Z" clip-rule=evenodd></path></svg></span>喜欢</button></div></div></div></div></div><div data-id=10838966329 style=display:none!important><div class=css-8j5fyx style=display:none!important><div class=css-14nvvry style=display:none!important><div class=css-z0cc58 style=display:none!important><div class=css-swj9d4 style=display:none!important><div class=css-1tww9qq style=display:none!important><div class=css-1qe0v6x style=display:none!important><span class=css-18biwo style=display:none!important>​<svg viewBox="0 0 24 24" class=css-paut93 width=18 height=18><defs><lineargradient id=biz-badges-blue x1=0 y1=0 x2=100% y2=73.32%><stop offset=15% stop-color=#47D3FF></stop><stop offset=81.54% stop-color=#4A7DFF></stop></lineargradient></defs><svg viewBox="0 0 24 24" x=-3 y=-3 fill=#ffffff width=30 height=30><path d="M3.56231227,13.8535307 C2.40051305,12.768677 2.41398885,11.0669203 3.59484487,9.99979213 L3.59222085,9.99654885 C4.26730143,9.45036719 4.79446755,8.21005186 4.7184197,7.34453784 L4.72305873,7.34412719 C4.66942824,5.75539997 5.8824188,4.56066914 7.47188965,4.64242381 L7.47229112,4.6386236 C8.33515314,4.72977993 9.58467253,4.22534048 10.1426329,3.55925173 L10.1462611,3.56228565 C11.2316055,2.40008701 12.9353108,2.41394456 14.0015072,3.59634088 L14.0047263,3.59374004 C14.5498229,4.26841874 15.7896857,4.79521622 16.6545744,4.71844347 L16.6549836,4.72304294 C18.245027,4.66894057 19.4396947,5.88213996 19.3575031,7.47241135 L19.3623099,7.47292747 C19.2704388,8.3358681 19.7742711,9.58421483 20.4407199,10.1424506 L20.437686,10.1460789 C21.5997217,11.2312209 21.5860695,12.9345218 20.4042441,14.0007396 L20.4072865,14.0045125 C19.7325967,14.5495925 19.2055209,15.7896954 19.2815865,16.6561959 L19.2770449,16.6565978 C19.3315454,18.2453037 18.1173775,19.4393568 16.5274188,19.3571512 L16.5269029,19.3619539 C15.6647098,19.270083 14.415408,19.7741709 13.8573671,20.4403558 L13.8537409,20.4373235 C12.76842,21.5995708 11.0650432,21.5864553 9.99899434,20.4039226 L9.99527367,20.406923 C9.45025436,19.7323399 8.21017638,19.2051872 7.34461983,19.2812352 L7.344304,19.2776405 C5.75448683,19.3312904 4.55977145,18.1170085 4.64254978,16.527117 L4.63769921,16.5265942 C4.72957031,15.6644394 4.22547659,14.4151814 3.55928015,13.8571569 L3.56231227,13.8535307 Z"></path></svg><path d="M2.63951518,13.3895441 C3.70763333,14.2842292 4.44777637,16.1226061 4.30075305,17.5023312 L4.32211542,17.3063047 C4.17509209,18.6910561 5.17786655,19.7063729 6.5613937,19.5844846 L6.364106,19.6008202 C7.75140298,19.4789319 9.57474349,20.2554985 10.4468305,21.3349009 L10.3224262,21.1803415 C11.1982831,22.2647703 12.6257916,22.2723098 13.5167278,21.2079863 L13.3898102,21.3600325 C14.2845162,20.2919393 16.1229361,19.5518136 17.5026934,19.6988334 L17.3054057,19.6774716 C18.6914461,19.8244915 19.7067866,18.8217404 19.5836389,17.4395022 L19.6012314,17.6367853 C19.4793403,16.2482641 20.255925,14.4249662 21.3353526,13.5528995 L21.1807897,13.677301 C22.2639871,12.8014646 22.2727834,11.3739894 21.2084351,10.483074 L21.3604848,10.6099886 C20.2923667,9.71530351 19.5522236,7.87818322 19.6992469,6.49720154 L19.6778846,6.69448464 C19.8249079,5.30847665 18.8221335,4.2944164 17.4386063,4.41630468 L17.635894,4.39871256 C16.248597,4.52185742 14.4252565,3.74529084 13.5531695,2.66588842 L13.6775738,2.81919121 C12.8017169,1.73601905 11.3742084,1.72722299 10.4832722,2.79154644 L10.6101898,2.63950024 C9.71548377,3.70759343 7.87706394,4.44771919 6.49730661,4.30195588 L6.69459432,4.32206116 C5.30855394,4.17504128 4.29447,5.17904888 4.41636114,6.56128713 L4.3987686,6.36400404 C4.52065973,7.75126861 3.74407501,9.57456653 2.66464737,10.4478898 L2.81921035,10.3222318 C1.73601288,11.1993248 1.72721662,12.6255433 2.79156494,13.5164587 L2.63951518,13.3895441 Z" fill=url(#biz-badges-blue)></path><svg width=12 height=12 viewBox="0 0 24 24" fill=#fff x=6 y=6 class="Zi Zi--Check"><path fill-rule=evenodd d="M21.864 5.347a1.25 1.25 0 0 1 .04 1.767L10.976 18.537a1.35 1.35 0 0 1-1.965-.014L2.584 11.6a1.25 1.25 0 0 1 1.832-1.702l5.598 6.029L20.096 5.386a1.25 1.25 0 0 1 1.767-.04Z" clip-rule=evenodd></path></svg></svg></span></div></div></div></div><div class=css-140jo2 style=display:none!important><div class=css-18opwoy style=display:none!important><button type=button class="Button Button--plain Button--withIcon Button--withLabel css-1ij6qqc" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="ZDI ZDI--ChatBubbleFill24 css-15ro776" fill=currentColor><path fill-rule=evenodd d="M12 2.75a9.25 9.25 0 1 0 4.737 17.197l2.643.817a1 1 0 0 0 1.25-1.25l-.8-2.588A9.25 9.25 0 0 0 12 2.75Z" clip-rule=evenodd></path></svg></span>回复</button><button type=button class="Button Button--plain Button--grey Button--withIcon Button--withLabel css-1o3qul2" style=transform:none;display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="ZDI ZDI--HeartFill24 css-15ro776" fill=currentColor><path fill-rule=evenodd d="M12.004 4.934c1.015-.944 2.484-1.618 3.98-1.618 3.48 0 6.53 3.265 6.15 7.614-.11 1.254-.686 2.55-1.458 3.753-.778 1.215-1.79 2.392-2.845 3.419-1.054 1.028-2.168 1.923-3.161 2.566a9.96 9.96 0 0 1-1.41.777c-.418.182-.862.32-1.268.32s-.848-.137-1.267-.317a9.918 9.918 0 0 1-1.407-.771c-.992-.64-2.103-1.53-3.156-2.555-1.052-1.024-2.062-2.2-2.84-3.417-.77-1.208-1.346-2.51-1.456-3.775-.38-4.349 2.67-7.614 6.15-7.614 1.484 0 2.983.673 3.988 1.618Z" clip-rule=evenodd></path></svg></span>喜欢</button></div></div></div></div></div><button type=button class="Button Button--secondary Button--grey css-14jvw02" style=display:none!important>查看全部 7 条回复<span style=display:none!important;align-items:center>​<svg width=24 height=24 viewBox="0 0 24 24" class="ZDI ZDI--ArrowRightSmall24" fill=currentColor><path fill-rule=evenodd d="M10.518 6.224a.875.875 0 0 1 1.212.248l3.335 5.05a.875.875 0 0 1 0 .964l-3.334 5.043a.875.875 0 0 1-1.46-.965l3.015-4.56-3.016-4.568a.875.875 0 0 1 .248-1.212Z" clip-rule=evenodd></path></svg></span></button></div><div data-id=10832826211 style=display:none!important><div class=css-194v73m style=display:none!important><div class=css-14nvvry style=display:none!important><div class=css-140jo2 style=display:none!important><div class=css-18opwoy style=display:none!important><button type=button class="Button Button--plain Button--withIcon Button--withLabel css-1ij6qqc" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="ZDI ZDI--ChatBubbleFill24 css-15ro776" fill=currentColor><path fill-rule=evenodd d="M12 2.75a9.25 9.25 0 1 0 4.737 17.197l2.643.817a1 1 0 0 0 1.25-1.25l-.8-2.588A9.25 9.25 0 0 0 12 2.75Z" clip-rule=evenodd></path></svg></span>回复</button><button type=button class="Button Button--plain Button--grey Button--withIcon Button--withLabel css-1o3qul2" style=transform:none;display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="ZDI ZDI--HeartFill24 css-15ro776" fill=currentColor><path fill-rule=evenodd d="M12.004 4.934c1.015-.944 2.484-1.618 3.98-1.618 3.48 0 6.53 3.265 6.15 7.614-.11 1.254-.686 2.55-1.458 3.753-.778 1.215-1.79 2.392-2.845 3.419-1.054 1.028-2.168 1.923-3.161 2.566a9.96 9.96 0 0 1-1.41.777c-.418.182-.862.32-1.268.32s-.848-.137-1.267-.317a9.918 9.918 0 0 1-1.407-.771c-.992-.64-2.103-1.53-3.156-2.555-1.052-1.024-2.062-2.2-2.84-3.417-.77-1.208-1.346-2.51-1.456-3.775-.38-4.349 2.67-7.614 6.15-7.614 1.484 0 2.983.673 3.988 1.618Z" clip-rule=evenodd></path></svg></span>喜欢</button></div></div></div></div><div data-id=10832566326 style=display:none!important><div class=css-8j5fyx style=display:none!important><div class=css-14nvvry style=display:none!important><div class=css-z0cc58 style=display:none!important><div class=css-swj9d4 style=display:none!important><div class=css-1tww9qq style=display:none!important><div class=css-1qe0v6x style=display:none!important><span class=css-18biwo style=display:none!important>​<svg viewBox="0 0 24 24" class=css-paut93 width=18 height=18><defs><lineargradient id=biz-badges-blue x1=0 y1=0 x2=100% y2=73.32%><stop offset=15% stop-color=#47D3FF></stop><stop offset=81.54% stop-color=#4A7DFF></stop></lineargradient></defs><svg viewBox="0 0 24 24" x=-3 y=-3 fill=#ffffff width=30 height=30><path d="M3.56231227,13.8535307 C2.40051305,12.768677 2.41398885,11.0669203 3.59484487,9.99979213 L3.59222085,9.99654885 C4.26730143,9.45036719 4.79446755,8.21005186 4.7184197,7.34453784 L4.72305873,7.34412719 C4.66942824,5.75539997 5.8824188,4.56066914 7.47188965,4.64242381 L7.47229112,4.6386236 C8.33515314,4.72977993 9.58467253,4.22534048 10.1426329,3.55925173 L10.1462611,3.56228565 C11.2316055,2.40008701 12.9353108,2.41394456 14.0015072,3.59634088 L14.0047263,3.59374004 C14.5498229,4.26841874 15.7896857,4.79521622 16.6545744,4.71844347 L16.6549836,4.72304294 C18.245027,4.66894057 19.4396947,5.88213996 19.3575031,7.47241135 L19.3623099,7.47292747 C19.2704388,8.3358681 19.7742711,9.58421483 20.4407199,10.1424506 L20.437686,10.1460789 C21.5997217,11.2312209 21.5860695,12.9345218 20.4042441,14.0007396 L20.4072865,14.0045125 C19.7325967,14.5495925 19.2055209,15.7896954 19.2815865,16.6561959 L19.2770449,16.6565978 C19.3315454,18.2453037 18.1173775,19.4393568 16.5274188,19.3571512 L16.5269029,19.3619539 C15.6647098,19.270083 14.415408,19.7741709 13.8573671,20.4403558 L13.8537409,20.4373235 C12.76842,21.5995708 11.0650432,21.5864553 9.99899434,20.4039226 L9.99527367,20.406923 C9.45025436,19.7323399 8.21017638,19.2051872 7.34461983,19.2812352 L7.344304,19.2776405 C5.75448683,19.3312904 4.55977145,18.1170085 4.64254978,16.527117 L4.63769921,16.5265942 C4.72957031,15.6644394 4.22547659,14.4151814 3.55928015,13.8571569 L3.56231227,13.8535307 Z"></path></svg><path d="M2.63951518,13.3895441 C3.70763333,14.2842292 4.44777637,16.1226061 4.30075305,17.5023312 L4.32211542,17.3063047 C4.17509209,18.6910561 5.17786655,19.7063729 6.5613937,19.5844846 L6.364106,19.6008202 C7.75140298,19.4789319 9.57474349,20.2554985 10.4468305,21.3349009 L10.3224262,21.1803415 C11.1982831,22.2647703 12.6257916,22.2723098 13.5167278,21.2079863 L13.3898102,21.3600325 C14.2845162,20.2919393 16.1229361,19.5518136 17.5026934,19.6988334 L17.3054057,19.6774716 C18.6914461,19.8244915 19.7067866,18.8217404 19.5836389,17.4395022 L19.6012314,17.6367853 C19.4793403,16.2482641 20.255925,14.4249662 21.3353526,13.5528995 L21.1807897,13.677301 C22.2639871,12.8014646 22.2727834,11.3739894 21.2084351,10.483074 L21.3604848,10.6099886 C20.2923667,9.71530351 19.5522236,7.87818322 19.6992469,6.49720154 L19.6778846,6.69448464 C19.8249079,5.30847665 18.8221335,4.2944164 17.4386063,4.41630468 L17.635894,4.39871256 C16.248597,4.52185742 14.4252565,3.74529084 13.5531695,2.66588842 L13.6775738,2.81919121 C12.8017169,1.73601905 11.3742084,1.72722299 10.4832722,2.79154644 L10.6101898,2.63950024 C9.71548377,3.70759343 7.87706394,4.44771919 6.49730661,4.30195588 L6.69459432,4.32206116 C5.30855394,4.17504128 4.29447,5.17904888 4.41636114,6.56128713 L4.3987686,6.36400404 C4.52065973,7.75126861 3.74407501,9.57456653 2.66464737,10.4478898 L2.81921035,10.3222318 C1.73601288,11.1993248 1.72721662,12.6255433 2.79156494,13.5164587 L2.63951518,13.3895441 Z" fill=url(#biz-badges-blue)></path><svg width=12 height=12 viewBox="0 0 24 24" fill=#fff x=6 y=6 class="Zi Zi--Check"><path fill-rule=evenodd d="M21.864 5.347a1.25 1.25 0 0 1 .04 1.767L10.976 18.537a1.35 1.35 0 0 1-1.965-.014L2.584 11.6a1.25 1.25 0 0 1 1.832-1.702l5.598 6.029L20.096 5.386a1.25 1.25 0 0 1 1.767-.04Z" clip-rule=evenodd></path></svg></svg></span></div></div></div></div><div class=css-140jo2 style=display:none!important><div class=css-18opwoy style=display:none!important><button type=button class="Button Button--plain Button--withIcon Button--withLabel css-1ij6qqc" style=display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="ZDI ZDI--ChatBubbleFill24 css-15ro776" fill=currentColor><path fill-rule=evenodd d="M12 2.75a9.25 9.25 0 1 0 4.737 17.197l2.643.817a1 1 0 0 0 1.25-1.25l-.8-2.588A9.25 9.25 0 0 0 12 2.75Z" clip-rule=evenodd></path></svg></span>回复</button><button type=button class="Button Button--plain Button--grey Button--withIcon Button--withLabel css-1o3qul2" style=transform:none;display:none!important><span style=display:none!important;align-items:center>​<svg width=1.2em height=1.2em viewBox="0 0 24 24" class="ZDI ZDI--HeartFill24 css-15ro776" fill=currentColor><path fill-rule=evenodd d="M12.004 4.934c1.015-.944 2.484-1.618 3.98-1.618 3.48 0 6.53 3.265 6.15 7.614-.11 1.254-.686 2.55-1.458 3.753-.778 1.215-1.79 2.392-2.845 3.419-1.054 1.028-2.168 1.923-3.161 2.566a9.96 9.96 0 0 1-1.41.777c-.418.182-.862.32-1.268.32s-.848-.137-1.267-.317a9.918 9.918 0 0 1-1.407-.771c-.992-.64-2.103-1.53-3.156-2.555-1.052-1.024-2.062-2.2-2.84-3.417-.77-1.208-1.346-2.51-1.456-3.775-.38-4.349 2.67-7.614 6.15-7.614 1.484 0 2.983.673 3.988 1.618Z" clip-rule=evenodd></path></svg></span>喜欢</button></div></div></div></div></div></div></div></div></div></div></div></div><div role=complementary aria-label=推荐阅读 class=Recommendations-Main style=width:1344px;display:none!important><ul class=Recommendations-List style=display:none!important><button class="PagingButton PagingButton-Previous" disabled data-za-detail-view-path-module=Unknown data-za-detail-view-path-module_name=推荐阅读 data-za-extra-module={} style=display:none!important><svg width=40 height=40 viewBox="0 0 24 24" fill=#d3d3d3 class="Zi Zi--ArrowLeft"><path fill-rule=evenodd d="M14.609 6.322c.349.335.36.889.026 1.237l-4.253 4.438 4.254 4.444a.875.875 0 1 1-1.264 1.21l-4.834-5.05a.875.875 0 0 1 0-1.21l4.834-5.043a.875.875 0 0 1 1.237-.026Z" clip-rule=evenodd></path></svg></button><button class="PagingButton PagingButton-Next" data-za-detail-view-path-module=Unknown data-za-detail-view-path-module_name=推荐阅读 data-za-extra-module={} style=display:none!important><svg width=40 height=40 viewBox="0 0 24 24" fill=#d3d3d3 class="Zi Zi--ArrowRight"><path fill-rule=evenodd d="M10.518 6.224a.875.875 0 0 1 1.212.248l3.335 5.05a.875.875 0 0 1 0 .964l-3.334 5.043a.875.875 0 0 1-1.46-.965l3.015-4.56-3.016-4.568a.875.875 0 0 1 .248-1.212Z" clip-rule=evenodd></path></svg></button></ul></div></div></div></main><div role=complementary style=display:none!important><div class=CornerButtons style=display:none!important><div class="CornerAnimayedFlex CornerAnimayedFlex--hidden" style=display:none!important><button data-tooltip=回到顶部 data-tooltip-position=left data-tooltip-will-hide-on-click=true aria-label=回到顶部 type=button class="Button CornerButton Button--plain css-4lspwd" style=display:none!important><svg width=24 height=24 viewBox="0 0 24 24" aria-hidden=true class="Zi Zi--BackToTop" fill=currentColor><path fill-rule=evenodd d="M13.204 3.107a1.75 1.75 0 0 0-2.408 0L3.806 9.73c-1.148 1.088-.378 3.02 1.204 3.02h2.24V20c0 .966.784 1.75 1.75 1.75h6A1.75 1.75 0 0 0 16.75 20v-7.25h2.24c1.582 0 2.353-1.932 1.204-3.02l-6.99-6.623Z" clip-rule=evenodd></path></svg></button></div></div></div></div></div><div style=display:none!important><div style=display:none!important><div class=Editable-languageSuggestions style=left:-1179px;top:-999px;display:none!important><div style=display:none!important><div class=Popover style=display:none!important><label class="Editable-languageSuggestionsInput Input-wrapper" style=display:none!important><svg width=24 height=24 viewBox="0 0 24 24" fill=#afbdcf class="Zi Zi--Select"><path fill-rule=evenodd d="M12.53 3.47a.75.75 0 0 0-1.06 0l-5 5a.75.75 0 0 0 1.06 1.06L12 5.06l4.47 4.47a.75.75 0 1 0 1.06-1.06l-5-5Zm-5 11a.75.75 0 0 0-1.06 1.06l5 5a.75.75 0 0 0 1.06 0l5-5a.75.75 0 1 0-1.06-1.06L12 18.94l-4.47-4.47Z" clip-rule=evenodd></path></svg></label></div></div></div></div></div>